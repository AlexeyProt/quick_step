!function(){"use strict";var t,e,o,n,c,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(t,e,o){t.undoManager.transact(function(){t.focus(),t.formatter.apply(e,{value:o}),t.nodeChanged()})},l=function(t,e){t.undoManager.transact(function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()})},u=function(o){o.addCommand("mceApplyTextcolor",function(t,e){a(o,t,e)}),o.addCommand("mceRemoveTextcolor",function(t){l(o,t)})},i=function(t){var e=t,o=function(){return e};return{get:o,set:function(t){e=t},clone:function(){return i(o())}}},f=function(t){return function(){return t}},m=f(!1),v=f(!0),s=function(){return x},x=(n={fold:function(t,e){return t()},is:m,isSome:m,isNone:v,getOr:o=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:o,orThunk:e,map:s,ap:s,each:function(){},bind:s,flatten:s,exists:m,forall:v,filter:s,equals:t=function(t){return t.isNone()},equals_:t,toArray:function(){return[]},toString:f("none()")},Object.freeze&&Object.freeze(n),n),p=(c="function",function(t){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(t)===c}),d=(Array.prototype.slice,p(Array.from)&&Array.from,[{text:"Black",value:"#1abc9c"},{text:"Black",value:"#2ecc71"},{text:"Black",value:"#3498db"},{text:"Black",value:"#9b59b6"},{text:"Black",value:"#34495e"},{text:"Black",value:"#16a085"},{text:"Black",value:"#27ae60"},{text:"Black",value:"#2980b9"},{text:"Black",value:"#8e44ad"},{text:"Black",value:"#2c3e50"},{text:"Black",value:"#f1c40f"},{text:"Black",value:"#e67e22"},{text:"Black",value:"#e74c3c"},{text:"Black",value:"#ecf0f1"},{text:"Black",value:"#95a5a6"},{text:"Black",value:"#f39c12"},{text:"Black",value:"#d35400"},{text:"Black",value:"#c0392b"},{text:"Black",value:"#bdc3c7"},{text:"Black",value:"#7f8c8d"},{text:"Black",value:"#000000"},{text:"Black",value:"#ffffff"}]),g=function(t){return function(t,e){for(var o=t.length,n=new Array(o),c=0;c<o;c++){var r=t[c];n[c]=e(r,c,t)}return n}(t.getParam("textcolor_map",d),function(t){return{text:t.text,value:t.value,type:"choiceitem"}})},k=function(t){return Math.ceil(Math.sqrt(t))},y=function(t){var e=g(t),o=k(e.length);return t.getParam("textcolor_cols",o)},h=g,B=function(t){return t.getParam("forecolor_cols",y(t))},b=function(t){return t.getParam("backcolor_cols",y(t))},w=function(t){return"remove"===t?'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M25 5L5 25" stroke-width="1.5" fill="none"></path></svg>':"custom"===t?"color-picker":'<div style="width: 24px; height: 24px; background-color: '+t+';"></div>'},C=i([]),A=function(o,n,t,e,c){"custom"===e?o.windowManager.open({title:"Colorpicker",body:{type:"panel",items:[{type:"colorpicker",name:"col"}]},buttons:[{type:"submit",text:"OK",primary:!0},{type:"cancel",text:"Cancel"}],initialData:{col:"#eeeeee"},onSubmit:function(t){var e=t.getData().col;C.set(C.get().concat([{type:"choiceitem",text:e,icon:w(e),value:e}])),t.close(),o.execCommand("mceApplyTextcolor",n,e),c(e)}}):"remove"===e?o.execCommand("mceRemoveTextcolor",n):(c(e),o.execCommand("mceApplyTextcolor",n,e))},O=function(a){C.set(h(a));var t=function(c,e,t,o){var r;a.ui.registry.addSplitButton(c,(r=i(null),{type:"splitbutton",tooltip:t,presets:"color",icon:"forecolor"===c?"text-color":"background-color",select:function(){return!1},columns:o,fetch:function(t){t(C.get().concat([{type:"choiceitem",text:"Remove",icon:w("remove"),value:"remove"},{type:"choiceitem",text:"Custom",icon:w("custom"),value:"custom"}]))},onAction:function(t){null!==r.get()&&A(a,e,0,r.get(),function(){})},onItemAction:function(n,t){A(a,e,0,t,function(t){var e,o;r.set(t),e="forecolor"===c?"color":"Rectangle",o=t,n.setIconFill(e,o),n.setIconStroke(e,o)})}}))};t("forecolor","forecolor","Color",B(a)),t("backcolor","hilitecolor","Background Color",b(a))};r.add("textcolor",function(t){u(t),O(t)}),function T(){}}();