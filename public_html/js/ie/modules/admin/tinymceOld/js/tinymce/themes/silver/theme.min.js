!function(){"use strict";var e,t,n,o,r,c,i,N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},h=function(n,o){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(o.apply(null,arguments))}},U=function(e){return function(){return e}},b=function(e){return e},f=function(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var a=new Array(arguments.length-1),n=1;n<arguments.length;n++)a[n-1]=arguments[n];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];var r=a.concat(n);return i.apply(null,r)}},k=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!n.apply(null,arguments)}},a=function(e){return function(){throw new Error(e)}},u=function(e){return e()},s=U(!1),l=U(!0),d=s,m=l,g=function(){return v},v=(o={fold:function(e,t){return e()},is:d,isSome:d,isNone:m,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:n,orThunk:t,map:g,ap:g,each:function(){},bind:g,flatten:g,exists:d,forall:m,filter:g,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:U("none()")},Object.freeze&&Object.freeze(o),o),p=function(n){var e=function(){return n},t=function(){return r},o=function(e){return e(n)},r={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:m,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return p(e(n))},ap:function(e){return e.fold(g,function(e){return p(e(n))})},each:function(e){e(n)},bind:o,flatten:e,exists:o,forall:o,filter:function(e){return e(n)?r:v},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(d,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},P={some:p,none:g,from:function(e){return null===e||e===undefined?v:p(e)}},w=function(t){return function(e){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(e)===t}},y=w("string"),x=w("object"),S=w("array"),C=w("boolean"),z=w("function"),O=w("number"),T=(r=Array.prototype.indexOf)===undefined?function(e,t){return _(e,t)}:function(e,t){return r.call(e,t)},M=function(e,t){return-1<T(e,t)},H=function(e,t){return I(e,t).isSome()},A=function(e,t){for(var n=[],o=0;o<e.length;o+=t){var r=e.slice(o,o+t);n.push(r)}return n},E=function(e,t){for(var n=e.length,o=new Array(n),r=0;r<n;r++){var i=e[r];o[r]=t(i,r,e)}return o},V=function(e,t){for(var n=0,o=e.length;n<o;n++)t(e[n],n,e)},D=function(e,t){for(var n=[],o=0,r=e.length;o<r;o++){var i=e[o];t(i,o,e)&&n.push(i)}return n},B=function(e,t,n){return function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n,e)}(e,function(e){n=t(n,e)}),n},R=function(e,t,n){return V(e,function(e){n=t(n,e)}),n},F=function(e,t){for(var n=0,o=e.length;n<o;n++){var r=e[n];if(t(r,n,e))return P.some(r)}return P.none()},I=function(e,t){for(var n=0,o=e.length;n<o;n++)if(t(e[n],n,e))return P.some(n);return P.none()},_=function(e,t){for(var n=0,o=e.length;n<o;++n)if(e[n]===t)return n;return-1},L=Array.prototype.push,j=function(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);L.apply(t,e[n])}return t},W=function(e,t){var n=E(e,t);return j(n)},G=function(e,t){for(var n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n,e))return!1;return!0},X=Array.prototype.slice,Y=function(e){var t=X.call(e,0);return t.reverse(),t},$=function(e,t){return D(e,function(e){return!M(t,e)})},q=function(e){return[e]},K=function(e){return 0===e.length?P.none():P.some(e[0])},J=function(e){return 0===e.length?P.none():P.some(e[e.length-1])},Q=z(Array.from)?Array.from:function(e){return X.call(e)},Z=Object.prototype.hasOwnProperty,ee=function(a){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<e.length;o++){var r=e[o];for(var i in r)Z.call(r,i)&&(n[i]=a(n[i],r[i]))}return n}},te=ee(function(e,t){return x(e)&&x(t)?te(e,t):t}),ne=ee(function(e,t){return t}),oe=function(n){return{is:function(e){return n===e},isValue:l,isError:s,getOr:U(n),getOrThunk:U(n),getOrDie:U(n),or:function(e){return oe(n)},orThunk:function(e){return oe(n)},fold:function(e,t){return t(n)},map:function(e){return oe(e(n))},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOption:function(){return P.some(n)}}},re=function(n){return{is:s,isValue:s,isError:l,getOr:b,getOrThunk:function(e){return e()},getOrDie:function(){return a(String(n))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return re(n)},each:N,bind:function(e){return re(n)},exists:s,forall:l,toOption:P.none}},ie={value:oe,error:re},ae=Object.keys,ue=Object.hasOwnProperty,ce=function(e,t){for(var n=ae(e),o=0,r=n.length;o<r;o++){var i=n[o];t(e[i],i,e)}},se=function(e,o){return le(e,function(e,t,n){return{k:t,v:o(e,t,n)}})},le=function(o,r){var i={};return ce(o,function(e,t){var n=r(e,t,o);i[n.k]=n.v}),i},fe=function(e,n){var o=[];return ce(e,function(e,t){o.push(n(e,t))}),o},de=function(e){return fe(e,function(e){return e})},me=function(a){if(!S(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};return V(a,function(e,o){var t=ae(e);if(1!==t.length)throw new Error("one and only one name per case");var r=t[0],i=e[r];if(n[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!S(i))throw new Error("case arguments must be an array");u.push(r),n[r]=function(){var e=arguments.length;if(e!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+e);for(var n=new Array(e),t=0;t<n.length;t++)n[t]=arguments[t];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[o].apply(null,n)},match:function(e){var t=ae(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!G(u,function(e){return M(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[r].apply(null,n)},log:function(e){console.log(e,{constructors:u,constructor:r,params:n})}}}}),n},ge=(me([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return V(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),he=function(e){return h(ie.error,j)(e)},ve=function(e,t){var n,o,r=ge(e);return 0<r.errors.length?he(r.errors):(n=r.values,o=t,ie.value(te.apply(undefined,[o].concat(n))))},pe=function(e){var t=ge(e);return 0<t.errors.length?he(t.errors):ie.value(t.values)},be=function(t){return function(e){return e.hasOwnProperty(t)?P.from(e[t]):P.none()}},we=function(e,t){return be(t)(e)},ye=function(e,t){var n={};return n[e]=t,n},xe=function(e,t){return n=e,o={},V(t,function(e){n[e]!==undefined&&n.hasOwnProperty(e)&&(o[e]=n[e])}),o;var n,o},ke=function(e,t){return n=t,o={},ce(e,function(e,t){M(n,t)||(o[t]=e)}),o;var n,o},Se=function(e){return be(e)},Ce=function(e,t){return n=e,o=t,function(e){return be(n)(e).getOr(o)};var n,o},ze=function(e,t){return we(e,t)},Oe=function(e,t){return ye(e,t)},Te=function(e){return t={},V(e,function(e){t[e.key]=e.value}),t;var t},Me=function(e,t){return ve(e,t)},He=function(e,t){return o=t,(n=e).hasOwnProperty(o)&&n[o]!==undefined&&null!==n[o];var n,o},Ae=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Ae(n())}}},Ee=function(e){for(var t=[],n=function(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},Ve=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return P.none()},De=U("contextmenu"),Be=U("touchstart"),Re=U("touchmove"),Fe=U("touchend"),Ie=U("gesturestart"),_e=U("mousedown"),Le=U("mousemove"),Ne=U("mouseout"),Pe=U("mouseup"),je=U("mouseover"),Ue=U("focusin"),We=U("focusout"),Ge=U("keydown"),Xe=U("keyup"),Ye=U("input"),$e=U("change"),qe=U("click"),Ke=U("transitionend"),Je=U("selectstart"),Qe=U("paste"),Ze=function(n){var o,r=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r||(r=!0,o=n.apply(null,e)),o}},et=function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}return undefined}(e,t);if(!n)return{major:0,minor:0};var o=function(e){return Number(t.replace(n,"$"+e))};return nt(o(1),o(2))},tt=function(){return nt(0,0)},nt=function(e,t){return{major:e,minor:t}},ot={nu:nt,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?tt():et(e,n)},unknown:tt},rt="Firefox",it=function(e,t){return function(){return t===e}},at=function(e){var t=e.current;return{current:t,version:e.version,isEdge:it("Edge",t),isChrome:it("Chrome",t),isIE:it("IE",t),isOpera:it("Opera",t),isFirefox:it(rt,t),isSafari:it("Safari",t)}},ut={unknown:function(){return at({current:undefined,version:ot.unknown()})},nu:at,edge:U("Edge"),chrome:U("Chrome"),ie:U("IE"),opera:U("Opera"),firefox:U(rt),safari:U("Safari")},ct="Windows",st="Android",lt="Solaris",ft="FreeBSD",dt=function(e,t){return function(){return t===e}},mt=function(e){var t=e.current;return{current:t,version:e.version,isWindows:dt(ct,t),isiOS:dt("iOS",t),isAndroid:dt(st,t),isOSX:dt("OSX",t),isLinux:dt("Linux",t),isSolaris:dt(lt,t),isFreeBSD:dt(ft,t)}},gt={unknown:function(){return mt({current:undefined,version:ot.unknown()})},nu:mt,windows:U(ct),ios:U("iOS"),android:U(st),linux:U("Linux"),osx:U("OSX"),solaris:U(lt),freebsd:U(ft)},ht=function(e,t){var n=String(t).toLowerCase();return F(e,function(e){return e.search(n)})},vt=function(e,n){return ht(e,n).map(function(e){var t=ot.detect(e.versionRegexes,n);return{current:e.name,version:t}})},pt=function(e,n){return ht(e,n).map(function(e){var t=ot.detect(e.versionRegexes,n);return{current:e.name,version:t}})},bt=function(e,t){return-1!==e.indexOf(t)},wt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,yt=function(t){return function(e){return bt(e,t)}},xt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return bt(e,"edge/")&&bt(e,"chrome")&&bt(e,"safari")&&bt(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,wt],search:function(e){return bt(e,"chrome")&&!bt(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return bt(e,"msie")||bt(e,"trident")}},{name:"Opera",versionRegexes:[wt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yt("firefox")},{name:"Safari",versionRegexes:[wt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(bt(e,"safari")||bt(e,"mobile/"))&&bt(e,"applewebkit")}}],kt=[{name:"Windows",search:yt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return bt(e,"iphone")||bt(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:yt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yt("linux"),versionRegexes:[]},{name:"Solaris",search:yt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yt("freebsd"),versionRegexes:[]}],St={browsers:U(xt),oses:U(kt)},Ct=function(e){var t=St.browsers(),n=St.oses(),o=vt(t,e).fold(ut.unknown,ut.nu),r=pt(n,e).fold(gt.unknown,gt.nu);return{browser:o,os:r,deviceType:function f(e,t,n){var o=e.isiOS()&&!0===/ipad/i.test(n),r=e.isiOS()&&!o,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=o||i||a&&!0===/mobile/i.test(n),c=e.isiOS()||e.isAndroid(),s=c&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:U(o),isiPhone:U(r),isTablet:U(u),isPhone:U(s),isTouch:U(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:U(l)}}(r,o,e)}},zt={detect:Ze(function(){var e=navigator.userAgent;return Ct(e)})},Ot={tap:U("alloy.tap")},Tt=U("alloy.focus"),Mt=U("alloy.blur.post"),Ht=U("alloy.receive"),At=U("alloy.execute"),Et=U("alloy.focus.item"),Vt=Ot.tap,Dt=zt.detect().deviceType.isTouch()?Ot.tap:qe,Bt=U("alloy.longpress"),Rt=U("alloy.sandbox.close"),Ft=U("alloy.typeahead.cancel"),It=U("alloy.system.init"),_t=U("alloy.system.scroll"),Lt=U("alloy.system.attached"),Nt=U("alloy.system.detached"),Pt=U("alloy.system.dismissRequested"),jt=U("alloy.focusmanager.shifted"),Ut=U("alloy.slotcontainer.visibility"),Wt=U("alloy.change.tab"),Gt=U("alloy.dismiss.tab"),Xt=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:U(e)}},Yt={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Xt(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return Xt(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return Xt(n)},fromDom:Xt,fromPoint:function(e,t,n){var o=e.dom();return P.from(o.elementFromPoint(t,n)).map(Xt)}},$t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(t.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+n.length+" arguments");var o={};return V(t,function(e,t){o[e]=U(n[t])}),o}},qt=function(e){return e.slice(0).sort()},Kt=function(e,t){throw new Error("All required keys ("+qt(e).join(", ")+") were not specified. Specified keys were: "+qt(t).join(", ")+".")},Jt=function(e){throw new Error("Unsupported keys for object: "+qt(e).join(", "))},Qt=function(t,e){if(!S(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");V(e,function(e){if(!y(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")})},Zt=function(e){var n=qt(e);F(n,function(e,t){return t<n.length-1&&e===n[t+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})},en=function(r,i){var a=r.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return Qt("required",r),Qt("optional",i),Zt(a),function(t){var n=ae(t);G(r,function(e){return M(n,e)})||Kt(r,n);var e=D(n,function(e){return!M(a,e)});0<e.length&&Jt(e);var o={};return V(r,function(e){o[e]=U(t[e])}),V(i,function(e){o[e]=U(Object.prototype.hasOwnProperty.call(t,e)?P.some(t[e]):P.none())}),o}},tn=function(e,t){for(var n=[],o=function(e){return n.push(e),t(e)},r=t(e);(r=r.bind(o)).isSome(););return n},nn="undefined"!=typeof window?window:Function("return this;")(),on=function(e,t){return function(e,t){for(var n=t!==undefined&&null!==t?t:nn,o=0;o<e.length&&n!==undefined&&null!==n;++o)n=n[e[o]];return n}(e.split("."),t)},rn={getOrDie:function(e,t){var n=on(e,t);if(n===undefined||null===n)throw e+" not available on this browser";return n}},an={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},un=an.ELEMENT,cn=an.DOCUMENT,sn=function(e){return e.nodeType!==un&&e.nodeType!==cn||0===e.childElementCount},ln={all:function(e,t){var n=t===undefined?document:t.dom();return sn(n)?[]:E(n.querySelectorAll(e),Yt.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==un)return!1;if(n.matches!==undefined)return n.matches(t);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=t===undefined?document:t.dom();return sn(n)?P.none():P.from(n.querySelector(e)).map(Yt.fromDom)}},fn=function(e,t){return e.dom()===t.dom()},dn=(zt.detect().browser.isIE(),fn),mn=function(e){var t=e.dom();return P.from(t.parentNode).map(Yt.fromDom)},gn=function(e){var t=e.dom();return P.from(t.previousSibling).map(Yt.fromDom)},hn=function(e){var t=e.dom();return P.from(t.nextSibling).map(Yt.fromDom)},vn=function(e){var t=e.dom();return E(t.childNodes,Yt.fromDom)},pn=function(e,t){var n=e.dom().childNodes;return P.from(n[t]).map(Yt.fromDom)},bn=$t("element","offset"),wn={owner:function(e){return Yt.fromDom(e.dom().ownerDocument)},defaultView:function(e){var t=e.dom().ownerDocument.defaultView;return Yt.fromDom(t)},documentElement:function(e){return Yt.fromDom(e.dom().ownerDocument.documentElement)},parent:mn,findIndex:function(n){return mn(n).bind(function(e){var t=vn(e);return I(t,function(e){return dn(n,e)})})},parents:function(e,t){for(var n=z(t)?t:U(!1),o=e.dom(),r=[];null!==o.parentNode&&o.parentNode!==undefined;){var i=o.parentNode,a=Yt.fromDom(i);if(r.push(a),!0===n(a))break;o=i}return r},siblings:function(t){return mn(t).map(vn).map(function(e){return D(e,function(e){return!dn(t,e)})}).getOr([])},prevSibling:gn,offsetParent:function(e){var t=e.dom();return P.from(t.offsetParent).map(Yt.fromDom)},prevSiblings:function(e){return Y(tn(e,gn))},nextSibling:hn,nextSiblings:function(e){return tn(e,hn)},children:vn,child:pn,firstChild:function(e){return pn(e,0)},lastChild:function(e){return pn(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=vn(e);return 0<n.length&&t<n.length?bn(n[t],0):bn(e,t)}},yn=function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,wn.children(Yt.fromDom(n))},xn=function(t,n){wn.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},kn=function(e,t){e.dom().appendChild(t.dom())},Sn={before:xn,after:function(e,t){wn.nextSibling(e).fold(function(){wn.parent(e).each(function(e){kn(e,t)})},function(e){xn(e,t)})},prepend:function(t,n){wn.firstChild(t).fold(function(){kn(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},append:kn,appendAt:function(e,t,n){wn.child(e,n).fold(function(){kn(e,t)},function(e){xn(e,t)})},wrap:function(e,t){xn(e,t),kn(t,e)}},Cn=function(t,e){V(e,function(e){Sn.before(t,e)})},zn=function(t,e){V(e,function(e){Sn.append(t,e)})},On=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Tn={empty:function(e){e.dom().textContent="",V(wn.children(e),function(e){On(e)})},remove:On,unwrap:function(e){var t=wn.children(e);0<t.length&&Cn(e,t),On(e)}},Mn=function(e){return e.dom().innerHTML},Hn=Mn,An=function(e,t){var n=wn.owner(e).dom(),o=Yt.fromDom(n.createDocumentFragment()),r=yn(t,n);zn(o,r),Tn.empty(e),Sn.append(e,o)},En=function(e){var t=Yt.fromTag("div"),n=Yt.fromDom(e.dom().cloneNode(!0));return Sn.append(t,n),Mn(t)},Vn=function(e){return e.dom().nodeName.toLowerCase()},Dn=function(e){return e.dom().nodeType},Bn=function(t){return function(e){return Dn(e)===t}},Rn=Bn(an.ELEMENT),Fn=Bn(an.TEXT),In=Bn(an.DOCUMENT),_n={name:Vn,type:Dn,value:function(e){return e.dom().nodeValue},isElement:Rn,isText:Fn,isDocument:In,isComment:function(e){return Dn(e)===an.COMMENT||"#comment"===Vn(e)}},Ln=function(e,t,n){if(!(y(n)||C(n)||O(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Nn=function(e,t,n){Ln(e.dom(),t,n)},Pn=function(e,t){var n=e.dom().getAttribute(t);return null===n?undefined:n},jn=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Un={clone:function(e){return R(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:Nn,setAll:function(e,t){var n=e.dom();ce(t,function(e,t){Ln(n,t,e)})},get:Pn,has:jn,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(r,i,e){_n.isElement(r)&&_n.isElement(i)&&V(e,function(e){var t,n,o;n=i,jn(t=r,o=e)&&!jn(n,o)&&Nn(n,o,Pn(t,o))})}},Wn=function(e,t){return Yt.fromDom(e.dom().cloneNode(t))},Gn=function(e){return Wn(e,!1)},Xn=function(e){return t=Gn(e),En(t);var t},Yn="unknown",$n="__CHROME_INSPECTOR_CONNECTION_TO_ALLOY__";(i=c||(c={}))[i.STOP=0]="STOP",i[i.NORMAL=1]="NORMAL",i[i.LOGGING=2]="LOGGING";var qn=Ae({}),Kn=function(t,e,n){var o,r,i;switch(ze(qn.get(),t).orThunk(function(){var e=ae(qn.get());return Ve(e,function(e){return-1<t.indexOf(e)?P.some(qn.get()[e]):P.none()})}).getOr(c.NORMAL)){case c.NORMAL:return n(to());case c.LOGGING:var a=(o=t,r=e,i=[],{logEventCut:function(e,t,n){i.push({outcome:"cut",target:t,purpose:n})},logEventStopped:function(e,t,n){i.push({outcome:"stopped",target:t,purpose:n})},logNoParent:function(e,t,n){i.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:function(e,t){i.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(e,t,n){i.push({outcome:"response",purpose:n,target:t})},write:function(){M(["mousemove","mouseover","mouseout",It()],o)||console.log(o,{event:o,target:r.dom(),sequence:E(i,function(e){return M(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+Xn(e.target)+")":e.outcome})})}}),u=n(a);return a.write(),u;case c.STOP:return!0}},Jn=["alloy/data/Fields","alloy/debugging/Debugging"],Qn=function(e,t,n){return Kn(e,t,n)},Zn=function(){if(window[$n]!==undefined)return window[$n];var t=function(e,t){var n=qn.get();n[e]=t,qn.set(n)};return window[$n]={systems:{},lookup:function(t){var n=window[$n].systems,e=ae(n);return Ve(e,function(e){return n[e].getByUid(t).toOption().map(function(e){return Oe(Xn(e.element()),(t=function(n){var e=n.spec();return{"(original.spec)":e,"(dom.ref)":n.element().dom(),"(element)":Xn(n.element()),"(initComponents)":E(e.components!==undefined?e.components:[],t),"(components)":E(n.components(),t),"(bound.events)":fe(n.events(),function(e,t){return[t]}).join(", "),"(behaviours)":e.behaviours!==undefined?se(e.behaviours,function(e,t){return e===undefined?"--revoked--":{config:e.configAsRaw(),"original-config":e.initialConfig,state:n.readState(t)}}):"none"}})(e));var t})}).orThunk(function(){return P.some({error:"Systems ("+e.join(", ")+") did not contain uid: "+t})})},events:{setToNormal:function(e){t(e,c.NORMAL)},setToLogging:function(e){t(e,c.LOGGING)},setToStop:function(e){t(e,c.STOP)}}},window[$n]},eo=function(e,t){Zn().systems[e]=t},to=U({logEventCut:N,logEventStopped:N,logNoParent:N,logEventNoHandlers:N,logEventResponse:N,write:N}),no=0,oo=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++no+String(t)},ro=tinymce.util.Tools.resolve("tinymce.ThemeManager"),io=function(e,t){so(e,e.element(),t,{})},ao=function(e,t,n){so(e,e.element(),t,n)},uo=function(e){io(e,At())},co=function(e,t,n){so(e,t,n,{})},so=function(e,t,n,o){var r=te({target:t},o);e.getSystem().triggerEvent(n,t,se(r,U))},lo=function(e,t,n,o){e.getSystem().triggerEvent(n,t,o.event())},fo=Ze(function(){return mo(Yt.fromDom(document))}),mo=function(e){var t=e.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return Yt.fromDom(t)},go={body:fo,getBody:mo,inBody:function(e){var t=_n.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)}},ho=function(e){io(e,Nt());var t=e.components();V(t,ho)},vo=function(e){var t=e.components();V(t,vo),io(e,Lt())},po=function(e,t){bo(e,t,Sn.append)},bo=function(e,t,n){e.getSystem().addToWorld(t),n(e.element(),t.element()),go.inBody(e.element())&&vo(t),e.syncComponents()},wo=function(e){ho(e),Tn.remove(e.element()),e.getSystem().removeFromWorld(e)},yo=function(t){var e=wn.parent(t.element()).bind(function(e){return t.getSystem().getByDom(e).fold(P.none,P.some)});wo(t),e.each(function(e){e.syncComponents()})},xo=function(e){var t=e.components();V(t,wo),Tn.empty(e.element()),e.syncComponents()},ko=function(e,t){So(e,t,Sn.append)},So=function(e,t,n){n(e,t.element());var o=wn.children(t.element());V(o,function(e){t.getByDom(e).each(vo)})},Co=function(t){var e=wn.children(t.element());V(e,function(e){t.getByDom(e).each(ho)}),Tn.remove(t.element())},zo=me([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Oo=function(e){return zo.defaultedThunk(U(e))},To=zo.strict,Mo=zo.asOption,Ho=zo.defaultedThunk,Ao=(zo.asDefaultedOptionThunk,zo.mergeWithThunk),Eo=me([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),Vo=me([{field:["name","presence","type"]},{state:["name"]}]),Do=function(){return rn.getOrDie("JSON")},Bo=function(e,t,n){return Do().stringify(e,t,n)},Ro=function(e){return x(e)&&100<ae(e).length?" removed due to size":Bo(e,null,2)},Fo=function(e,t){return ie.error([{path:e,getErrorInfo:t}])},Io=me([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),_o=function(n,o,r){return we(o,r).fold(function(){return e=r,t=o,Fo(n,function(){return'Could not find valid *strict* value for "'+e+'" in '+Ro(t)});var e,t},ie.value)},Lo=function(e,t,n){var o=we(e,t).fold(function(){return n(e)},b);return ie.value(o)},No=function(r,u,e,c){return e.fold(function(i,t,e,n){var o=function(e){return n.extract(r.concat([i]),c,e).map(function(e){return ye(t,c(e))})},a=function(e){return e.fold(function(){var e=ye(t,c(P.none()));return ie.value(e)},function(e){return n.extract(r.concat([i]),c,e).map(function(e){return ye(t,c(P.some(e)))})})};return e.fold(function(){return _o(r,u,i).bind(o)},function(e){return Lo(u,i,e).bind(o)},function(){return(e=u,t=i,ie.value(we(e,t))).bind(a);var e,t},function(e){return(t=u,n=i,o=e,r=we(t,n).map(function(e){return!0===e?o(t):e}),ie.value(r)).bind(a);var t,n,o,r},function(e){var t=e(u);return Lo(u,i,U({})).map(function(e){return te(t,e)}).bind(o)})},function(e,t){var n=t(u);return ie.value(ye(e,c(n)))})},Po=function(o){return{extract:function(n,e,t){return o(t,e).fold(function(e){return t=e,Fo(n,function(){return t});var t},ie.value)},toString:function(){return"val"},toDsl:function(){return Eo.itemOf(o)}}},jo=function(e){var c=Uo(e),s=B(e,function(t,e){return e.fold(function(e){return te(t,Oe(e,!0))},U(t))},{});return{extract:function(e,t,n){var o,r,i,a=C(n)?[]:(r=ae(o=n),D(r,function(e){return He(o,e)})),u=D(a,function(e){return!He(s,e)});return 0===u.length?c.extract(e,t,n):(i=u,Fo(e,function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"}))},toString:c.toString,toDsl:c.toDsl}},Uo=function(u){return{extract:function(e,t,n){return o=e,r=n,i=t,a=E(u,function(e){return No(o,r,e,i)}),ve(a,{});var o,r,i,a},toString:function(){return"obj{\n"+E(u,function(e){return e.fold(function(e,t,n,o){return e+" -> "+o.toString()},function(e,t){return"state("+e+")"})}).join("\n")+"}"},toDsl:function(){return Eo.objOf(E(u,function(e){return e.fold(function(e,t,n,o){return Vo.field(e,n,o)},function(e,t){return Vo.state(e)})}))}}},Wo=function(r){return{extract:function(n,o,e){var t=E(e,function(e,t){return r.extract(n.concat(["["+t+"]"]),o,e)});return pe(t)},toString:function(){return"array("+r.toString()+")"},toDsl:function(){return Eo.arrOf(r)}}},Go=function(a,u){return{extract:function(n,o,r){var e,t,i=ae(r);return(e=n,t=i,Wo(Po(a)).extract(e,b,t)).bind(function(e){var t=E(e,function(e){return Io.field(e,e,To(),u)});return Uo(t).extract(n,o,r)})},toString:function(){return"setOf("+u.toString()+")"},toDsl:function(){return Eo.setOf(a,u)}}},Xo=U(Po(ie.value)),Yo=h(Wo,Uo),$o=Io.state,qo=Io.field,Ko=function(n,t,o,r,i){return ze(r,i).fold(function(){return e=r,t=i,Fo(n,function(){return'The chosen schema: "'+t+'" did not exist in branches: '+Ro(e)});var e,t},function(e){return Uo(e).extract(n.concat(["branch: "+i]),t,o)})},Jo=function(r,i){return{extract:function(t,n,o){return ze(o,r).fold(function(){return e=r,Fo(t,function(){return'Choice schema did not contain choice key: "'+e+'"'});var e},function(e){return Ko(t,n,o,i,e)})},toString:function(){return"chooseOn("+r+"). Possible values: "+ae(i)},toDsl:function(){return Eo.choiceOf(r,i)}}},Qo=Po(ie.value),Zo=function(t){return Po(function(e){return t(e)})},er=function(e,t,n,o){return t.extract([e],n,o).fold(function(e){return ie.error({input:o,errors:e})},ie.value)},tr=function(e,t,n){return er(e,t,U,n)},nr=function(e,t,n){return er(e,t,b,n)},or=function(e){return e.fold(function(e){throw new Error(ar(e))},b)},rr=function(e,t,n){return or(nr(e,t,n))},ir=function(e,t,n){return or(tr(e,t,n))},ar=function(e){return"Errors: \n"+(t=e.errors,n=10<t.length?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,E(n,function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()}))+"\n\nInput object: "+Ro(e.input);var t,n},ur=function(e,t){return Jo(e,t)},cr=U(Qo),sr=function(n,o){return Po(function(e){var t=typeof e;return n(e)?ie.value(e):ie.error("Expected type: "+o+" but got: "+t)})},lr=sr(O,"number"),fr=sr(y,"string"),dr=sr(C,"boolean"),mr=sr(z,"function"),gr=function(e){return qo(e,e,To(),Xo())},hr=function(e,t){return qo(e,e,To(),t)},vr=function(e){return hr(e,fr)},pr=function(e){return hr(e,mr)},br=function(e,t){return qo(e,e,To(),Uo(t))},wr=function(e,t){return qo(e,e,To(),Yo(t))},yr=function(e,t){return qo(e,e,To(),Wo(t))},xr=function(e){return qo(e,e,Mo(),Xo())},kr=function(e,t){return qo(e,e,Mo(),t)},Sr=function(e){return kr(e,fr)},Cr=function(e,t){return qo(e,e,Mo(),Uo(t))},zr=function(e,t){return qo(e,e,Mo(),jo(t))},Or=function(e,t){return qo(e,e,Oo(t),Xo())},Tr=function(e,t,n){return qo(e,e,Oo(t),n)},Mr=function(e,t){return Tr(e,t,lr)},Hr=function(e,t){return Tr(e,t,fr)},Ar=function(e,t){return Tr(e,t,dr)},Er=function(e,t){return Tr(e,t,mr)},Vr=function(e,t,n){return qo(e,e,Oo(t),Uo(n))},Dr=function(e,t){return $o(e,t)},Br=function(e){if(!He(e,"can")&&!He(e,"abort")&&!He(e,"run"))throw new Error("EventHandler defined by: "+Bo(e,null,2)+" does not have can, abort, or run!");return rr("Extracting event.handler",jo([Or("can",U(!0)),Or("abort",U(!1)),Or("run",N)]),e)},Rr=function(n){var t,o,r,i,e=(t=n,o=function(e){return e.can},function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return R(t,function(e,t){return e&&o(t).apply(undefined,n)},!0)}),a=(r=n,i=function(e){return e.abort},function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return R(r,function(e,t){return e||i(t).apply(undefined,n)},!1)});return Br({can:e,abort:a,run:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];V(n,function(e){e.run.apply(undefined,t)})}})};function Fr(e,t,n,o,r){return e(n,o)?P.some(n):z(r)&&r(n)?P.none():t(n,o,r)}var Ir,_r=function(e,t,n){for(var o=e.dom(),r=z(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=Yt.fromDom(o);if(t(i))return P.some(i);if(r(i))break}return P.none()},Lr=function(e,t){return F(e.dom().childNodes,h(t,Yt.fromDom)).map(Yt.fromDom)},Nr=function(e,o){var r=function(e){for(var t=0;t<e.childNodes.length;t++){if(o(Yt.fromDom(e.childNodes[t])))return P.some(Yt.fromDom(e.childNodes[t]));var n=r(e.childNodes[t]);if(n.isSome())return n}return P.none()};return r(e.dom())},Pr={first:function(e){return Nr(go.body(),e)},ancestor:_r,closest:function(e,t,n){return Fr(function(e){return t(e)},_r,e,t,n)},sibling:function(t,n){var e=t.dom();return e.parentNode?Lr(Yt.fromDom(e.parentNode),function(e){return!dn(t,e)&&n(e)}):P.none()},child:Lr,descendant:Nr},jr=function(e,t,n){return Pr.closest(e,function(e){return t(e).isSome()},n).bind(t)},Ur=function(e){return Te(e)},Wr=function(e,t){return{key:e,value:Br({abort:t})}},Gr=function(e){return{key:e,value:Br({run:function(e,t){t.event().prevent()}})}},Xr=function(e,t){return{key:e,value:Br({run:t})}},Yr=function(e,t,n){return{key:e,value:Br({run:function(e){t.apply(undefined,[e].concat(n))}})}},$r=function(e){return function(o){return{key:e,value:Br({run:function(e,t){var n;n=t,dn(e.element(),n.event().target())&&o(e,t)}})}}},qr=function(e,t,n){var o,r,i=t.partUids()[n];return r=i,Xr(o=e,function(e,t){e.getSystem().getByUid(r).each(function(e){lo(e,e.element(),o,t)})})},Kr=function(e,r){return Xr(e,function(t,e){var n=e.event(),o=t.getSystem().getByDom(n.target()).fold(function(){return jr(n.target(),function(e){return t.getSystem().getByDom(e).toOption()},U(!1)).getOr(t)},function(e){return e});r(t,o,e)})},Jr=function(e){return Xr(e,function(e,t){t.cut()})},Qr=function(e){return Xr(e,function(e,t){t.stop()})},Zr=function(e,t){return $r(e)(t)},ei=$r(Lt()),ti=$r(Nt()),ni=$r(It()),oi=(Ir=At(),function(e){return Xr(Ir,e)}),ri=function(e){return E(e,function(e){return o=t="/*",r=(n=e).length-t.length,""!==o&&(n.length<o.length||n.substr(r,r+o.length)!==o)?e:e.substring(0,e.length-"/*".length);var t,n,o,r})},ii=function(e,t){var n=e.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:ri(i)}},e},ai=en(["tag","uid"],["classes","attributes","styles","value","innerHtml","domChildren","defChildren"]),ui=function(e){return{uid:e.uid(),tag:e.tag(),classes:e.classes().getOr([]),attributes:e.attributes().getOr({}),styles:e.styles().getOr({}),value:e.value().getOr("<none>"),innerHtml:e.innerHtml().getOr("<none>"),defChildren:e.defChildren().fold(function(){return"<none>"},function(e){return Bo(e,null,2)}),domChildren:e.domChildren().fold(function(){return"<none>"},function(e){return 0===e.length?"0 children, but still specified":String(e.length)})}},ci=en([],["classes","attributes","styles","value","innerHtml","defChildren","domChildren"]),si=function(t,e,n){return e.fold(function(){return n.fold(function(){return{}},function(e){return Oe(t,e)})},function(e){return n.fold(function(){return Oe(t,e)},function(e){return Oe(t,e)})})},li=function(n,o,r){return ni(function(e,t){r(e,n,o)})},fi=function(r,i,a){var e,t,n,o,u,c;return e=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var o=[n].concat(e);return n.config({name:U(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+a)},function(e){var t=Array.prototype.slice.call(o,1);return i.apply(undefined,[n,e.config,e.state].concat(t))})},t=a,n=i.toString(),o=n.indexOf(")")+1,u=n.indexOf("("),c=n.substring(u+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:t,parameters:ri(c.slice(0,1).concat(c.slice(3)))}},e},di=function(e){return{key:e,value:undefined}},mi=function(n,e,o,r,t,i,a){var u=function(e){return He(e,o)?e[o]():P.none()},c=se(t,function(e,t){return fi(o,e,t)}),s=se(i,function(e,t){return ii(e,t)}),l=te(s,c,{revoke:f(di,o),config:function(e){var t=ir(o+"-config",n,e);return{key:o,value:{config:t,me:l,configAsRaw:Ze(function(){return rr(o+"-config",n,e)}),initialConfig:e,state:a}}},schema:function(){return e},exhibit:function(e,n){return u(e).bind(function(t){return ze(r,"exhibit").map(function(e){return e(n,t.config,t.state)})}).getOr(ci({}))},name:function(){return o},handlers:function(e){return u(e).bind(function(t){return ze(r,"events").map(function(e){return e(t.config,t.state)})}).getOr({})}});return l},gi=function(e,t){return hi(e,t,{validate:z,label:"function"})},hi=function(o,r,i){if(0===r.length)throw new Error("You must specify at least one required field.");return Qt("required",r),Zt(r),function(t){var n=ae(t);G(r,function(e){return M(n,e)})||Kt(r,n),o(r,n);var e=D(r,function(e){return!i.validate(t[e],e)});return 0<e.length&&function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+qt(e).join(", ")+") were not.")}(e,i.label),t}},vi=function(t,e){var n=D(e,function(e){return!M(t,e)});0<n.length&&Jt(n)},pi=N,bi=function(e){return gi(vi,e)},wi={init:function(){return yi({readState:function(){return"No State required"}})}},yi=function(e){return gi(pi,["readState"])(e),e},xi=function(e){return Te(e)},ki=jo([gr("fields"),gr("name"),Or("active",{}),Or("apis",{}),Or("state",wi),Or("extra",{})]),Si=function(e){var t,n,o,r,i,a,u,c,s=rr("Creating behaviour: "+e.name,ki,e);return t=s.fields,n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,u=jo(t),c=Cr(n,[zr("config",t)]),mi(u,c,n,o,r,i,a)},Ci=jo([gr("branchKey"),gr("branches"),gr("name"),Or("active",{}),Or("apis",{}),Or("state",wi),Or("extra",{})]),zi=function(e){var t,n,o,r,i,a,u,c,s=rr("Creating behaviour: "+e.name,Ci,e);return t=ur(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=Cr(n,[kr("config",u=t)]),mi(u,c,n,o,r,i,a)},Oi=U(undefined);function Ti(e,t,n){var o=n||!1,r=function(){t(),o=!0},i=function(){e(),o=!1};return{on:r,off:i,toggle:function(){(o?i:r)()},isOn:function(){return o}}}var Mi=function(e,t){var n=Un.get(e,t);return n===undefined||""===n?[]:n.split(" ")},Hi=Mi,Ai=function(e,t,n){var o=Mi(e,t).concat([n]);return Un.set(e,t,o.join(" ")),!0},Ei=function(e,t,n){var o=D(Mi(e,t),function(e){return e!==n});return 0<o.length?Un.set(e,t,o.join(" ")):Un.remove(e,t),!1},Vi=function(e){return Hi(e,"class")},Di=function(e,t){return Ai(e,"class",t)},Bi=function(e,t){return Ei(e,"class",t)},Ri=Vi,Fi=Di,Ii=Bi,_i=function(e,t){return M(Vi(e),t)?Bi(e,t):Di(e,t)},Li=function(e){return e.dom().classList!==undefined},Ni=function(e,t){return Li(e)&&e.dom().classList.contains(t)},Pi={add:function(e,t){Li(e)?e.dom().classList.add(t):Fi(e,t)},remove:function(e,t){var n;Li(e)?e.dom().classList.remove(t):Ii(e,t),0===(Li(n=e)?n.dom().classList:Ri(n)).length&&Un.remove(n,"class")},toggle:function(e,t){return Li(e)?e.dom().classList.toggle(t):_i(e,t)},toggler:function(e,t){var n=Li(e),o=e.dom().classList;return Ti(function(){n?o.remove(t):Ii(e,t)},function(){n?o.add(t):Fi(e,t)},Ni(e,t))},has:Ni},ji=function(e,t,n){Pi.remove(e,n),Pi.add(e,t)},Ui=Object.freeze({toAlpha:function(e,t,n){ji(e.element(),t.alpha(),t.omega())},toOmega:function(e,t,n){ji(e.element(),t.omega(),t.alpha())},isAlpha:function(e,t,n){return Pi.has(e.element(),t.alpha())},isOmega:function(e,t,n){return Pi.has(e.element(),t.omega())},clear:function(e,t,n){Pi.remove(e.element(),t.alpha()),Pi.remove(e.element(),t.omega())}}),Wi=[gr("alpha"),gr("omega")],Gi=Si({fields:Wi,name:"swapping",apis:Ui}),Xi=function(e,t,n){return Pr.closest(e,t,n).isSome()},Yi=function(e){e.dom().focus()},$i=function(e){var t=e!==undefined?e.dom():document;return P.from(t.activeElement).map(Yt.fromDom)},qi=function(e){var t=wn.owner(e).dom();return e.dom()===t.activeElement},Ki=Yi,Ji=function(e){e.dom().blur()},Qi=$i,Zi=function(t){return $i(wn.owner(t)).filter(function(e){return t.dom().contains(e.dom())})},ea=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ta=function(e){var t=document.createElement("a");t.target="_blank",t.href=e.href,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(t),t.dispatchEvent(n),document.body.removeChild(t)},na={formatChanged:U("formatChanged"),orientationChanged:U("orientationChanged"),dropupDismissed:U("dropupDismissed")},oa=Object.freeze({events:function(u){return Ur([Xr(Ht(),function(r,i){var e,t,a=u.channels(),n=ae(a),o=(e=n,(t=i).universal()?e:D(e,function(e){return M(t.channels(),e)}));V(o,function(e){var t=a[e](),n=t.schema(),o=ir("channel["+e+"] data\nReceiver: "+Xn(r.element()),n,i.data());t.onReceive()(r,o)})})])}}),ra=U([gr("menu"),gr("selectedMenu")]),ia=U([gr("item"),gr("selectedItem")]),aa=(U(jo(ia().concat(ra()))),U(jo(ia()))),ua=br("initSize",[gr("numColumns"),gr("numRows")]),ca=function(){return hr("markers",aa())},sa=function(){return br("markers",[gr("backgroundMenu")].concat(ra()).concat(ia()))},la=function(e){return br("markers",E(e,gr))},fa=function(e,t,n){return function(){var e=new Error;if(e.stack!==undefined){var t=e.stack.split("\n");F(t,function(t){return 0<t.indexOf("alloy")&&!H(Jn,function(e){return-1<t.indexOf(e)})}).getOr(Yn)}}(),qo(t,t,n,Zo(function(n){return ie.value(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(undefined,e)})}))},da=function(e){return fa(0,e,Oo(N))},ma=function(e){return fa(0,e,Oo(P.none))},ga=function(e){return fa(0,e,To())},ha=function(e){return fa(0,e,To())},va=function(e,t){return Dr(e,U(t))},pa=function(e){return Dr(e,b)},ba=U(ua),wa=[hr("channels",Go(ie.value,jo([ga("onReceive"),Or("schema",cr())])))],ya=Si({fields:wa,name:"receiving",active:oa}),xa=function(e,t){var n=Oa(e,t),o=t.aria();o.update()(e,o,n)},ka=function(e,t,n){Pi.toggle(e.element(),t.toggleClass()),xa(e,t)},Sa=function(e,t,n){Pi.add(e.element(),t.toggleClass()),xa(e,t)},Ca=function(e,t,n){Pi.remove(e.element(),t.toggleClass()),xa(e,t)},za=function(e,t,n,o){(o?Sa:Ca)(e,t,n)},Oa=function(e,t){return Pi.has(e.element(),t.toggleClass())},Ta=function(e,t,n){za(e,t,n,t.selected())},Ma=Object.freeze({onLoad:Ta,toggle:ka,isOn:Oa,on:Sa,off:Ca,set:za}),Ha=Object.freeze({exhibit:function(e,t,n){return ci({})},events:function(e,t){var n,o,r,i=(n=e,o=t,r=ka,oi(function(e){r(e,n,o)})),a=li(e,t,Ta);return Ur(j([e.toggleOnExecute()?[i]:[],[a]]))}}),Aa=function(e,t,n){Un.set(e.element(),"aria-expanded",n)},Ea=[Or("selected",!1),gr("toggleClass"),Or("toggleOnExecute",!0),Tr("aria",{mode:"none"},ur("mode",{pressed:[Or("syncWithExpanded",!1),va("update",function(e,t,n){Un.set(e.element(),"aria-pressed",n),t.syncWithExpanded()&&Aa(e,t,n)})],checked:[va("update",function(e,t,n){Un.set(e.element(),"aria-checked",n)})],expanded:[va("update",Aa)],selected:[va("update",function(e,t,n){Un.set(e.element(),"aria-selected",n)})],none:[va("update",N)]}))],Va=Si({fields:Ea,name:"toggling",active:Ha,apis:Ma}),Da=function(n,o){return ya.config({channels:Oe(na.formatChanged(),{onReceive:function(e,t){t.command===n&&o(e,t.state)}})})},Ba=function(e){return ya.config({channels:Oe(na.orientationChanged(),{onReceive:e})})},Ra=function(e,t){return{key:e,value:{onReceive:t}}},Fa="tinymce-mobile",Ia={resolve:function(e){return Fa+"-"+e},prefix:U(Fa)},_a=function(e){var t=function(e,t){t.stop(),uo(e)},n=zt.detect().deviceType.isTouch()?[Xr(Vt(),t)]:[Xr(qe(),t),Xr(_e(),function(e,t){t.cut()})];return Ur(j([e.map(function(n){return Xr(At(),function(e,t){n(e),t.stop()})}).toArray(),n]))},La=function(e,t){t.ignore()||(Ki(e.element()),t.onFocus()(e))},Na=Object.freeze({focus:La,blur:function(e,t){t.ignore()||Ji(e.element())},isFocused:function(e){return qi(e.element())}}),Pa=Object.freeze({exhibit:function(e,t){var n=t.ignore()?{}:{attributes:{tabindex:"-1"}};return ci(n)},events:function(n){return Ur([Xr(Tt(),function(e,t){La(e,n),t.stop()})].concat(n.stopMousedown()?[Xr(_e(),function(e,t){t.event().prevent()})]:[]))}}),ja=[da("onFocus"),Or("stopMousedown",!1),Or("ignore",!1)],Ua=Si({fields:ja,name:"focusing",active:Pa,apis:Na}),Wa=function(e){return e.style!==undefined},Ga=function(e,t,n){if(!y(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Wa(e)&&e.style.setProperty(t,n)},Xa=function(e,t){Wa(e)&&e.style.removeProperty(t)},Ya=function(e,t,n){var o=e.dom();Ga(o,t,n)},$a=function(e,t){return Wa(e)?e.style.getPropertyValue(t):""},qa=function(e,t){var n=e.dom(),o=$a(n,t);return P.from(o).filter(function(e){return 0<e.length})},Ka={copy:function(e,t){var n=e.dom(),o=t.dom();Wa(n)&&Wa(o)&&(o.style.cssText=n.style.cssText)},set:Ya,preserve:function(e,t){var n=Un.get(e,"style"),o=t(e);return(n===undefined?Un.remove:Un.set)(e,"style",n),o},setAll:function(e,t){var n=e.dom();ce(t,function(e,t){Ga(n,t,e)})},setOptions:function(e,t){var n=e.dom();ce(t,function(e,t){e.fold(function(){Xa(n,t)},function(e){Ga(n,t,e)})})},remove:function(e,t){var n=e.dom();Xa(n,t),Un.has(e,"style")&&""===Un.get(e,"style").replace(/^\s+|\s+$/g,"")&&Un.remove(e,"style")},get:function(e,t){var n=e.dom(),o=window.getComputedStyle(n).getPropertyValue(t),r=""!==o||go.inBody(e)?o:$a(n,t);return null===r?undefined:r},getRaw:qa,getAllRaw:function(e){var t={},n=e.dom();if(Wa(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);t[r]=n.style[r]}return t},isValidValue:function(e,t,n){var o=Yt.fromTag(e);return Ya(o,t,n),qa(o,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(o,r,e){_n.isElement(o)&&_n.isElement(r)&&V(e,function(e){var t,n;t=r,qa(o,n=e).each(function(e){qa(t,n).isNone()&&Ya(t,n,e)})})}};function Ja(o,r){var e=function(e){var t=r(e);if(t<=0||null===t){var n=Ka.get(e,o);return parseFloat(n)||0}return t},i=function(r,e){return R(e,function(e,t){var n=Ka.get(r,t),o=n===undefined?0:parseInt(n,10);return isNaN(o)?e:e+o},0)};return{set:function(e,t){if(!O(t)&&!t.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+t;var n=e.dom();Wa(n)&&(n.style[o]=t+"px")},get:e,getOuter:e,aggregate:i,max:function(e,t,n){var o=i(e,n);return o<t?t-o:0}}}var Qa=Ja("height",function(e){var t=e.dom();return go.inBody(e)?t.getBoundingClientRect().height:t.offsetHeight}),Za=function(e){return Qa.get(e)},eu=function(e){return Qa.getOuter(e)},tu=function(e,t){var n=Qa.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Ka.set(e,"max-height",n+"px")},nu=function(e,t,n){return D(wn.parents(e,n),t)},ou=function(e,t){return D(wn.siblings(e),t)},ru=function(e){return ln.all(e)},iu=function(e,t,n){return nu(e,function(e){return ln.is(e,t)},n)},au=function(e,t){return ou(e,function(e){return ln.is(e,t)})},uu=function(e,t){return ln.all(t,e)},cu=function(e,t,n){return Pr.ancestor(e,function(e){return ln.is(e,t)},n)},su=function(e){return ln.one(e)},lu=cu,fu=function(e,t){return ln.one(t,e)},du=function(e,t,n){return Fr(ln.is,cu,e,t,n)},mu=function(e,t,n){var o=Y(e.slice(0,t)),r=Y(e.slice(t+1));return F(o.concat(r),n)},gu=function(e,t,n){var o=Y(e.slice(0,t));return F(o,n)},hu=function(e,t,n){var o=e.slice(0,t),r=e.slice(t+1);return F(r.concat(o),n)},vu=function(e,t,n){var o=e.slice(t+1);return F(o,n)},pu=function(n){return function(e){var t=e.raw();return M(n,t.which)}},bu=function(e){return function(t){return G(e,function(e){return e(t)})}},wu=function(e){return!0===e.raw().shiftKey},yu=function(e){return!0===e.raw().ctrlKey},xu=k(wu),ku=function(e,t){return{matches:e,classification:t}},Su=function(e,t,n,o){var r=e+t;return o<r?n:r<n?o:r},Cu=function(e,t,n){return e<=t?t:n<=e?n:e},zu=function(t,n,e){var o=uu(t.element(),"."+n.highlightClass());V(o,function(e){Pi.remove(e,n.highlightClass()),t.getSystem().getByDom(e).each(function(e){n.onDehighlight()(t,e)})})},Ou=function(e,t,n,o){var r=Tu(e,t,n,o);zu(e,t),Pi.add(o.element(),t.highlightClass()),r||t.onHighlight()(e,o)},Tu=function(e,t,n,o){return Pi.has(o.element(),t.highlightClass())},Mu=function(e,t,n,o){var r=uu(e.element(),"."+t.itemClass());return P.from(r[o]).fold(function(){return ie.error("No element found with index "+o)},e.getSystem().getByDom)},Hu=function(t,e,n){return fu(t.element(),"."+e.itemClass()).bind(function(e){return t.getSystem().getByDom(e).toOption()})},Au=function(t,e,n){var o=uu(t.element(),"."+e.itemClass());return(0<o.length?P.some(o[o.length-1]):P.none()).bind(function(e){return t.getSystem().getByDom(e).toOption()})},Eu=function(n,t,e,o){var r=uu(n.element(),"."+t.itemClass());return I(r,function(e){return Pi.has(e,t.highlightClass())}).bind(function(e){var t=Su(e,o,0,r.length-1);return n.getSystem().getByDom(r[t]).toOption()})},Vu=function(t,e,n){var o=uu(t.element(),"."+e.itemClass());return Ee(E(o,function(e){return t.getSystem().getByDom(e).toOption()}))},Du=Object.freeze({dehighlightAll:zu,dehighlight:function(e,t,n,o){var r=Tu(e,t,n,o);Pi.remove(o.element(),t.highlightClass()),r&&t.onDehighlight()(e,o)},highlight:Ou,highlightFirst:function(t,n,o){Hu(t,n,o).each(function(e){Ou(t,n,o,e)})},highlightLast:function(t,n,o){Au(t,n,o).each(function(e){Ou(t,n,o,e)})},highlightAt:function(t,n,o,e){Mu(t,n,o,e).fold(function(e){throw new Error(e)},function(e){Ou(t,n,o,e)})},highlightBy:function(t,n,o,e){var r=Vu(t,n,o);F(r,e).each(function(e){Ou(t,n,o,e)})},isHighlighted:Tu,getHighlighted:function(t,e,n){return fu(t.element(),"."+e.highlightClass()).bind(function(e){return t.getSystem().getByDom(e).toOption()})},getFirst:Hu,getLast:Au,getPrevious:function(e,t,n){return Eu(e,t,0,-1)},getNext:function(e,t,n){return Eu(e,t,0,1)},getCandidates:Vu}),Bu=[gr("highlightClass"),gr("itemClass"),da("onHighlight"),da("onDehighlight")],Ru=Si({fields:Bu,name:"highlighting",apis:Du}),Fu=function(e,t,n){t.exists(function(t){return n.exists(function(e){return dn(e,t)})})||ao(e,jt(),{prevFocus:t,newFocus:n})},Iu=function(){var r=function(e){return Zi(e.element())};return{get:r,set:function(e,t){var n=r(e);e.getSystem().triggerFocus(t,e.element());var o=r(e);Fu(e,n,o)}}},_u=function(){var r=function(e){return Ru.getHighlighted(e).map(function(e){return e.element()})};return{get:r,set:function(t,e){var n=r(t);t.getSystem().getByDom(e).fold(N,function(e){Ru.highlight(t,e)});var o=r(t);Fu(t,n,o)}}},Lu=function(e,t,n,i,a){var u=function(t,n,e,o,r){var i,a,u=e(t,n,o,r);return(i=u,a=n.event(),F(i,function(e){return e.matches(a)}).map(function(e){return e.classification})).bind(function(e){return e(t,n,o,r)})},o={schema:function(){return e.concat([Or("focusManager",Iu()),va("handler",o),va("state",t)])},processKey:u,toEvents:function(o,r){return Ur(a.map(function(n){return Xr(Tt(),function(e,t){n(e,o,r,t),t.stop()})}).toArray().concat([Xr(Ge(),function(e,t){u(e,t,n,o,r).each(function(e){t.stop()})}),Xr(Xe(),function(e,t){u(e,t,i,o,r).each(function(e){t.stop()})})]))}};return o},Nu=function(e){var t=[xr("onEscape"),xr("onEnter"),Or("selector",'[data-alloy-tabstop="true"]'),Or("firstTabstop",0),Or("useTabstopAt",U(!0)),xr("visibilitySelector")].concat([e]),a=function(e,t){var n=e.visibilitySelector().bind(function(e){return du(t,e)}).getOr(t);return 0<Za(n)},u=function(t,e,n,o,r){return r(e,n,function(e){return a(t=o,n=e)&&t.useTabstopAt()(n);var t,n}).fold(function(){return o.cyclic()?P.some(!0):P.none()},function(e){return o.focusManager().set(t,e),P.some(!0)})},i=function(t,e,n,o){var r,i,a=uu(t.element(),n.selector());return(r=t,i=n,i.focusManager().get(r).bind(function(e){return du(e,i.selector())})).bind(function(e){return I(a,f(dn,e)).bind(function(e){return u(t,a,e,n,o)})})},n=U([ku(bu([wu,pu([9])]),function(e,t,n,o){var r=n.cyclic()?mu:gu;return i(e,0,n,r)}),ku(pu([9]),function(e,t,n,o){var r=n.cyclic()?hu:vu;return i(e,0,n,r)}),ku(pu([27]),function(t,n,e,o){return e.onEscape().bind(function(e){return e(t,n)})}),ku(bu([xu,pu([13])]),function(t,n,e,o){return e.onEnter().bind(function(e){return e(t,n)})})]),o=U([]);return Lu(t,wi.init,n,o,P.some(function(t,n){var e,o,r,i;(e=t,o=n,r=uu(e.element(),o.selector()),i=D(r,function(e){return a(o,e)}),P.from(i[o.firstTabstop()])).each(function(e){n.focusManager().set(t,e)})}))},Pu=Nu(Dr("cyclic",U(!1))),ju=Nu(Dr("cyclic",U(!0))),Uu=function(e){return"input"===_n.name(e)&&"radio"!==Un.get(e,"type")||"textarea"===_n.name(e)},Wu=function(e,t,n){return Uu(n)&&pu([32])(t.event())?P.none():(co(e,n,At()),P.some(!0))},Gu=function(e,t){return P.some(!0)},Xu=[Or("execute",Wu),Or("useSpace",!1),Or("useEnter",!0),Or("useControlEnter",!1),Or("useDown",!1)],Yu=function(e,t,n){return n.execute()(e,t,e.element())},$u=Lu(Xu,wi.init,function(e,t,n,o){var r=n.useSpace()&&!Uu(e.element())?[32]:[],i=n.useEnter()?[13]:[],a=n.useDown()?[40]:[],u=r.concat(i).concat(a);return[ku(pu(u),Yu)].concat(n.useControlEnter()?[ku(bu([yu,pu([13])]),Yu)]:[])},function(e,t,n,o){return n.useSpace()&&!Uu(e.element())?[ku(pu([32]),Gu)]:[]},P.none()),qu=function(e){var n=Ae(P.none());return yi({readState:function(){return n.get().map(function(e){return{numRows:e.numRows(),numColumns:e.numColumns()}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,t){n.set(P.some({numRows:U(e),numColumns:U(t)}))},getNumRows:function(){return n.get().map(function(e){return e.numRows()})},getNumColumns:function(){return n.get().map(function(e){return e.numColumns()})}})},Ku=Object.freeze({flatgrid:qu,init:function(e){return e.state()(e)}}),Ju=function(e){return"rtl"===Ka.get(e,"direction")?"rtl":"ltr"},Qu=function(t,n){return function(e){return"rtl"===Ju(e)?n:t}},Zu=function(i){return function(e,t,n,o){var r=i(e.element());return oc(r,e,t,n,o)}},ec=function(e,t){var n=Qu(e,t);return Zu(n)},tc=function(e,t){var n=Qu(t,e);return Zu(n)},nc=function(r){return function(e,t,n,o){return oc(r,e,t,n,o)}},oc=function(t,n,e,o,r){return o.focusManager().get(n).bind(function(e){return t(n.element(),e,o,r)}).map(function(e){return o.focusManager().set(n,e),!0})},rc=nc,ic=nc,ac=nc,uc=function(e){var t,n=e.dom();return!((t=n).offsetWidth<=0&&t.offsetHeight<=0)},cc=en(["index","candidates"],[]),sc=function(e,t,n){return lc(e,t,n,uc)},lc=function(e,t,n,o){var r,i=f(dn,t),a=uu(e,n),u=D(a,uc);return I(r=u,i).map(function(e){return cc({index:e,candidates:r})})},fc=function(e,t){return I(e,function(e){return dn(t,e)})},dc=function(n,e,o,t){return t(Math.floor(e/o),e%o).bind(function(e){var t=e.row()*o+e.column();return 0<=t&&t<n.length?P.some(n[t]):P.none()})},mc=function(r,e,i,a,u){return dc(r,e,a,function(e,t){var n=e===i-1?r.length-e*a:a,o=Su(t,u,0,n-1);return P.some({row:U(e),column:U(o)})})},gc=function(i,e,a,u,c){return dc(i,e,u,function(e,t){var n=Su(e,c,0,a-1),o=n===a-1?i.length-n*u:u,r=Cu(t,0,o-1);return P.some({row:U(n),column:U(r)})})},hc=[gr("selector"),Or("execute",Wu),ma("onEscape"),Or("captureTab",!1),ba()],vc=function(r){return function(e,t,n,o){return sc(e,t,n.selector()).bind(function(e){return r(e.candidates(),e.index(),o.getNumRows().getOr(n.initSize().numRows()),o.getNumColumns().getOr(n.initSize().numColumns()))})}},pc=function(e,t,n,o){return n.captureTab()?P.some(!0):P.none()},bc=vc(function(e,t,n,o){return mc(e,t,n,o,-1)}),wc=vc(function(e,t,n,o){return mc(e,t,n,o,1)}),yc=vc(function(e,t,n,o){return gc(e,t,n,o,-1)}),xc=vc(function(e,t,n,o){return gc(e,t,n,o,1)}),kc=U([ku(pu([37]),ec(bc,wc)),ku(pu([39]),tc(bc,wc)),ku(pu([38]),rc(yc)),ku(pu([40]),ic(xc)),ku(bu([wu,pu([9])]),pc),ku(bu([xu,pu([9])]),pc),ku(pu([27]),function(e,t,n,o){return n.onEscape()(e,t)}),ku(pu([32].concat([13])),function(t,n,o,e){return(r=t,i=o,i.focusManager().get(r).bind(function(e){return du(e,i.selector())})).bind(function(e){return o.execute()(t,n,e)});var r,i})]),Sc=U([ku(pu([32]),Gu)]),Cc=Lu(hc,qu,kc,Sc,P.some(function(t,n,e){fu(t.element(),n.selector()).each(function(e){n.focusManager().set(t,e)})})),zc=function(e,t,n,i){var a=function(e,t,n){var o,r=Su(t,i,0,n.length-1);return r===e?P.none():(o=n[r],"button"===_n.name(o)&&"disabled"===Un.get(o,"disabled")?a(e,r,n):P.from(n[r]))};return sc(e,n,t).bind(function(e){var t=e.index(),n=e.candidates();return a(t,t,n)})},Oc=[gr("selector"),Or("getInitial",P.none),Or("execute",Wu),ma("onEscape"),Or("executeOnMove",!1),Or("allowVertical",!0)],Tc=function(t,n,o){return(e=t,r=o,r.focusManager().get(e).bind(function(e){return du(e,r.selector())})).bind(function(e){return o.execute()(t,n,e)});var e,r},Mc=function(e,t,n){return zc(e,n.selector(),t,-1)},Hc=function(e,t,n){return zc(e,n.selector(),t,1)},Ac=function(o){return function(e,t,n){return o(e,t,n).bind(function(){return n.executeOnMove()?Tc(e,t,n):P.some(!0)})}},Ec=function(e,t,n,o){return n.onEscape()(e,t)},Vc=U([ku(pu([32]),Gu)]),Dc=Lu(Oc,wi.init,function(e,t,n,o){var r=[37].concat(n.allowVertical()?[38]:[]),i=[39].concat(n.allowVertical()?[40]:[]);return[ku(pu(r),Ac(ec(Mc,Hc))),ku(pu(i),Ac(tc(Mc,Hc))),ku(pu([13]),Tc),ku(pu([32]),Tc),ku(pu([27]),Ec)]},Vc,P.some(function(t,n){n.getInitial()(t).or(fu(t.element(),n.selector())).each(function(e){n.focusManager().set(t,e)})})),Bc=en(["rowIndex","columnIndex","cell"],[]),Rc=function(e,t,n){return P.from(e[t]).bind(function(e){return P.from(e[n]).map(function(e){return Bc({rowIndex:t,columnIndex:n,cell:e})})})},Fc=function(e,t,n,o){var r=e[t].length,i=Su(n,o,0,r-1);return Rc(e,t,i)},Ic=function(e,t,n,o){var r=Su(n,o,0,e.length-1),i=e[r].length,a=Cu(t,0,i-1);return Rc(e,r,a)},_c=function(e,t,n,o){var r=e[t].length,i=Cu(n+o,0,r-1);return Rc(e,t,i)},Lc=function(e,t,n,o){var r=Cu(n+o,0,e.length-1),i=e[r].length,a=Cu(t,0,i-1);return Rc(e,r,a)},Nc=[br("selectors",[gr("row"),gr("cell")]),Or("cycles",!0),Or("previousSelector",P.none),Or("execute",Wu)],Pc=function(e,t){return function(n,o,i){var a=i.cycles()?e:t;return du(o,i.selectors().row()).bind(function(e){var t=uu(e,i.selectors().cell());return fc(t,o).bind(function(o){var r=uu(n,i.selectors().row());return fc(r,e).bind(function(e){var t,n=(t=i,E(r,function(e){return uu(e,t.selectors().cell())}));return a(n,e,o).map(function(e){return e.cell()})})})})}},jc=Pc(function(e,t,n){return Fc(e,t,n,-1)},function(e,t,n){return _c(e,t,n,-1)}),Uc=Pc(function(e,t,n){return Fc(e,t,n,1)},function(e,t,n){return _c(e,t,n,1)}),Wc=Pc(function(e,t,n){return Ic(e,n,t,-1)},function(e,t,n){return Lc(e,n,t,-1)}),Gc=Pc(function(e,t,n){return Ic(e,n,t,1)},function(e,t,n){return Lc(e,n,t,1)}),Xc=U([ku(pu([37]),ec(jc,Uc)),ku(pu([39]),tc(jc,Uc)),ku(pu([38]),rc(Wc)),ku(pu([40]),ic(Gc)),ku(pu([32].concat([13])),function(t,n,o){return Zi(t.element()).bind(function(e){return o.execute()(t,n,e)})})]),Yc=U([ku(pu([32]),Gu)]),$c=Lu(Nc,wi.init,Xc,Yc,P.some(function(t,n){n.previousSelector()(t).orThunk(function(){var e=n.selectors();return fu(t.element(),e.cell())}).each(function(e){n.focusManager().set(t,e)})})),qc=[gr("selector"),Or("execute",Wu),Or("moveOnTab",!1)],Kc=function(t,n,o){return o.focusManager().get(t).bind(function(e){return o.execute()(t,n,e)})},Jc=function(e,t,n){return zc(e,n.selector(),t,-1)},Qc=function(e,t,n){return zc(e,n.selector(),t,1)},Zc=U([ku(pu([38]),ac(Jc)),ku(pu([40]),ac(Qc)),ku(bu([wu,pu([9])]),function(e,t,n){return n.moveOnTab()?ac(Jc)(e,t,n):P.none()}),ku(bu([xu,pu([9])]),function(e,t,n){return n.moveOnTab()?ac(Qc)(e,t,n):P.none()}),ku(pu([13]),Kc),ku(pu([32]),Kc)]),es=U([ku(pu([32]),Gu)]),ts=Lu(qc,wi.init,Zc,es,P.some(function(t,n){fu(t.element(),n.selector()).each(function(e){n.focusManager().set(t,e)})})),ns=[ma("onSpace"),ma("onEnter"),ma("onShiftEnter"),ma("onLeft"),ma("onRight"),ma("onTab"),ma("onShiftTab"),ma("onUp"),ma("onDown"),ma("onEscape"),Or("stopSpaceKeyup",!1),xr("focusIn")],os=Lu(ns,wi.init,function(e,t,n){return[ku(pu([32]),n.onSpace()),ku(bu([xu,pu([13])]),n.onEnter()),ku(bu([wu,pu([13])]),n.onShiftEnter()),ku(bu([wu,pu([9])]),n.onShiftTab()),ku(bu([xu,pu([9])]),n.onTab()),ku(pu([38]),n.onUp()),ku(pu([40]),n.onDown()),ku(pu([37]),n.onLeft()),ku(pu([39]),n.onRight()),ku(pu([32]),n.onSpace()),ku(pu([27]),n.onEscape())]},function(e,t,n){return n.stopSpaceKeyup()?[ku(pu([32]),Gu)]:[]},P.some(function(t,n){return n.focusIn().bind(function(e){return e(t,n)})})),rs=Pu.schema(),is=ju.schema(),as=Dc.schema(),us=Cc.schema(),cs=$c.schema(),ss=$u.schema(),ls=ts.schema(),fs=os.schema(),ds=zi({branchKey:"mode",branches:Object.freeze({acyclic:rs,cyclic:is,flow:as,flatgrid:us,matrix:cs,execution:ss,menu:ls,special:fs}),name:"keying",active:{events:function(e,t){return e.handler().toEvents(e,t)}},apis:{focusIn:function(e){e.getSystem().triggerFocus(e.element(),e.element())},setGridSize:function(e,t,n,o,r){He(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Ku}),ms=function(o,e){return Vr(o,{},E(e,function(e){return t=e.name(),n="Cannot configure "+e.name()+" for "+o,qo(t,t,Mo(),Po(function(e){return ie.error("The field: "+t+" is forbidden. "+n)}));var t,n}).concat([Dr("dump",b)]))},gs=function(e){return e.dump()},hs=ms,vs=gs,ps="placeholder",bs=me([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ws=function(e,t,n,o){return n.uiType===ps?(i=n,a=o,(r=e).exists(function(e){return e!==i.owner})?bs.single(!0,U(i)):ze(a,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+ae(a)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+Bo(i,null,2))},function(e){return e.replace()})):bs.single(!1,U(n));var r,i,a},ys=function(i,a,u,c){return ws(i,0,u,c).fold(function(e,t){var n=t(a,u.config,u.validated),o=ze(n,"components").getOr([]),r=W(o,function(e){return ys(i,a,e,c)});return[te(n,{components:r})]},function(e,t){var n=t(a,u.config,u.validated);return u.validated.preprocess.getOr(b)(n)})},xs=function(t,n,e,o){var r,i,a,u=se(o,function(e,t){return o=e,r=!1,{name:U(n=t),required:function(){return o.fold(function(e,t){return e},function(e,t){return e})},used:function(){return r},replace:function(){if(!0===r)throw new Error("Trying to use the same placeholder more than once: "+n);return r=!0,o}};var n,o,r}),c=(r=t,i=n,a=u,W(e,function(e){return ys(r,i,e,a)}));return ce(u,function(e){if(!1===e.used()&&e.required())throw new Error("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+Bo(n.components(),null,2))}),c},ks=bs.single,Ss=bs.multiple,Cs=U(ps),zs=me([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Os=Or("factory",{sketch:b}),Ts=Or("schema",[]),Ms=gr("name"),Hs=qo("pname","pname",Ho(function(e){return"<alloy."+oo(e.name)+">"}),cr()),As=Dr("schema",function(){return[xr("preprocess")]}),Es=Or("defaults",U({})),Vs=Or("overrides",U({})),Ds=Uo([Os,Ts,Ms,Hs,Es,Vs]),Bs=Uo([Os,Ts,Ms,Es,Vs]),Rs=Uo([Os,Ts,Ms,Hs,Es,Vs]),Fs=Uo([Os,As,Ms,gr("unit"),Hs,Es,Vs]),Is=function(e){return e.fold(P.some,P.none,P.some,P.some)},_s=function(e){var t=function(e){return e.name()};return e.fold(t,t,t,t)},Ls=function(n,o){return function(e){var t=ir("Converting part type",o,e);return n(t)}},Ns=Ls(zs.required,Ds),Ps=Ls(zs.external,Bs),js=Ls(zs.optional,Rs),Us=Ls(zs.group,Fs),Ws=U("entirety"),Gs=Object.freeze({required:Ns,external:Ps,optional:js,group:Us,asNamedPart:Is,name:_s,asCommon:function(e){return e.fold(b,b,b,b)},original:Ws}),Xs=function(e,t,n,o){var r=n;return te(t.defaults()(e,n,o),n,{uid:e.partUids()[t.name()]},t.overrides()(e,n,o),{"debug.sketcher":Oe("part-"+t.name(),r)})},Ys=function(r,e){var t={};return V(e,function(e){Is(e).each(function(n){var o=$s(r,n.pname());t[n.name()]=function(e){var t=rr("Part: "+n.name()+" in "+r,Uo(n.schema()),e);return te(o,{config:e,validated:t})}})}),t},$s=function(e,t){return{uiType:Cs(),owner:e,name:t}},qs=function(e,t,n){return{uiType:Cs(),owner:e,name:t,config:n,validated:{}}},Ks=function(e){return W(e,function(e){return e.fold(P.none,P.some,P.none,P.none).map(function(e){return br(e.name(),e.schema().concat([pa(Ws())]))}).toArray()})},Js=function(e){return E(e,_s)},Qs=function(e,t,n){return o=t,i={},r={},V(n,function(e){e.fold(function(o){i[o.pname()]=ks(!0,function(e,t,n){return o.factory().sketch(Xs(e,o,t,n))})},function(e){var t=o.parts()[e.name()]();r[e.name()]=U(e.factory().sketch(Xs(o,e,t[Ws()]()),t))},function(o){i[o.pname()]=ks(!1,function(e,t,n){return o.factory().sketch(Xs(e,o,t,n))})},function(r){i[r.pname()]=Ss(!0,function(t,e,n){var o=t[r.name()]();return E(o,function(e){return r.factory().sketch(te(r.defaults()(t,e),e,r.overrides()(t,e)))})})})}),{internals:U(i),externals:U(r)};var o,i,r},Zs=function(e,t,n){return xs(P.some(e),t,t.components(),n)},el=function(e,t,n){var o=t.partUids()[n];return e.getSystem().getByUid(o).toOption()},tl=function(e,t,n){return el(e,t,n).getOrDie("Could not find part: "+n)},nl=function(e,t,n){var o={},r=t.partUids(),i=e.getSystem();return V(n,function(e){o[e]=i.getByUid(r[e])}),se(o,U)},ol=function(e,t){var n=e.getSystem();return se(t.partUids(),function(e,t){return U(n.getByUid(e))})},rl=function(e){return ae(e.partUids())},il=function(e,t,n){var o={},r=t.partUids(),i=e.getSystem();return V(n,function(e){o[e]=i.getByUid(r[e]).getOrDie()}),se(o,U)},al=function(t,e){var n=Js(e);return Te(E(n,function(e){return{key:e,value:t+"-"+e}}))},ul=function(t){return qo("partUids","partUids",Ao(function(e){return al(e.uid,t)}),cr())},cl=Object.freeze({generate:Ys,generateOne:qs,schemas:Ks,names:Js,substitutes:Qs,components:Zs,defaultUids:al,defaultUidsSchema:ul,getAllParts:ol,getAllPartNames:rl,getPart:el,getPartOrDie:tl,getParts:nl,getPartsOrDie:il}),sl=oo("alloy-premade"),ll=oo("api"),fl=function(e){return Oe(sl,e)},dl=function(r){return e=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=e.config(ll);return r.apply(undefined,[o].concat([e].concat(t)))},t=r.toString(),n=t.indexOf(")")+1,o=t.indexOf("("),i=t.substring(o+1,n-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ri(i.slice(1))}},e;var e,t,n,o,i},ml=U(ll),gl=U("alloy-id-"),hl=U("data-alloy-id"),vl=gl(),pl=hl(),bl=function(e,t){Object.defineProperty(e.dom(),pl,{value:t,writable:!0})},wl=function(e){var t=_n.isElement(e)?e.dom()[pl]:null;return P.from(t)},yl=function(e){return oo(e)},xl=function(e,t,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[br("parts",i)]:[]).concat([gr("uid"),Or("dom",{}),Or("components",[]),pa("originalSpec"),Or("debug.sketcher",{})]).concat(a));return ir(e+" [SpecSchema]",jo(u.concat(t)),n)},kl=function(e,t,n,o,r){var i=Sl(r),a=Ks(n),u=ul(n),c=xl(e,t,i,a,[u]),s=Qs(0,c,n),l=Zs(e,c,s.internals());return te(o(c,l,i,s.externals()),{"debug.sketcher":Oe(e,r)})},Sl=function(e){return te({uid:yl("uid")},e)},Cl=jo([gr("name"),gr("factory"),gr("configFields"),Or("apis",{}),Or("extraApis",{})]),zl=jo([gr("name"),gr("factory"),gr("configFields"),gr("partFields"),Or("apis",{}),Or("extraApis",{})]),Ol=function(e){var u=rr("Sketcher for "+e.name,Cl,e),t=se(u.apis,dl),n=se(u.extraApis,function(e,t){return ii(e,t)});return te({name:U(u.name),partFields:U([]),configFields:U(u.configFields),sketch:function(e){return t=u.name,n=u.configFields,o=u.factory,i=Sl(r=e),a=xl(t,n,i,[],[]),te(o(a,i),{"debug.sketcher":Oe(t,r)});var t,n,o,r,i,a}},t,n)},Tl=function(e){var t=rr("Sketcher for "+e.name,zl,e),n=Ys(t.name,t.partFields),o=se(t.apis,dl),r=se(t.extraApis,function(e,t){return ii(e,t)});return te({name:U(t.name),partFields:U(t.partFields),configFields:U(t.configFields),sketch:function(e){return kl(t.name,t.configFields,t.partFields,t.factory,e)},parts:U(n)},o,r)},Ml=Ol({name:"Button",factory:function(e){var t=_a(e.action()),n=ze(e.dom(),"attributes").bind(Se("type")),o=ze(e.dom(),"tag");return{uid:e.uid(),dom:e.dom(),components:e.components(),events:t,behaviours:te(xi([Ua.config({}),ds.config({mode:"execution",useSpace:!0,useEnter:!0})]),gs(e.buttonBehaviours())),domModification:{attributes:te(n.fold(function(){return o.is("button")?{type:"button"}:{}},function(e){return{}}),{role:e.role().getOr("button")})},eventOrder:e.eventOrder()}},configFields:[Or("uid",undefined),gr("dom"),Or("components",[]),ms("buttonBehaviours",[Ua,ds]),xr("action"),xr("role"),Or("eventOrder",{})]}),Hl=Object.freeze({events:function(e){return Ur([Wr(Je(),U(!0))])},exhibit:function(e,t){return ci({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),Al=Si({fields:[],name:"unselecting",active:Hl}),El=function(e){var t,n,o,r=Yt.fromHtml(e),i=wn.children(r),a=(n=(t=r).dom().attributes!==undefined?t.dom().attributes:[],R(n,function(e,t){return"class"===t.name?e:te(e,Oe(t.name,t.value))},{})),u=(o=r,Array.prototype.slice.call(o.dom().classList,0)),c=0===i.length?{}:{innerHtml:Hn(r)};return te({tag:_n.name(r),classes:u,attributes:a},c)},Vl=function(e){var t,r,n=(t=e,r={prefix:Ia.prefix()},t.replace(/\$\{([^{}]*)\}/g,function(e,t){var n,o=r[t];return"string"==(n=typeof o)||"number"===n?o.toString():e}));return El(n)},Dl=function(e){return{dom:Vl(e)}},Bl=function(e){return xi([Va.config({toggleClass:Ia.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),Da(e,function(e,t){(t?Va.on:Va.off)(e)})])},Rl=function(e,t,n){return Ml.sketch({dom:Vl('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:t,buttonBehaviours:te(xi([Al.config({})]),n)})},Fl={forToolbar:Rl,forToolbarCommand:function(e,t){return Rl(t,function(){e.execCommand(t)},{})},forToolbarStateAction:function(e,t,n,o){var r=Bl(n);return Rl(t,o,r)},forToolbarStateCommand:function(e,t){var n=Bl(t);return Rl(t,function(){e.execCommand(t)},n)}},Il=zt.detect().deviceType.isTouch(),_l=function(e){return js({name:e+"-edge",overrides:function(o){return o.model().manager().edgeActions()[e].fold(function(){return{}},function(n){var e=Ur([Yr(Be(),n,[o])]),t=Ur([Yr(_e(),n,[o]),Yr(Le(),function(e,t){t.mouseIsDown().get()&&n(e,t)},[o])]);return{events:Il?e:t}})}})},Ll=_l("top-left"),Nl=_l("top"),Pl=_l("top-right"),jl=_l("right"),Ul=_l("bottom-right"),Wl=_l("bottom"),Gl=_l("bottom-left"),Xl=[_l("left"),jl,Nl,Wl,Ll,Pl,Gl,Ul,Ns({name:"thumb",defaults:U({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:Ur([qr(Be(),e,"spectrum"),qr(Re(),e,"spectrum"),qr(Fe(),e,"spectrum"),qr(_e(),e,"spectrum"),qr(Le(),e,"spectrum"),qr(Pe(),e,"spectrum")])}}}),Ns({schema:[Dr("mouseIsDown",function(){return Ae(!1)})],name:"spectrum",overrides:function(n){var o=n.model().manager(),r=function(t,e){return o.getValueFromEvent(e).map(function(e){return o.setValueFrom(t,n,e)})},e=Ur([Xr(Be(),r),Xr(Re(),r)]),t=Ur([Xr(_e(),r),Xr(Le(),function(e,t){n.mouseIsDown().get()&&r(e,t)})]);return{behaviours:xi(Il?[]:[ds.config({mode:"special",onLeft:function(e){return o.onLeft(e,n)},onRight:function(e){return o.onRight(e,n)},onUp:function(e){return o.onUp(e,n)},onDown:function(e){return o.onDown(e,n)}}),Ua.config({})]),events:Il?e:t}}})],Yl=function(e,t,n){t.store().manager().onLoad(e,t,n)},$l=function(e,t,n){t.store().manager().onUnload(e,t,n)},ql=Object.freeze({onLoad:Yl,onUnload:$l,setValue:function(e,t,n,o){t.store().manager().setValue(e,t,n,o)},getValue:function(e,t,n){return t.store().manager().getValue(e,t,n)},getState:function(e,t,n){return n}}),Kl=Object.freeze({events:function(n,o){var e=n.resetOnDom()?[ei(function(e,t){Yl(e,n,o)}),ti(function(e,t){$l(e,n,o)})]:[li(n,o,Yl)];return Ur(e)}}),Jl=function(){var e=Ae(null);return yi({set:e.set,get:e.get,isNotSet:function(){return null===e.get()},clear:function(){e.set(null)},readState:function(){return{mode:"memory",value:e.get()}}})},Ql=function(){var i=Ae({}),a=Ae({});return yi({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:a.get()}},lookup:function(e){return ze(i.get(),e).orThunk(function(){return ze(a.get(),e)})},update:function(e){var t=i.get(),n=a.get(),o={},r={};V(e,function(t){o[t.value]=t,ze(t,"meta").each(function(e){ze(e,"text").each(function(e){r[e]=t})})}),i.set(te(t,o)),a.set(te(n,r))},clear:function(){i.set({}),a.set({})}})},Zl=Object.freeze({memory:Jl,dataset:Ql,manual:function(){return yi({readState:function(){}})},init:function(e){return e.store().manager().state(e)}}),ef=function(e,t,n,o){var r=t.store();n.update([o]),r.setValue()(e,o),t.onSetValue()(e,o)},tf=[xr("initialValue"),gr("getFallbackEntry"),gr("getDataKey"),gr("setValue"),va("manager",{setValue:ef,getValue:function(e,t,n){var o=t.store(),r=o.getDataKey()(e);return n.lookup(r).fold(function(){return o.getFallbackEntry()(r)},function(e){return e})},onLoad:function(t,n,o){n.store().initialValue().each(function(e){ef(t,n,o,e)})},onUnload:function(e,t,n){n.clear()},state:Ql})],nf=[gr("getValue"),Or("setValue",N),xr("initialValue"),va("manager",{setValue:function(e,t,n,o){t.store().setValue()(e,o),t.onSetValue()(e,o)},getValue:function(e,t,n){return t.store().getValue()(e)},onLoad:function(t,n,e){n.store().initialValue().each(function(e){n.store().setValue()(t,e)})},onUnload:N,state:wi.init})],of=[xr("initialValue"),va("manager",{setValue:function(e,t,n,o){n.set(o),t.onSetValue()(e,o)},getValue:function(e,t,n){return n.get()},onLoad:function(e,t,n){t.store().initialValue().each(function(e){n.isNotSet()&&n.set(e)})},onUnload:function(e,t,n){n.clear()},state:Jl})],rf=[Tr("store",{mode:"memory"},ur("mode",{memory:of,manual:nf,dataset:tf})),da("onSetValue"),Or("resetOnDom",!1)],af=Si({fields:rf,name:"representing",active:Kl,apis:ql,extra:{setValueFrom:function(e,t){var n=af.getValue(t);af.setValue(e,n)}},state:Zl}),uf=function(n,o){return{left:U(n),top:U(o),translate:function(e,t){return uf(n+e,o+t)}}},cf=uf,sf=zt.detect().deviceType.isTouch(),lf=U("slider.change.value"),ff=function(e){var t=e.event().raw();if(sf){var n=t;return n.touches!==undefined&&1===n.touches.length?P.some(n.touches[0]).map(function(e){return cf(e.clientX,e.clientY)}):P.none()}var o=t;return o.clientX!==undefined?P.some(o).map(function(e){return cf(e.clientX,e.clientY)}):P.none()},df=function(e,t,n,o){return e<t?e:n<e?n:e===t?t-1:Math.max(t,e-o)},mf=function(e,t,n,o){return n<e?e:e<t?t:e===n?n+1:Math.min(n,e+o)},gf=function(e,t,n){return Math.max(t,Math.min(n,e))},hf=function(e){var t=e.min,n=e.max,o=e.range,r=e.value,i=e.step,a=e.snap,u=e.snapStart,c=e.rounded,s=e.hasMinEdge,l=e.hasMaxEdge,f=e.minBound,d=e.maxBound,m=e.screenRange,g=s?t-1:t,h=l?n+1:n;if(r<f)return g;if(d<r)return h;var v,p,b,w,y,x,k,S=(y=r,x=f,k=d,Math.min(k,Math.max(y,x))-x),C=gf(S/m*o+t,g,h);return a&&t<=C&&C<=n?(v=C,p=t,b=n,w=i,u.fold(function(){var e=v-p,t=Math.round(e/w)*w;return gf(p+t,p-1,b+1)},function(e){var t=(v-e)%w,n=Math.round(t/w),o=Math.floor((v-e)/w),r=Math.floor((b-e)/w),i=e+Math.min(r,o+n)*w;return Math.max(e,i)})):c?Math.round(C):C},vf=function(e){var t=e.min,n=e.max,o=e.range,r=e.value,i=e.hasMinEdge,a=e.hasMaxEdge,u=e.maxBound,c=e.maxOffset,s=e.centerMinEdge,l=e.centerMaxEdge;return r<t?i?0:s:n<r?a?u:l:(r-t)/o*c},pf=Ja("width",function(e){return e.dom().offsetWidth}),bf=function(e,t){pf.set(e,t)},wf=function(e){return pf.get(e)},yf=function(e){return pf.getOuter(e)},xf=function(e){return e.model().minX()},kf=function(e){return e.model().minY()},Sf=function(e){return e.model().minX()-1},Cf=function(e){return e.model().minY()-1},zf=function(e){return e.model().maxX()},Of=function(e){return e.model().maxY()},Tf=function(e){return e.model().maxX()+1},Mf=function(e){return e.model().maxY()+1},Hf=function(e,t,n){return t(e)-n(e)},Af=function(e){return Hf(e,zf,xf)},Ef=function(e){return Hf(e,Of,kf)},Vf=function(e){return Af(e)/2},Df=function(e){return Ef(e)/2},Bf=function(e){return e.stepSize()},Rf=function(e){return e.snapToGrid()},Ff=function(e){return e.snapStart()},If=function(e){return e.rounded()},_f=function(e,t){return e[t+"-edge"]!==undefined},Lf=function(e){return _f(e,"left")},Nf=function(e){return _f(e,"right")},Pf=function(e){return _f(e,"top")},jf=function(e){return _f(e,"bottom")},Uf=function(e){return e.model().value().get()},Wf=function(e){return{x:U(e)}},Gf=function(e){return{y:U(e)}},Xf=function(e,t){return{x:U(e),y:U(t)}},Yf=function(e,t){ao(e,lf(),{value:t})},$f="left",qf=function(e){return e.element().dom().getBoundingClientRect()},Kf=function(e,t){return e[t]},Jf=function(e){var t=qf(e);return Kf(t,$f)},Qf=function(e){var t=qf(e);return Kf(t,"right")},Zf=function(e){var t=qf(e);return Kf(t,"top")},ed=function(e){var t=qf(e);return Kf(t,"bottom")},td=function(e){var t=qf(e);return Kf(t,"width")},nd=function(e){var t=qf(e);return Kf(t,"height")},od=function(e,t,n){return(e+t)/2-n},rd=function(e,t){var n=qf(e),o=qf(t),r=Kf(n,$f),i=Kf(n,"right"),a=Kf(o,$f);return od(r,i,a)},id=function(e,t){var n=qf(e),o=qf(t),r=Kf(n,"top"),i=Kf(n,"bottom"),a=Kf(o,"top");return od(r,i,a)},ad=function(e,t){ao(e,lf(),{value:t})},ud=function(e){return{x:U(e)}},cd=function(e,t,n){var o={min:xf(t),max:zf(t),range:Af(t),value:n,step:Bf(t),snap:Rf(t),snapStart:Ff(t),rounded:If(t),hasMinEdge:Lf(t),hasMaxEdge:Nf(t),minBound:Jf(e),maxBound:Qf(e),screenRange:td(e)};return hf(o)},sd=function(a){return function(e,t){return(n=a,o=e,r=t,i=(0<n?mf:df)(Uf(r).x(),xf(r),zf(r),Bf(r)),ad(o,ud(i)),P.some(i)).map(function(){return!0});var n,o,r,i}},ld=function(e,t,n,o,r,i){var a,u,c,s,l,f,d,m,g,h=(u=i,c=n,s=o,l=r,f=td(a=t),d=s.bind(function(e){return P.some(rd(e,a))}).getOr(0),m=l.bind(function(e){return P.some(rd(e,a))}).getOr(f),g={min:xf(u),max:zf(u),range:Af(u),value:c,hasMinEdge:Lf(u),hasMaxEdge:Nf(u),minBound:Jf(a),minOffset:0,maxBound:Qf(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},vf(g));return Jf(t)-Jf(e)+h},fd=sd(-1),dd=sd(1),md=P.none,gd=P.none,hd=U({"top-left":P.none(),top:P.none(),"top-right":P.none(),right:P.some(function(e,t){Yf(e,Wf(Tf(t)))}),"bottom-right":P.none(),bottom:P.none(),"bottom-left":P.none(),left:P.some(function(e,t){Yf(e,Wf(Sf(t)))})}),vd=Object.freeze({setValueFrom:function(e,t,n){var o=cd(e,t,n),r=ud(o);return ad(e,r),o},setToMin:function(e,t){var n=xf(t);ad(e,ud(n))},setToMax:function(e,t){var n=zf(t);ad(e,ud(n))},findValueOfOffset:cd,getValueFromEvent:function(e){return ff(e).map(function(e){return e.left()})},findPositionOfValue:ld,setPositionFromValue:function(e,t,n,o){var r=Uf(n),i=ld(e,o.getSpectrum(e),r.x(),o.getLeftEdge(e),o.getRightEdge(e),n),a=wf(t.element())/2;Ka.set(t.element(),"left",i-a+"px")},onLeft:fd,onRight:dd,onUp:md,onDown:gd,edgeActions:hd}),pd=function(e,t){ao(e,lf(),{value:t})},bd=function(e){return{y:U(e)}},wd=function(e,t,n){var o={min:kf(t),max:Of(t),range:Ef(t),value:n,step:Bf(t),snap:Rf(t),snapStart:Ff(t),rounded:If(t),hasMinEdge:Pf(t),hasMaxEdge:jf(t),minBound:Zf(e),maxBound:ed(e),screenRange:nd(e)};return hf(o)},yd=function(a){return function(e,t){return(n=a,o=e,r=t,i=(0<n?mf:df)(Uf(r).y(),kf(r),Of(r),Bf(r)),pd(o,bd(i)),P.some(i)).map(function(){return!0});var n,o,r,i}},xd=function(e,t,n,o,r,i){var a,u,c,s,l,f,d,m,g,h=(u=i,c=n,s=o,l=r,f=nd(a=t),d=s.bind(function(e){return P.some(id(e,a))}).getOr(0),m=l.bind(function(e){return P.some(id(e,a))}).getOr(f),g={min:kf(u),max:Of(u),range:Ef(u),value:c,hasMinEdge:Pf(u),hasMaxEdge:jf(u),minBound:Zf(a),minOffset:0,maxBound:ed(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},vf(g));return Zf(t)-Zf(e)+h},kd=P.none,Sd=P.none,Cd=yd(-1),zd=yd(1),Od=U({"top-left":P.none(),top:P.some(function(e,t){Yf(e,Gf(Cf(t)))}),"top-right":P.none(),right:P.none(),"bottom-right":P.none(),bottom:P.some(function(e,t){Yf(e,Gf(Mf(t)))}),"bottom-left":P.none(),left:P.none()}),Td=Object.freeze({setValueFrom:function(e,t,n){var o=wd(e,t,n),r=bd(o);return pd(e,r),o},setToMin:function(e,t){var n=kf(t);pd(e,bd(n))},setToMax:function(e,t){var n=Of(t);pd(e,bd(n))},findValueOfOffset:wd,getValueFromEvent:function(e){return ff(e).map(function(e){return e.top()})},findPositionOfValue:xd,setPositionFromValue:function(e,t,n,o){var r=Uf(n),i=xd(e,o.getSpectrum(e),r.y(),o.getTopEdge(e),o.getBottomEdge(e),n),a=Za(t.element())/2;Ka.set(t.element(),"top",i-a+"px")},onLeft:kd,onRight:Sd,onUp:Cd,onDown:zd,edgeActions:Od}),Md=function(e,t){ao(e,lf(),{value:t})},Hd=function(e,t){return{x:U(e),y:U(t)}},Ad=function(s,l){return function(e,t){return(n=s,o=l,r=e,i=t,a=0<n?mf:df,u=o?Uf(i).x():a(Uf(i).x(),xf(i),zf(i),Bf(i)),c=o?a(Uf(i).y(),kf(i),Of(i),Bf(i)):Uf(i).y(),Md(r,Hd(u,c)),P.some(u)).map(function(){return!0});var n,o,r,i,a,u,c}},Ed=Ad(-1,!1),Vd=Ad(1,!1),Dd=Ad(-1,!0),Bd=Ad(1,!0),Rd=U({"top-left":P.some(function(e,t){Yf(e,Xf(Sf(t),Cf(t)))}),top:P.some(function(e,t){Yf(e,Xf(Vf(t),Cf(t)))}),"top-right":P.some(function(e,t){Yf(e,Xf(Tf(t),Cf(t)))}),right:P.some(function(e,t){Yf(e,Xf(Tf(t),Df(t)))}),"bottom-right":P.some(function(e,t){Yf(e,Xf(Tf(t),Mf(t)))}),bottom:P.some(function(e,t){Yf(e,Xf(Vf(t),Mf(t)))}),"bottom-left":P.some(function(e,t){Yf(e,Xf(Sf(t),Mf(t)))}),left:P.some(function(e,t){Yf(e,Xf(Sf(t),Df(t)))})}),Fd=Object.freeze({setValueFrom:function(e,t,n){var o=cd(e,t,n.left()),r=wd(e,t,n.top()),i=Hd(o,r);return Md(e,i),i},setToMin:function(e,t){var n=xf(t),o=kf(t);Md(e,Hd(n,o))},setToMax:function(e,t){var n=zf(t),o=Of(t);Md(e,Hd(n,o))},getValueFromEvent:function(e){return ff(e)},setPositionFromValue:function(e,t,n,o){var r=Uf(n),i=ld(e,o.getSpectrum(e),r.x(),o.getLeftEdge(e),o.getRightEdge(e),n),a=xd(e,o.getSpectrum(e),r.y(),o.getTopEdge(e),o.getBottomEdge(e),n),u=wf(t.element())/2,c=Za(t.element())/2;Ka.set(t.element(),"left",i-u+"px"),Ka.set(t.element(),"top",a-c+"px")},onLeft:Ed,onRight:Vd,onUp:Dd,onDown:Bd,edgeActions:Rd}),Id=zt.detect().deviceType.isTouch(),_d=[Or("stepSize",1),Or("onChange",N),Or("onChoose",N),Or("onInit",N),Or("onDragStart",N),Or("onDragEnd",N),Or("snapToGrid",!1),Or("rounded",!0),xr("snapStart"),hr("model",ur("mode",{x:[Or("minX",0),Or("maxX",100),Dr("value",function(e){return Ae(e.mode.minX)}),gr("getInitialValue"),va("manager",vd)],y:[Or("minY",0),Or("maxY",100),Dr("value",function(e){return Ae(e.mode.minY)}),gr("getInitialValue"),va("manager",Td)],xy:[Or("minX",0),Or("maxX",100),Or("minY",0),Or("maxY",100),Dr("value",function(e){return Ae({x:U(e.mode.minX),y:U(e.mode.minY)})}),gr("getInitialValue"),va("manager",Fd)]})),ms("sliderBehaviours",[ds,af])].concat(Id?[]:[Dr("mouseIsDown",function(){return Ae(!1)})]),Ld=zt.detect().deviceType.isTouch(),Nd=Tl({name:"Slider",configFields:_d,partFields:Xl,factory:function(i,e,t,n){var a=function(e){return tl(e,i,"thumb")},u=function(e){return tl(e,i,"spectrum")},o=function(e){return el(e,i,"left-edge")},r=function(e){return el(e,i,"right-edge")},c=function(e){return el(e,i,"top-edge")},s=function(e){return el(e,i,"bottom-edge")},l=i.model(),f=l.manager(),d=function(e,t){f.setPositionFromValue(e,t,i,{getLeftEdge:o,getRightEdge:r,getTopEdge:c,getBottomEdge:s,getSpectrum:u})},m=function(e,t){l.value().set(t);var n=a(e);return d(e,n),i.onChange()(e,n,t),P.some(!0)},g=[Xr(Be(),function(e,t){i.onDragStart()(e,a(e))}),Xr(Fe(),function(e,t){i.onDragEnd()(e,a(e))})],h=[Xr(_e(),function(e,t){t.stop(),i.onDragStart()(e,a(e)),i.mouseIsDown().set(!0)}),Xr(Pe(),function(e,t){i.onDragEnd()(e,a(e))})],v=Ld?g:h;return{uid:i.uid(),dom:i.dom(),components:e,behaviours:te(xi(j([Ld?[]:[ds.config({mode:"special",focusIn:function(e){return el(e,i,"spectrum").map(ds.focusIn).map(U(!0))}})],[af.config({store:{mode:"manual",getValue:function(e){return l.value().get()}}}),ya.config({channels:{"mouse.released":{onReceive:function(n,e){var t=i.mouseIsDown().get();i.mouseIsDown().set(!1),t&&el(n,i,"thumb").each(function(e){var t=l.value().get();i.onChoose()(n,e,t)})}}}})]])),gs(i.sliderBehaviours())),events:Ur([Xr(lf(),function(e,t){m(e,t.event().value())}),ei(function(e,t){var n=l.getInitialValue();l.value().set(n());var o=a(e);d(e,o);var r=u(e);i.onInit()(e,o,r,l.value().get())})].concat(v)),apis:{resetToMin:function(e){f.setToMin(e,i)},resetToMax:function(e){f.setToMax(e,i)},changeValue:m,refresh:d},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),Pd=function(t,n,o){return Fl.forToolbar(n,function(){var e=o();t.setContextToolbar([{label:n+" group",items:e}])},{})},jd=function(e){return[(r=e,i=function(e){return e<0?"black":360<e?"white":"hsl("+e+", 100%, 50%)"},Nd.sketch({dom:Vl('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[Nd.parts()["left-edge"](Dl('<div class="${prefix}-hue-slider-black"></div>')),Nd.parts().spectrum({dom:Vl('<div class="${prefix}-slider-gradient-container"></div>'),components:[Dl('<div class="${prefix}-slider-gradient"></div>')],behaviours:xi([Va.config({toggleClass:Ia.resolve("thumb-active")})])}),Nd.parts()["right-edge"](Dl('<div class="${prefix}-hue-slider-white"></div>')),Nd.parts().thumb({dom:Vl('<div class="${prefix}-slider-thumb"></div>'),behaviours:xi([Va.config({toggleClass:Ia.resolve("thumb-active")})])})],onChange:function(e,t,n){var o=i(n.x());Ka.set(t.element(),"background-color",o),r.onChange(e,t,o)},onDragStart:function(e,t){Va.on(t)},onDragEnd:function(e,t){Va.off(t)},onInit:function(e,t,n,o){var r=i(o.x());Ka.set(t.element(),"background-color",r)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:function(){return r.getInitialValue()}}}},sliderBehaviours:xi([Ba(Nd.refresh)])}))];var r,i},Ud=function(e,o){var t={onChange:function(e,t,n){o.undoManager.transact(function(){o.formatter.apply("forecolor",{value:n}),o.nodeChanged()})},getInitialValue:function(){return-1}};return Pd(e,"color",function(){return jd(t)})},Wd=jo([gr("getInitialValue"),gr("onChange"),gr("category"),gr("sizes")]),Gd=function(e){var i=rr("SizeSlider",Wd,e);return Nd.sketch({dom:{tag:"div",classes:[Ia.resolve("slider-"+i.category+"-size-container"),Ia.resolve("slider"),Ia.resolve("slider-size-container")]},onChange:function(e,t,n){var o,r=n.x();0<=(o=r)&&o<i.sizes.length&&i.onChange(r)},onDragStart:function(e,t){Va.on(t)},onDragEnd:function(e,t){Va.off(t)},model:{mode:"x",minX:0,maxX:i.sizes.length-1,getInitialValue:function(){return{x:function(){return i.getInitialValue()}}}},stepSize:1,snapToGrid:!0,sliderBehaviours:xi([Ba(Nd.refresh)]),components:[Nd.parts().spectrum({dom:Vl('<div class="${prefix}-slider-size-container"></div>'),components:[Dl('<div class="${prefix}-slider-size-line"></div>')]}),Nd.parts().thumb({dom:Vl('<div class="${prefix}-slider-thumb"></div>'),behaviours:xi([Va.config({toggleClass:Ia.resolve("thumb-active")})])})]})},Xd=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],Yd=function(e){var t,n,o=e.selection.getStart(),r=Yt.fromDom(o),i=Yt.fromDom(e.getBody()),a=(t=function(e){return dn(i,e)},n=r,(_n.isElement(n)?P.some(n):wn.parent(n)).map(function(e){return Pr.closest(e,function(e){return Ka.getRaw(e,"font-size").isSome()},t).bind(function(e){return Ka.getRaw(e,"font-size")}).getOrThunk(function(){return Ka.get(e,"font-size")})}).getOr(""));return F(Xd,function(e){return a===e}).getOr("medium")},$d={candidates:U(Xd),get:function(e){var t,n=Yd(e);return(t=n,I(Xd,function(e){return e===t})).getOr(2)},apply:function(o,e){var t;(t=e,P.from(Xd[t])).each(function(e){var t,n;n=e,Yd(t=o)!==n&&t.execCommand("fontSize",!1,n)})}},qd=$d.candidates(),Kd=function(e){return[Dl('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),(t=e,Gd({onChange:t.onChange,sizes:qd,category:"font",getInitialValue:t.getInitialValue})),Dl('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')];var t},Jd=function(e){var t=function n(e){return e.uid!==undefined}(e)&&He(e,"uid")?e.uid:yl("memento");return{get:function(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function(e){return e.getSystem().getByUid(t).fold(P.none,P.some)},asSpec:function(){return te(e,{uid:t})}}};function Qd(e,t){return em(document.createElement("canvas"),e,t)}function Zd(e){return e.getContext("2d")}function em(e,t,n){return e.width=t,e.height=n,e}var tm={create:Qd,clone:function tD(e){var t;return Zd(t=Qd(e.width,e.height)).drawImage(e,0,0),t},resize:em,get2dContext:Zd,get3dContext:function nD(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(n){}return t||(t=null),t}},nm={getWidth:function oD(e){return e.naturalWidth||e.width},getHeight:function rD(e){return e.naturalHeight||e.height}},om=window.Promise?window.Promise:function(){var e=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,o(r,this),o(a,this))},t=e.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function o(e,t){return function(){e.apply(t,arguments)}}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(o){var r=this;null!==this._state?t(function(){var e=r._state?o.onFulfilled:o.onRejected;if(null!==e){var t;try{t=e(r._value)}catch(n){return void o.reject(n)}o.resolve(t)}else(r._state?o.resolve:o.reject)(r._value)}):this._deferreds.push(o)}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void s(o(t,e),o(r,this),o(a,this))}this._state=!0,this._value=e,u.call(this)}catch(n){a.call(this,n)}}function a(e){this._state=!1,this._value=e,u.call(this)}function u(){for(var e=0,t=this._deferreds.length;e<t;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=o}function s(e,t,n){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,n(e))})}catch(r){if(o)return;o=!0,n(r)}}return e.prototype["catch"]=function(e){return this.then(null,e)},e.prototype.then=function(n,o){var r=this;return new e(function(e,t){i.call(r,new c(n,o,e,t))})},e.all=function(){var c=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new e(function(r,i){if(0===c.length)return r([]);var a=c.length;function u(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){u(t,e)},i)}c[t]=e,0==--a&&r(c)}catch(o){i(o)}}for(var e=0;e<c.length;e++)u(e,c[e])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(n){return new e(function(e,t){t(n)})},e.race=function(r){return new e(function(e,t){for(var n=0,o=r.length;n<o;n++)r[n].then(e,t)})},e}();function rm(){return new(rn.getOrDie("FileReader"))}var im={atob:function(e){return rn.getOrDie("atob")(e)},requestAnimationFrame:function(e){rn.getOrDie("requestAnimationFrame")(e)}};function am(u){return new om(function(e,t){var n=URL.createObjectURL(u),o=new Image,r=function(){o.removeEventListener("load",i),o.removeEventListener("error",a)};function i(){r(),e(o)}function a(){r(),t("Unable to load data of type "+u.type+": "+n)}o.addEventListener("load",i),o.addEventListener("error",a),o.src=n,o.complete&&i()})}function um(o){return new om(function(e,n){var t=new XMLHttpRequest;t.open("GET",o,!0),t.responseType="blob",t.onload=function(){200==this.status&&e(this.response)},t.onerror=function(){var e,t=this;n(0===this.status?((e=new Error("No access to download image")).code=18,e.name="SecurityError",e):new Error("Error "+t.status+" downloading image"))},t.send()})}function cm(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return P.none();for(var o,r=n[1],i=t[1],a=im.atob(i),u=a.length,c=Math.ceil(u/1024),s=new Array(c),l=0;l<c;++l){for(var f=1024*l,d=Math.min(f+1024,u),m=new Array(d-f),g=f,h=0;g<d;++h,++g)m[h]=a[g].charCodeAt(0);s[l]=(o=m,new(rn.getOrDie("Uint8Array"))(o))}return P.some(function v(e,t){return new(rn.getOrDie("Blob"))(e,t)}(s,{type:r}))}function sm(n){return new om(function(e,t){cm(n).fold(function(){t("uri is not base64: "+n)},e)})}function lm(n){return new om(function(e){var t=new rm;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})}var fm,dm,mm={blobToImage:am,imageToBlob:function iD(e){var t=e.src;return 0===t.indexOf("data:")?sm(t):um(t)},blobToArrayBuffer:function aD(n){return new om(function(e){var t=new rm;t.onloadend=function(){e(t.result)},t.readAsArrayBuffer(n)})},blobToDataUri:lm,blobToBase64:function uD(e){return lm(e).then(function(e){return e.split(",")[1]})},dataUriToBlobSync:cm,canvasToBlob:function cD(e,n,o){return n=n||"image/png",HTMLCanvasElement.prototype.toBlob?new om(function(t){e.toBlob(function(e){t(e)},n,o)}):sm(e.toDataURL(n,o))},canvasToDataURL:function sD(e,t,n){return t=t||"image/png",e.then(function(e){return e.toDataURL(t,n)})},blobToCanvas:function lD(e){return am(e).then(function(e){var t;return function n(e){URL.revokeObjectURL(e.src)}(e),t=tm.create(nm.getWidth(e),nm.getHeight(e)),tm.get2dContext(t).drawImage(e,0,0),t})},uriToBlob:function fD(e){return 0===e.indexOf("blob:")?um(e):0===e.indexOf("data:")?sm(e):null}},gm=function(e){return mm.blobToBase64(e)},hm=function(a){var t=Jd({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:Ur([Jr(qe()),Xr($e(),function(e,t){var n,o,r;(n=t,o=n.event(),r=o.raw().target.files||o.raw().dataTransfer.files,P.from(r[0])).each(function(e){var r,i;r=a,gm(i=e).then(function(o){r.undoManager.transact(function(){var e=r.editorUpload.blobCache,t=e.create(oo("mceu"),i,o);e.add(t);var n=r.dom.createHTML("img",{src:t.blobUri()});r.insertContent(n)})})})})])});return Ml.sketch({dom:Vl('<span class="${prefix}-toolbar-button ${prefix}-icon-image ${prefix}-icon"></span>'),components:[t.asSpec()],action:function(e){t.get(e).element().dom().click()}})},vm=function(e){return e.dom().textContent},pm=function(e,t){e.dom().textContent=t},bm=function(e){return 0<e.length},wm=function(e){return e===undefined||null===e?"":e},ym=function(t,n,e){return e.text.toOption().filter(bm).fold(function(){return Un.get(e=t,"href")===vm(e)?P.some(n):P.none();var e},P.some)},xm=function(e){var t=Yt.fromDom(e.selection.getStart());return du(t,"a")},km={getInfo:function(e){return xm(e).fold(function(){return{url:"",text:e.selection.getContent({format:"text"}),title:"",target:"",link:P.none()}},function(e){return n=vm(t=e),o=Un.get(t,"href"),r=Un.get(t,"title"),i=Un.get(t,"target"),{url:wm(o),text:n!==o?wm(n):"",title:wm(r),target:wm(i),link:P.some(t)};var t,n,o,r,i})},applyInfo:function(r,i){i.url.toOption().filter(bm).fold(function(){var t;t=r,i.link.bind(b).each(function(e){t.execCommand("unlink")})},function(n){var e,t,o=(e=i,(t={}).href=n,e.title.toOption().filter(bm).each(function(e){t.title=e}),e.target.toOption().filter(bm).each(function(e){t.target=e}),t);i.link.bind(b).fold(function(){var e=i.text.toOption().filter(bm).getOr(n);r.insertContent(r.dom.createHTML("a",o,r.dom.encode(e)))},function(t){var e=ym(t,n,i);Un.setAll(t,o),e.each(function(e){pm(t,e)})})})},query:xm},Sm=zt.detect(),Cm=function(e,t){var n=t.selection.getRng();e(),t.selection.setRng(n)},zm=function(e,t){(Sm.os.isAndroid()?Cm:u)(t,e)},Om=function(e,t){var n,o;return{key:e,value:{config:{},me:(n=e,o=Ur(t),Si({fields:[gr("enabled")],name:n,active:{events:U(o)}})),configAsRaw:U({}),initialConfig:{},state:wi}}},Tm=Object.freeze({getCurrent:function(e,t,n){return t.find()(e)}}),Mm=[gr("find")],Hm=Si({fields:Mm,name:"composing",apis:Tm}),Am=Ol({name:"Container",factory:function(e){return{uid:e.uid(),dom:te({tag:"div",attributes:{role:"presentation"}},e.dom()),components:e.components(),behaviours:gs(e.containerBehaviours()),events:e.events(),domModification:e.domModification(),eventOrder:e.eventOrder()}},configFields:[Or("components",[]),ms("containerBehaviours",[]),Or("events",{}),Or("domModification",{}),Or("eventOrder",{})]}),Em=Ol({name:"DataField",factory:function(n){return{uid:n.uid(),dom:n.dom(),behaviours:te(xi([af.config({store:{mode:"memory",initialValue:n.getInitialValue()()}}),Hm.config({find:P.some})]),gs(n.dataBehaviours())),events:Ur([ei(function(e,t){af.setValue(e,n.getInitialValue()())})])}},configFields:[gr("uid"),gr("dom"),gr("getInitialValue"),ms("dataBehaviours",[af,Hm])]}),Vm=function(e,t){if(t===undefined)throw new Error("Value.set was undefined");e.dom().value=t},Dm=function(e){return e.dom().value},Bm=U([xr("data"),Or("inputAttributes",{}),Or("inputStyles",{}),Or("tag","input"),Or("inputClasses",[]),da("onSetValue"),Or("styles",{}),Or("eventOrder",{}),ms("inputBehaviours",[af,Ua]),Or("selectOnFocus",!0)]),Rm=function(e){return xi([Ua.config({onFocus:!1===e.selectOnFocus()?N:function(e){var t=e.element(),n=Dm(t);t.dom().setSelectionRange(0,n.length)}})])},Fm=function(e){return{tag:e.tag(),attributes:te({type:"input"},e.inputAttributes()),styles:e.inputStyles(),classes:e.inputClasses()}},Im=Ol({name:"Input",configFields:Bm(),factory:function(e,t){return{uid:e.uid(),dom:Fm(e),components:[],behaviours:(n=e,te(xi([af.config({store:{mode:"manual",initialValue:n.data().getOr(undefined),getValue:function(e){return Dm(e.element())},setValue:function(e,t){Dm(e.element())!==t&&Vm(e.element(),t)}},onSetValue:n.onSetValue()})]),Rm(n),gs(n.inputBehaviours()))),eventOrder:e.eventOrder()};var n}}),_m=Object.freeze({exhibit:function(e,t){return ci({attributes:Te([{key:t.tabAttr(),value:"true"}])})}}),Lm=[Or("tabAttr","data-alloy-tabstop")],Nm=Si({fields:Lm,name:"tabstopping",active:_m}),Pm=function(e,t){var n=Jd(Im.sketch({inputAttributes:{placeholder:t},onSetValue:function(e,t){io(e,Ye())},inputBehaviours:xi([Hm.config({find:P.some}),Nm.config({}),ds.config({mode:"execution"})]),selectOnFocus:!1})),o=Jd(Ml.sketch({dom:Vl('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(e){var t=n.get(e);af.setValue(t,"")}}));return{name:e,spec:Am.sketch({dom:Vl('<div class="${prefix}-input-container"></div>'),components:[n.asSpec(),o.asSpec()],containerBehaviours:xi([Va.config({toggleClass:Ia.resolve("input-container-empty")}),Hm.config({find:function(e){return P.some(n.get(e))}}),Om("input-clearing",[Xr(Ye(),function(e){var t=n.get(e);(0<af.getValue(t).length?Va.off:Va.on)(e)})])])})}},jm=["input","button","textarea"],Um=function(e,t,n){t.disabled()&&qm(e,t,n)},Wm=function(e){return M(jm,_n.name(e.element()))},Gm=function(e){Un.set(e.element(),"disabled","disabled")},Xm=function(e){Un.remove(e.element(),"disabled")},Ym=function(e){Un.set(e.element(),"aria-disabled","true")},$m=function(e){Un.set(e.element(),"aria-disabled","false")},qm=function(t,e,n){e.disableClass().each(function(e){Pi.add(t.element(),e)}),(Wm(t)?Gm:Ym)(t)},Km=function(e){return Wm(e)?Un.has(e.element(),"disabled"):"true"===Un.get(e.element(),"aria-disabled")},Jm=Object.freeze({enable:function(t,e,n){e.disableClass().each(function(e){Pi.remove(t.element(),e)}),(Wm(t)?Xm:$m)(t)},disable:qm,isDisabled:Km,onLoad:Um}),Qm=Object.freeze({exhibit:function(e,t,n){return ci({classes:t.disabled()?t.disableClass().map(q).getOr([]):[]})},events:function(e,t){return Ur([Wr(At(),function(e,t){return Km(e)}),li(e,t,Um)])}}),Zm=[Or("disabled",!1),xr("disableClass")],eg=Si({fields:Zm,name:"disabling",active:Qm,apis:Jm}),tg=[ms("formBehaviours",[af])],ng=function(e){return"<alloy.field."+e+">"},og=function(o,e,t){return te({"debug.sketcher":{Form:t},uid:o.uid(),dom:o.dom(),components:e,behaviours:te(xi([af.config({store:{mode:"manual",getValue:function(e){var t=ol(e,o);return se(t,function(e,t){return e().bind(function(e){var t,n=Hm.getCurrent(e);return t="missing current",n.fold(function(){return ie.error(t)},ie.value)}).map(af.getValue)})},setValue:function(n,e){ce(e,function(t,e){el(n,o,e).each(function(e){Hm.getCurrent(e).each(function(e){af.setValue(e,t)})})})}}})]),gs(o.formBehaviours())),apis:{getField:function(e,t){return el(e,o,t).bind(Hm.getCurrent)}}})},rg={getField:dl(function(e,t,n){return e.getField(t,n)}),sketch:function(e){var n,t=(n=[],{field:function(e,t){return n.push(e),qs("form",ng(e),t)},record:function(){return n}}),o=e(t),r=t.record(),i=E(r,function(e){return Ns({name:e,pname:ng(e)})});return kl("form",tg,i,og,o)}},ig=function(){var t=Ae(P.none()),n=function(){t.get().each(function(e){e.destroy()})};return{clear:function(){n(),t.set(P.none())},isSet:function(){return t.get().isSome()},set:function(e){n(),t.set(P.some(e))},run:function(e){t.get().each(e)}}},ag=function(){var t=Ae(P.none());return{clear:function(){t.set(P.none())},set:function(e){t.set(P.some(e))},isSet:function(){return t.get().isSome()},on:function(e){t.get().each(e)}}},ug=function(e){return{xValue:e,points:[]}},cg=function(e,t){if(t===e.xValue)return e;var n=0<t-e.xValue?1:-1,o={direction:n,xValue:t};return{xValue:t,points:(0===e.points.length?[]:e.points[e.points.length-1].direction===n?e.points.slice(0,e.points.length-1):e.points).concat([o])}},sg=function(e){if(0===e.points.length)return 0;var t=e.points[0].direction,n=e.points[e.points.length-1].direction;return-1===t&&-1===n?-1:1===t&&1===n?1:0},lg=function(e){var o="navigateEvent",t=Uo([gr("fields"),Or("maxFieldIndex",e.fields.length-1),gr("onExecute"),gr("getInitialValue"),Dr("state",function(){return{dialogSwipeState:ag(),currentScreen:Ae(0)}})]),a=rr("SerialisedDialog",t,e),r=function(t,e,n){return Ml.sketch({dom:Vl('<span class="${prefix}-icon-'+e+' ${prefix}-icon"></span>'),action:function(e){ao(e,o,{direction:t})},buttonBehaviours:xi([eg.config({disableClass:Ia.resolve("toolbar-navigation-disabled"),disabled:!n})])})},i=function(e,r){var i=uu(e.element(),"."+Ia.resolve("serialised-dialog-screen"));fu(e.element(),"."+Ia.resolve("serialised-dialog-chain")).each(function(o){0<=a.state.currentScreen.get()+r&&a.state.currentScreen.get()+r<i.length&&(Ka.getRaw(o,"left").each(function(e){var t=parseInt(e,10),n=wf(i[0]);Ka.set(o,"left",t-r*n+"px")}),a.state.currentScreen.set(a.state.currentScreen.get()+r))})},u=function(o){var e=uu(o.element(),"input");P.from(e[a.state.currentScreen.get()]).each(function(e){o.getSystem().getByDom(e).each(function(e){var t,n;t=o,n=e.element(),t.getSystem().triggerFocus(n,t.element())})});var t=s.get(o);Ru.highlightAt(t,a.state.currentScreen.get())},c=Jd(rg.sketch(function(n){return{dom:Vl('<div class="${prefix}-serialised-dialog"></div>'),components:[Am.sketch({dom:Vl('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:E(a.fields,function(e,t){return t<=a.maxFieldIndex?Am.sketch({dom:Vl('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[r(-1,"previous",0<t),n.field(e.name,e.spec),r(1,"next",t<a.maxFieldIndex)]}):n.field(e.name,e.spec)})})],formBehaviours:xi([Ba(function(e,t){var n;n=t,fu(e.element(),"."+Ia.resolve("serialised-dialog-chain")).each(function(e){Ka.set(e,"left",-a.state.currentScreen.get()*n.width+"px")})}),ds.config({mode:"special",focusIn:function(e){u(e)},onTab:function(e){return i(e,1),P.some(!0)},onShiftTab:function(e){return i(e,-1),P.some(!0)}}),Om("form-events",[ei(function(t,e){a.state.currentScreen.set(0),a.state.dialogSwipeState.clear();var n=s.get(t);Ru.highlightFirst(n),a.getInitialValue(t).each(function(e){af.setValue(t,e)})}),oi(a.onExecute),Xr(Ke(),function(e,t){"left"===t.event().raw().propertyName&&u(e)}),Xr(o,function(e,t){var n=t.event().direction();i(e,n)})])])}})),s=Jd({dom:Vl('<div class="${prefix}-dot-container"></div>'),behaviours:xi([Ru.config({highlightClass:Ia.resolve("dot-active"),itemClass:Ia.resolve("dot-item")})]),components:W(a.fields,function(e,t){return t<=a.maxFieldIndex?[Dl('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})});return{dom:Vl('<div class="${prefix}-serializer-wrapper"></div>'),components:[c.asSpec(),s.asSpec()],behaviours:xi([ds.config({mode:"special",focusIn:function(e){var t=c.get(e);ds.focusIn(t)}}),Om("serializer-wrapper-events",[Xr(Be(),function(e,t){var n=t.event();a.state.dialogSwipeState.set(ug(n.raw().touches[0].clientX))}),Xr(Re(),function(e,t){var n=t.event();a.state.dialogSwipeState.on(function(e){t.event().prevent(),a.state.dialogSwipeState.set(cg(e,n.raw().touches[0].clientX))})}),Xr(Fe(),function(o){a.state.dialogSwipeState.on(function(e){var t=c.get(o),n=-1*sg(e);i(t,n)})})])])}},fg=Ze(function(n,o){return[{label:"the link group",items:[lg({fields:[Pm("url","Type or paste URL"),Pm("text","Link text"),Pm("title","Link title"),Pm("target","Link target"),(e="link",{name:e,spec:Em.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return P.none()}})})],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return P.some(km.getInfo(o))},onExecute:function(e){var t=af.getValue(e);km.applyInfo(o,t),n.restoreToolbar(),o.focus()}})]}];var e}),dg=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],mg=Ur([(fm=Tt(),dm=function(e,t){var n,o,r=t.event().originator(),i=t.event().target();return o=i,!(dn(n=r,e.element())&&!dn(n,o)&&(console.warn(Tt()+" did not get interpreted by the desired target. \nOriginator: "+Xn(r)+"\nTarget: "+Xn(i)+"\nCheck the "+Tt()+" event handlers"),1))},{key:fm,value:Br({can:dm})})]),gg=Object.freeze({events:mg}),hg=b,vg=bi(["debugInfo","triggerFocus","triggerEvent","triggerEscape","addToWorld","removeFromWorld","addToGui","removeFromGui","build","getByUid","getByDom","broadcast","broadcastOn","isConnected"]),pg=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+"\n"+Xn(t().element())+" is not in context.")}};return vg({debugInfo:U("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),isConnected:U(!1)})},bg=function(e,r){var i={};return ce(e,function(e,o){ce(e,function(e,t){var n=Ce(t,[])(i);i[t]=n.concat([r(o,e)])})}),i},wg=function(e,t){return 1<e.length?ie.error('Multiple behaviours have tried to change DOM "'+t+'". The guilty behaviours are: '+Bo(E(e,function(e){return e.name()}))+". At this stage, this is not supported. Future releases might provide strategies for resolving this."):0===e.length?ie.value({}):ie.value(e[0].modification().fold(function(){return{}},function(e){return Oe(t,e)}))},yg=function(a,u){return R(a,function(e,t){var n=t.modification().getOr({});return e.bind(function(i){var e=fe(n,function(e,t){return i[t]!==undefined?(n=u,o=t,r=a,ie.error("Mulitple behaviours have tried to change the _"+o+'_ "'+n+'". The guilty behaviours are: '+Bo(W(r,function(e){return e.modification().getOr({})[o]!==undefined?[e.name()]:[]}),null,2)+". This is not currently supported.")):ie.value(Oe(t,e));var n,o,r});return Me(e,i)})},ie.value({})).map(function(e){return Oe(u,e)})},xg={classes:function(e,t){var n=W(e,function(e){return e.modification().getOr([])});return ie.value(Oe(t,n))},attributes:yg,styles:yg,domChildren:wg,defChildren:wg,innerHtml:wg,value:wg},kg=function(e,t){return n=f.apply(undefined,[e.handler].concat(t)),o=e.purpose(),{cHandler:n,purpose:U(o)};var n,o},Sg=function(e){return e.cHandler},Cg=function(e,t){return{name:U(e),handler:U(t)}},zg=function(e,t,n){var o,r,i=te(n,(o=e,r={},V(t,function(e){r[e.name()]=e.handlers(o)}),r));return bg(i,Cg)},Og=function(e){var t,i=z(t=e)?{can:U(!0),abort:U(!1),run:t}:t;return function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=[e,t].concat(n);i.abort.apply(undefined,r)?t.stop():i.can.apply(undefined,r)&&i.run.apply(undefined,r)}},Tg=function(e,t,n){var o,r,i=t[n];return i?function(a,u,e,c){var t=e.slice(0);try{var n=t.sort(function(e,t){var n=e[u](),o=t[u](),r=c.indexOf(n),i=c.indexOf(o);if(-1===r)throw new Error("The ordering for "+a+" does not have an entry for "+n+".\nOrder specified: "+Bo(c,null,2));if(-1===i)throw new Error("The ordering for "+a+" does not have an entry for "+o+".\nOrder specified: "+Bo(c,null,2));return r<i?-1:i<r?1:0});return ie.value(n)}catch(o){return ie.error([o])}}("Event: "+n,"name",e,i).map(function(e){var t=E(e,function(e){return e.handler()});return Rr(t)}):(o=n,r=e,ie.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+Bo(E(r,function(e){return e.name()}),null,2)]))},Mg=function(e,i){var t=fe(e,function(o,r){return(1===o.length?ie.value(o[0].handler()):Tg(o,i,r)).map(function(e){var t=Og(e),n=1<o.length?D(i,function(t){return M(o,function(e){return e.name()===t})}).join(" > "):o[0].name();return Oe(r,{handler:t,purpose:U(n)})})});return Me(t,{})},Hg=function(e){return tr("custom.definition",jo([qo("dom","dom",To(),jo([gr("tag"),Or("styles",{}),Or("classes",[]),Or("attributes",{}),xr("value"),xr("innerHtml")])),gr("components"),gr("uid"),Or("events",{}),Or("apis",U({})),qo("eventOrder","eventOrder",(t={"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"],mousedown:["focusing","alloy.base.behaviour","item-type-events"]},zo.mergeWithThunk(U(t))),cr()),xr("domModification"),pa("originalSpec"),Or("debug.sketcher","unknown")]),e);var t},Ag=function(t,e){V(e,function(e){Pi.add(t,e)})},Eg=function(t,e){V(e,function(e){Pi.remove(t,e)})},Vg=function(t){if(t.domChildren().isSome()&&t.defChildren().isSome())throw new Error("Cannot specify children and child specs! Must be one or the other.\nDef: "+(e=ui(t),Bo(e,null,2)));return t.domChildren().fold(function(){var e=t.defChildren().getOr([]);return E(e,Bg)},function(e){return e});var e},Dg=function(e){var t=Yt.fromTag(e.tag());Un.setAll(t,e.attributes().getOr({})),Ag(t,e.classes().getOr([])),Ka.setAll(t,e.styles().getOr({})),An(t,e.innerHtml().getOr(""));var n=Vg(e);return zn(t,n),e.value().each(function(e){Vm(t,e)}),bl(t,e.uid()),t},Bg=function(e){var t=ai(e);return Dg(t)},Rg=function(e,t){return n=e,r=E(o=t,function(e){return Cr(e.name(),[gr("config"),Or("state",wi)])}),i=tr("component.behaviours",Uo(r),n.behaviours).fold(function(e){throw new Error(ar(e)+"\nComplete spec:\n"+Bo(n,null,2))},function(e){return e}),{list:o,data:se(i,function(e){var t=e().map(function(e){return{config:e.config(),state:e.state().init(e.config())}});return function(){return t}})};var n,o,r,i},Fg=function(e){var t,n,o=(t=ze(e,"behaviours").getOr({}),n=D(ae(t),function(e){return t[e]!==undefined}),E(n,function(e){return t[e].me}));return Rg(e,o)},Ig=bi(["getSystem","config","hasConfigured","spec","connect","disconnect","element","syncComponents","readState","components","events"]),_g=function(e,t,n){var o,r,i,a,u,c,s=(r={uid:(o=e).uid(),tag:o.dom().tag(),classes:o.dom().classes(),attributes:o.dom().attributes(),styles:o.dom().styles(),domChildren:E(o.components(),function(e){return e.element()})},ai(te(r,o.dom().innerHtml().map(function(e){return Oe("innerHtml",e)}).getOr({}),o.dom().value().map(function(e){return Oe("value",e)}).getOr({})))),l=function(t,e,n,o){var r=te({},e);V(n,function(e){r[e.name()]=e.exhibit(t,o)});var i=bg(r,function(e,t){return{name:function(){return e},modification:t}}),a=se(i,function(e,t){return W(e,function(t){return t.modification().fold(function(){return[]},function(e){return[t]})})}),u=fe(a,function(t,n){return ze(xg,n).fold(function(){return ie.error("Unknown field type: "+n)},function(e){return e(t,n)})});return Me(u,{}).map(ci)}(n,{"alloy.base.modification":(i=e,i.domModification().fold(function(){return ci({})},ci))},t,s).getOrDie();return u=l,c=te({uid:(a=s).uid(),tag:a.tag(),classes:u.classes().getOr([]).concat(a.classes().getOr([])),attributes:ne(a.attributes().getOr({}),u.attributes().getOr({})),styles:ne(a.styles().getOr({}),u.styles().getOr({}))},u.innerHtml().or(a.innerHtml()).map(function(e){return Oe("innerHtml",e)}).getOr({}),si("domChildren",u.domChildren(),a.domChildren()),si("defChildren",u.defChildren(),a.defChildren()),u.value().or(a.value()).map(function(e){return Oe("value",e)}).getOr({})),ai(c)},Lg=function(e,t,n){var o,r,i,a,u,c,s={"alloy.base.behaviour":(o=e,o.events())};return(r=n,i=e.eventOrder(),a=t,u=s,c=zg(r,a,u),Mg(c,i)).getOrDie()},Ng=function(e){var t,n,o,r,i,a,u,c,s,l,f,d,m,g,h=hg(e),v=(t=h,n=Ce("components",[])(t),E(n,Ug)),p=te(gg,h,Oe("components",v));return ie.value((o=p,i=Ae(pg(r=function(){return g})),a=or(Hg(te(o,{behaviours:undefined}))),u=Fg(o),c=u.list,s=u.data,l=_g(a,c,s),f=Dg(l),d=Lg(a,c,s),m=Ae(a.components()),g=Ig({getSystem:i.get,config:function(e){if(e===ml())return a.apis();if(y(e))throw new Error("Invalid input: only API constant is allowed");var t=s;return(z(t[e.name()])?t[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+Bo(o,null,2))})()},hasConfigured:function(e){return z(s[e.name()])},spec:U(o),readState:function(e){return s[e]().map(function(e){return e.state.readState()}).getOr("not enabled")},connect:function(e){i.set(e)},disconnect:function(){i.set(pg(r))},element:U(f),syncComponents:function(){var e=wn.children(f),t=W(e,function(e){return i.get().getByDom(e).fold(function(){return[]},function(e){return[e]})});m.set(t)},components:m.get,events:U(d)})))},Pg=function(e){var t=Yt.fromText(e);return jg({element:t})},jg=function(e){var t=ir("external.component",jo([gr("element"),xr("uid")]),e),n=Ae(pg());t.uid().each(function(e){bl(t.element(),e)});var o=Ig({getSystem:n.get,config:P.none,hasConfigured:U(!1),connect:function(e){n.set(e)},disconnect:function(){n.set(pg(function(){return o}))},element:U(t.element()),spec:U(e),readState:U("No state"),syncComponents:N,components:U([]),events:U({})});return fl(o)},Ug=function(t){return(e=t,ze(e,sl)).fold(function(){var e=te({uid:yl("")},t);return Ng(e).getOrDie()},function(e){return e});var e},Wg=fl,Gg="alloy.item-hover",Xg="alloy.item-focus",Yg=function(e){(Zi(e.element()).isNone()||Ua.isFocused(e))&&(Ua.isFocused(e)||Ua.focus(e),ao(e,Gg,{item:e}))},$g=function(e){ao(e,Xg,{item:e})},qg=U(Gg),Kg=U(Xg),Jg=[gr("data"),gr("components"),gr("dom"),xr("toggling"),hs("itemBehaviours",[Va,Ua,ds,af]),Or("ignoreFocus",!1),Or("domModification",{}),va("builder",function(e){return{dom:te(e.dom(),{attributes:{role:e.toggling().isSome()?"menuitemcheckbox":"menuitem"}}),behaviours:te(xi([e.toggling().fold(Va.revoke,function(e){return Va.config(te({aria:{mode:"checked"}},e))}),Ua.config({ignore:e.ignoreFocus(),stopMousedown:e.ignoreFocus(),onFocus:function(e){$g(e)}}),ds.config({mode:"execution"}),af.config({store:{mode:"memory",initialValue:e.data()}}),Om("item-type-events",[Xr(Dt(),uo),Jr(_e()),Xr(je(),Yg),Xr(Et(),Ua.focus)])]),vs(e.itemBehaviours())),components:e.components(),domModification:e.domModification(),eventOrder:e.eventOrder()}}),Or("eventOrder",{})],Qg=[gr("dom"),gr("components"),va("builder",function(e){return{dom:e.dom(),components:e.components(),events:Ur([Qr(Et())])}})],Zg=U([Ns({name:"widget",overrides:function(t){return{behaviours:xi([af.config({store:{mode:"manual",getValue:function(e){return t.data()},setValue:function(){}}})])}}})]),eh=[gr("uid"),gr("data"),gr("components"),gr("dom"),Or("autofocus",!1),Or("ignoreFocus",!1),hs("widgetBehaviours",[af,Ua,ds]),Or("domModification",{}),ul(Zg()),va("builder",function(n){var e=Qs(0,n,Zg()),t=Zs("item-widget",n,e.internals()),o=function(e){return el(e,n,"widget").map(function(e){return ds.focusIn(e),e})},r=function(e,t){return Uu(t.event().target())||n.autofocus()&&t.setSource(e.element()),P.none()};return te({dom:n.dom(),components:t,domModification:n.domModification(),events:Ur([oi(function(e,t){o(e).each(function(e){t.stop()})}),Xr(je(),Yg),Xr(Et(),function(e,t){n.autofocus()?o(e):Ua.focus(e)})]),behaviours:te(xi([af.config({store:{mode:"memory",initialValue:n.data()}}),Ua.config({ignore:n.ignoreFocus(),onFocus:function(e){$g(e)}}),ds.config({mode:"special",focusIn:n.autofocus()?function(e){o(e)}:Oi(),onLeft:r,onRight:r,onEscape:function(e,t){return Ua.isFocused(e)||n.autofocus()?(n.autofocus()&&t.setSource(e.element()),P.none()):(Ua.focus(e),P.some(!0))}})]),vs(n.widgetBehaviours()))})})],th=ur("type",{widget:eh,item:Jg,separator:Qg}),nh=U([Us({factory:{sketch:function(e){var t=ir("menu.spec item",th,e);return t.builder()(t)}},name:"items",unit:"item",defaults:function(e,t){var n=yl("");return te({uid:n},t)},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus(),domModification:{classes:[e.markers().item()]}}}})]),oh=U([gr("value"),gr("items"),gr("dom"),gr("components"),Or("eventOrder",{}),ms("menuBehaviours",[Ru,af,Hm,ds]),Tr("movement",{mode:"menu",moveOnTab:!0},ur("mode",{grid:[ba(),va("config",function(e,t){return{mode:"flatgrid",selector:"."+e.markers().item(),initSize:{numColumns:t.initSize().numColumns(),numRows:t.initSize().numRows()},focusManager:e.focusManager()}})],matrix:[va("config",function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector(),cell:"."+e.markers().item()},focusManager:e.focusManager()}}),gr("rowSelector")],menu:[Or("moveOnTab",!0),va("config",function(e,t){return{mode:"menu",selector:"."+e.markers().item(),moveOnTab:t.moveOnTab(),focusManager:e.focusManager()}})]})),ca(),Or("fakeFocus",!1),Or("focusManager",Iu()),da("onHighlight")]),rh=U("alloy.menu-focus"),ih=Tl({name:"Menu",configFields:oh(),partFields:nh(),factory:function(e,t,n,o){return te({dom:te(e.dom(),{attributes:{role:"menu"}}),uid:e.uid(),behaviours:te(xi([Ru.config({highlightClass:e.markers().selectedItem(),itemClass:e.markers().item(),onHighlight:e.onHighlight()}),af.config({store:{mode:"memory",initialValue:e.value()}}),Hm.config({find:P.some}),ds.config(e.movement().config()(e,e.movement()))]),gs(e.menuBehaviours())),events:Ur([Xr(Kg(),function(t,n){var e=n.event();t.getSystem().getByDom(e.target()).each(function(e){Ru.highlight(t,e),n.stop(),ao(t,rh(),{menu:t,item:e})})}),Xr(qg(),function(e,t){var n=t.event().item();Ru.highlight(e,n)})]),components:t,eventOrder:e.eventOrder()})}}),ah=function(e,t,n,o){var r=e.getSystem().build(o);bo(e,r,n)},uh=function(e,t,n,o){var r=ch(e,t);F(r,function(e){return dn(o.element(),e.element())}).each(yo)},ch=function(e,t){return e.components()},sh=function(t,n,e,o,r){var i=ch(t,n);return P.from(i[o]).map(function(e){return uh(t,n,0,e),r.each(function(e){ah(t,0,function(e,t){Sn.appendAt(e,t,o)},e)}),e})},lh=Object.freeze({append:function(e,t,n,o){ah(e,0,Sn.append,o)},prepend:function(e,t,n,o){ah(e,0,Sn.prepend,o)},remove:uh,replaceAt:sh,replaceBy:function(t,n,e,o,r){var i=ch(t,n);return I(i,o).bind(function(e){return sh(t,n,0,e,r)})},set:function(t,e,n,o){var r,i,a,u;xo(t),r=function(){var e=E(o,t.getSystem().build);V(e,function(e){po(t,e)})},i=t.element(),a=wn.owner(i),u=Qi(a).bind(function(t){var e=function(e){return dn(t,e)};return e(i)?P.some(i):Pr.descendant(i,e)}),r(i),u.each(function(t){Qi(a).filter(function(e){return dn(e,t)}).fold(function(){Ki(t)},N)})},contents:ch}),fh=Si({fields:[],name:"replacing",apis:lh}),dh=function(n,o,r,e){return ze(r,e).bind(function(e){return ze(n,e).bind(function(e){var t=dh(n,o,r,e);return P.some([e].concat(t))})}).getOr([])},mh=function(e,t){var n={};ce(e,function(e,t){V(e,function(e){n[e]=t})});var o=t,r=le(t,function(e,t){return{k:e,v:t}}),i=se(r,function(e,t){return[t].concat(dh(n,o,r,t))});return se(n,function(e){return ze(i,e).getOr([e])})},gh=function(){var i=Ae({}),a=Ae({}),u=Ae({}),c=Ae(P.none()),s=Ae({}),e=function(e){return ze(a.get(),e)};return{setContents:function(e,t,n,o){c.set(P.some(e)),i.set(n),a.set(t),s.set(o);var r=mh(o,n);u.set(r)},expand:function(n){return ze(i.get(),n).map(function(e){var t=ze(u.get(),n).getOr([]);return[e].concat(t)})},refresh:function(e){return ze(u.get(),e)},collapse:function(e){return ze(u.get(),e).bind(function(e){return 1<e.length?P.some(e.slice(1)):P.none()})},lookupMenu:e,otherMenus:function(e){var t=s.get();return $(ae(t),e)},getPrimary:function(){return c.get().bind(e)},getMenus:function(){return a.get()},clear:function(){i.set({}),a.set({}),u.set({}),c.set(P.none())},isClear:function(){return c.get().isNone()}}},hh=U("collapse-item"),vh=Ol({name:"TieredMenu",configFields:[ha("onExecute"),ha("onEscape"),ga("onOpenMenu"),ga("onOpenSubmenu"),da("onCollapseMenu"),Or("highlightImmediately",!0),br("data",[gr("primary"),gr("menus"),gr("expansions")]),Or("fakeFocus",!1),da("onHighlight"),da("onHover"),sa(),gr("dom"),Or("navigateOnHover",!0),Or("stayInDom",!1),ms("tmenuBehaviours",[ds,Ru,Hm,fh]),Or("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)}},factory:function(i,a){var u,e,c=gh(),n=function(e){var o,t,n=(o=e,t=i.data().menus(),se(t,function(e,t){var n=ih.sketch(te(e,{value:t,items:e.items,markers:xe(a.markers,["item","selectedItem"]),fakeFocus:i.fakeFocus(),onHighlight:i.onHighlight(),focusManager:i.fakeFocus()?_u():Iu()}));return o.getSystem().build(n)})),r=l(e);return c.setContents(i.data().primary(),n,i.data().expansions(),r),c.getPrimary()},s=function(e){return af.getValue(e).value},l=function(e){return se(i.data().menus(),function(e,t){return W(e.items,function(e){return"separator"===e.type?[]:[e.data.value]})})},f=function(t,e){Ru.highlight(t,e),Ru.getHighlighted(e).orThunk(function(){return Ru.getFirst(e)}).each(function(e){co(t,e.element(),Et())})},d=function(e,t){return Ee(E(t,e.lookupMenu))},m=function(t,e,n){var o=d(e,e.otherMenus(n));V(o,function(e){Eg(e.element(),[i.markers().backgroundMenu()]),i.stayInDom()||fh.remove(t,e)})},g=function(n,o,r){return P.from(r[0]).bind(o.lookupMenu).map(function(e){var t=d(o,r.slice(1));return V(t,function(e){Pi.add(e.element(),i.markers().backgroundMenu())}),go.inBody(e.element())||fh.append(n,Wg(e)),Eg(e.element(),[i.markers().backgroundMenu()]),f(n,e),m(n,o,r),e})};(e=u||(u={}))[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent";var h=function(n,o,r){void 0===r&&(r=u.HighlightSubmenu);var e=s(o);return c.expand(e).bind(function(t){return P.from(t[0]).bind(c.lookupMenu).bind(function(e){return go.inBody(e.element())||fh.append(n,Wg(e)),i.onOpenSubmenu()(n,o,e),r===u.HighlightSubmenu?(Ru.highlightFirst(e),g(n,c,t)):(Ru.dehighlightAll(e),P.some(o))})})},o=function(t,n){var e=s(n);return c.collapse(e).bind(function(e){return g(t,c,e).map(function(e){return i.onCollapseMenu()(t,n,e),e})})},t=function(n){return function(t,e){return du(e.getSource(),"."+i.markers().item()).bind(function(e){return t.getSystem().getByDom(e).toOption().bind(function(e){return n(t,e).map(function(){return!0})})})}},r=Ur([Xr(rh(),function(t,e){var n=e.event().menu();Ru.highlight(t,n);var o=s(e.event().item());c.refresh(o).each(function(e){return m(t,c,e)})}),oi(function(t,e){var n=e.event().target();t.getSystem().getByDom(n).each(function(e){0===s(e).indexOf("collapse-item")&&o(t,e),h(t,e,u.HighlightSubmenu).fold(function(){i.onExecute()(t,e)},function(){})})}),ei(function(t,e){n(t).each(function(e){fh.append(t,Wg(e)),i.onOpenMenu()(t,e),i.highlightImmediately()&&f(t,e)})})].concat(i.navigateOnHover()?[Xr(qg(),function(e,t){var n,o,r=t.event().item();n=e,o=s(r),c.refresh(o).bind(function(e){return g(n,c,e)}),h(e,r,u.HighlightParent),i.onHover()(e,r)})]:[])),v={collapseMenu:function(t){Ru.getHighlighted(t).each(function(e){Ru.getHighlighted(e).each(function(e){o(t,e)})})},highlightPrimary:function(t){c.getPrimary().each(function(e){f(t,e)})}};return{uid:i.uid(),dom:i.dom(),behaviours:te(xi([ds.config({mode:"special",onRight:t(function(e,t){return Uu(t.element())?P.none():h(e,t,u.HighlightSubmenu)}),onLeft:t(function(e,t){return Uu(t.element())?P.none():o(e,t)}),onEscape:t(function(e,t){return o(e,t).orThunk(function(){return i.onEscape()(e,t).map(function(){return e})})}),focusIn:function(t,e){c.getPrimary().each(function(e){co(t,e.element(),Et())})}}),Ru.config({highlightClass:i.markers().selectedMenu(),itemClass:i.markers().menu()}),Hm.config({find:function(e){return Ru.getHighlighted(e)}}),fh.config({})]),gs(i.tmenuBehaviours())),eventOrder:i.eventOrder(),apis:v,events:r}},extraApis:{tieredData:function(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function(e,t){return{primary:e,menus:Oe(e,t),expansions:{}}},collapseItem:function(e){return{value:oo(hh()),meta:{text:e}}}}}),ph=function(e,t,n,o){return ze(t.routes(),o.start()).map(u).bind(function(e){return ze(e,o.destination()).map(u)})},bh=function(e,t,n,o){return ph(0,t,0,o).bind(function(t){return t.transition().map(function(e){return{transition:U(e),route:U(t)}})})},wh=function(n,o,e){var t,r,i;(t=n,r=o,i=e,yh(t,r,i).bind(function(e){return bh(t,r,i,e)})).each(function(e){var t=e.transition();Pi.remove(n.element(),t.transitionClass()),Un.remove(n.element(),o.destinationAttr())})},yh=function(e,t,n){var o=e.element();return Un.has(o,t.destinationAttr())?P.some({start:U(Un.get(e.element(),t.stateAttr())),destination:U(Un.get(e.element(),t.destinationAttr()))}):P.none()},xh=function(e,t,n,o){wh(e,t,n),Un.has(e.element(),t.stateAttr())&&Un.get(e.element(),t.stateAttr())!==o&&t.onFinish()(e,o),Un.set(e.element(),t.stateAttr(),o)},kh=Object.freeze({findRoute:ph,disableTransition:wh,getCurrentRoute:yh,jumpTo:xh,progressTo:function(n,o,r,i){var e,t;t=o,Un.has((e=n).element(),t.destinationAttr())&&(Un.set(e.element(),t.stateAttr(),Un.get(e.element(),t.destinationAttr())),Un.remove(e.element(),t.destinationAttr()));var a,u,c=(a=o,u=i,{start:U(Un.get(n.element(),a.stateAttr())),destination:U(u)});bh(n,o,r,c).fold(function(){xh(n,o,r,i)},function(e){wh(n,o,r);var t=e.transition();Pi.add(n.element(),t.transitionClass()),Un.set(n.element(),o.destinationAttr(),i)})},getState:function(e,t,n){var o=e.element();return Un.has(o,t.stateAttr())?P.some(Un.get(o,t.stateAttr())):P.none()}}),Sh=Object.freeze({events:function(r,i){return Ur([Xr(Ke(),function(n,e){var o=e.event().raw();yh(n,r,i).each(function(t){ph(0,r,0,t).each(function(e){e.transition().each(function(e){o.propertyName===e.property()&&(xh(n,r,i,t.destination()),r.onTransition()(n,t))})})})}),ei(function(e,t){xh(e,r,i,r.initialState())})])}}),Ch=[Or("destinationAttr","data-transitioning-destination"),Or("stateAttr","data-transitioning-state"),gr("initialState"),da("onTransition"),da("onFinish"),hr("routes",Go(ie.value,Go(ie.value,jo([zr("transition",[gr("property"),gr("transitionClass")])]))))],zh=Si({fields:Ch,name:"transitioning",active:Sh,apis:kh,extra:{createRoutes:function(e){var o={};return ce(e,function(e,t){var n=t.split("<->");o[n[0]]=Oe(n[1],e),o[n[1]]=Oe(n[0],e)}),o},createBistate:function(e,t,n){return Te([{key:e,value:Oe(t,n)},{key:t,value:Oe(e,n)}])},createTristate:function(e,t,n,o){return Te([{key:e,value:Te([{key:t,value:o},{key:n,value:o}])},{key:t,value:Te([{key:e,value:o},{key:n,value:o}])},{key:n,value:Te([{key:e,value:o},{key:t,value:o}])}])}}}),Oh=Ia.resolve("scrollable"),Th={register:function(e){Pi.add(e,Oh)},deregister:function(e){Pi.remove(e,Oh)},scrollable:U(Oh)},Mh=function(e){return ze(e,"format").getOr(e.title)},Hh=function(e,t,n,o,r){return{data:{value:e,text:t},type:"item",dom:{tag:"div",classes:r?[Ia.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:Ia.resolve("format-matches"),selected:n},itemBehaviours:xi(r?[]:[Da(e,function(e,t){(t?Va.on:Va.off)(e)})]),components:[{dom:{tag:"div",attributes:{style:o},innerHtml:t}}]}},Ah=function(e,t,n,o){return{value:e,dom:{tag:"div"},components:[Ml.sketch({dom:{tag:"div",classes:[Ia.resolve("styles-collapser")]},components:o?[{dom:{tag:"span",classes:[Ia.resolve("styles-collapse-icon")]}},Pg(e)]:[Pg(e)],action:function(e){if(o){var t=n().get(e);vh.collapseMenu(t)}}}),{dom:{tag:"div",classes:[Ia.resolve("styles-menu-items-container")]},components:[ih.parts().items({})],behaviours:xi([Om("adhoc-scrollable-menu",[ei(function(e,t){Ka.set(e.element(),"overflow-y","auto"),Ka.set(e.element(),"-webkit-overflow-scrolling","touch"),Th.register(e.element())}),ti(function(e){Ka.remove(e.element(),"overflow-y"),Ka.remove(e.element(),"-webkit-overflow-scrolling"),Th.deregister(e.element())})])])}],items:t,menuBehaviours:xi([zh.config({initialState:"after",routes:zh.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},Eh=function(o){var r,i,e,t,n,a=(r=o.formats,i=function(){return u},e=Ah("Styles",[].concat(E(r.items,function(e){return Hh(Mh(e),e.title,e.isSelected(),e.getPreview(),He(r.expansions,Mh(e)))})),i,!1),t=se(r.menus,function(e,t){var n=E(e,function(e){return Hh(Mh(e),e.title,e.isSelected!==undefined&&e.isSelected(),e.getPreview!==undefined?e.getPreview():"",He(r.expansions,Mh(e)))});return Ah(t,n,i,!0)}),n=te(t,Oe("styles",e)),{tmenu:vh.tieredData("styles",n,r.expansions)}),u=Jd(vh.sketch({dom:{tag:"div",classes:[Ia.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(e,t){var n=af.getValue(t);return o.handle(t,n.value),P.none()},onEscape:function(){return P.none()},onOpenMenu:function(e,t){var n=wf(e.element());bf(t.element(),n),zh.jumpTo(t,"current")},onOpenSubmenu:function(e,t,n){var o=wf(e.element()),r=lu(t.element(),'[role="menu"]').getOrDie("hacky"),i=e.getSystem().getByDom(r).getOrDie();bf(n.element(),o),zh.progressTo(i,"before"),zh.jumpTo(n,"after"),zh.progressTo(n,"current")},onCollapseMenu:function(e,t,n){var o=lu(t.element(),'[role="menu"]').getOrDie("hacky"),r=e.getSystem().getByDom(o).getOrDie();zh.progressTo(r,"after"),zh.progressTo(n,"current")},navigateOnHover:!1,highlightImmediately:!0,data:a.tmenu,markers:{backgroundMenu:Ia.resolve("styles-background-menu"),menu:Ia.resolve("styles-menu"),selectedMenu:Ia.resolve("styles-selected-menu"),item:Ia.resolve("styles-item"),selectedItem:Ia.resolve("styles-selected-item")}}));return u.asSpec()},Vh=function(e){return He(e,"items")?(n=te(ke(t=e,["items"]),{menu:!0}),o=Dh(t.items),{item:n,menus:te(o.menus,Oe(t.title,o.items)),expansions:te(o.expansions,Oe(t.title,t.title))}):{item:e,menus:{},expansions:{}};var t,n,o},Dh=function(e){return B(e,function(e,t){var n=Vh(t);return{menus:te(e.menus,n.menus),items:[n.item].concat(e.items),expansions:te(e.expansions,n.expansions)}},{menus:{},expansions:{},items:[]})},Bh={expand:Dh},Rh=function(a,e){var u=function(e){return function(){return a.formatter.match(e)}},c=function(e){return function(){return a.formatter.getCssText(e)}},t=ze(e,"style_formats").getOr(dg),s=function(e){return E(e,function(e){if(He(e,"items")){var t=s(e.items);return te(te(e,{isSelected:U(!1),getPreview:U("")}),{items:t})}return He(e,"format")?te(i=e,{isSelected:u(i.format),getPreview:c(i.format)}):(o=oo((n=e).title),r=te(n,{format:o,isSelected:u(o),getPreview:c(o)}),a.formatter.register(o,r),r);var n,o,r,i})};return s(t)},Fh=function(n,e,o){var t,r,i,a=(t=n,i=(r=function(e){return W(e,function(e){return e.items===undefined?!He(e,"format")||t.formatter.canApply(e.format)?[e]:[]:0<r(e.items).length?[e]:[]})})(e),Bh.expand(i));return Eh({formats:a,handle:function(e,t){n.undoManager.transact(function(){Va.isOn(e)?n.formatter.remove(t):n.formatter.apply(t)}),o()}})},Ih=["undo","bold","italic","link","image","bullist","styleselect"],_h=function(e){var t=e.replace(/\|/g," ").trim();return 0<t.length?t.split(/\s+/):[]},Lh=function(e){return W(e,function(e){return S(e)?Lh(e):_h(e)})},Nh=function(e){var t=e.toolbar!==undefined?e.toolbar:Ih;return S(t)?Lh(t):_h(t)},Ph=function(o,r){var e=function(e){return function(){return Fl.forToolbarCommand(r,e)}},t=function(e){return function(){return Fl.forToolbarStateCommand(r,e)}},n=function(e,t,n){return function(){return Fl.forToolbarStateAction(r,e,t,n)}},i=e("undo"),a=e("redo"),u=t("bold"),c=t("italic"),s=t("underline"),l=e("removeformat"),f=n("unlink","link",function(){r.execCommand("unlink",null,!1)}),d=n("unordered-list","ul",function(){r.execCommand("InsertUnorderedList",null,!1)}),m=n("ordered-list","ol",function(){r.execCommand("InsertOrderedList",null,!1)}),g=Rh(r,r.settings),h=function(){return Fh(r,g,function(){r.fire("scrollIntoView")})},v=function(e,t){return{isSupported:function(){return e.forall(function(e){return He(r.buttons,e)})},sketch:t}};return{undo:v(P.none(),i),redo:v(P.none(),a),bold:v(P.none(),u),italic:v(P.none(),c),underline:v(P.none(),s),removeformat:v(P.none(),l),link:v(P.none(),function(){return t=o,n=r,Fl.forToolbarStateAction(n,"link","link",function(){var e=fg(t,n);t.setContextToolbar(e),zm(n,function(){t.focusToolbar()}),km.query(n).each(function(e){n.selection.select(e.dom())})});var t,n}),unlink:v(P.none(),f),image:v(P.none(),function(){return hm(r)}),bullist:v(P.some("bullist"),d),numlist:v(P.some("numlist"),m),fontsizeselect:v(P.none(),function(){return t=r,e={onChange:function(e){$d.apply(t,e)},getInitialValue:function(){return $d.get(t)}},Pd(o,"font-size",function(){return Kd(e)});var t,e}),forecolor:v(P.none(),function(){return Ud(o,r)}),styleselect:v(P.none(),function(){return Fl.forToolbar("style-formats",function(e){r.fire("toReading"),o.dropup().appear(h,Va.on,e)},xi([Va.config({toggleClass:Ia.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),ya.config({channels:Te([Ra(na.orientationChanged(),Va.off),Ra(na.dropupDismissed(),Va.off)])})]))})}},jh=function(e,n){var t=Nh(e),o={};return W(t,function(e){var t=!He(o,e)&&He(n,e)&&n[e].isSupported()?[n[e].sketch()]:[];return o[e]=!0,t})},Uh=function(m,g){return function(e){if(m(e)){var t,n,o,r,i,a,u,c=Yt.fromDom(e.target),s=function(){e.stopPropagation()},l=function(){e.preventDefault()},f=h(l,s),d=(t=c,n=e.clientX,o=e.clientY,r=s,i=l,a=f,u=e,{target:U(t),x:U(n),y:U(o),stop:r,prevent:i,kill:a,raw:U(u)});g(d)}}},Wh=function(e,t,n,o,r){var i=Uh(n,o);return e.dom().addEventListener(t,i,r),{unbind:f(Gh,e,t,i,r)}},Gh=function(e,t,n,o){e.dom().removeEventListener(t,n,o)},Xh=function(e,t,n,o){return Wh(e,t,n,o,!1)},Yh=function(e,t,n,o){return Wh(e,t,n,o,!0)},$h=U(!0),qh=function(e,t,n){return Xh(e,t,$h,n)},Kh=function(e,t,n){return Yh(e,t,$h,n)},Jh=function(e){var t=e.matchMedia("(orientation: portrait)").matches;return{isPortrait:U(t)}},Qh=Jh,Zh=function(o,t){var e=Yt.fromDom(o),r=null,n=qh(e,"orientationchange",function(){clearInterval(r);var e=Jh(o);t.onChange(e),i(function(){t.onReady(e)})}),i=function(e){clearInterval(r);var t=o.innerHeight,n=0;r=setInterval(function(){t!==o.innerHeight?(clearInterval(r),e(P.some(o.innerHeight))):20<n&&(clearInterval(r),e(P.none())),n++},50)};return{onAdjustment:i,destroy:function(){n.unbind()}}},ev=function(e){var t=zt.detect().os.isiOS(),n=Jh(e).isPortrait();return t&&!n?e.screen.height:e.screen.width};function tv(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r=setTimeout(function(){n.apply(null,e),r=null},o)}}}var nv=function(e){var t=e.raw();return t.touches===undefined||1!==t.touches.length?P.none():P.some(t.touches[0])},ov=function(n){var a=Ae(P.none()),o=tv(function(e){a.set(P.none()),n.triggerEvent(Bt(),e)},400),r=Te([{key:Be(),value:function(n){return nv(n).each(function(e){o.cancel();var t={x:U(e.clientX),y:U(e.clientY),target:n.target};o.schedule(n),a.set(P.some(t))}),P.none()}},{key:Re(),value:function(e){return o.cancel(),nv(e).each(function(i){a.get().each(function(e){var t,n,o,r;t=i,n=e,o=Math.abs(t.clientX-n.x()),r=Math.abs(t.clientY-n.y()),(5<o||5<r)&&a.set(P.none())})}),P.none()}},{key:Fe(),value:function(t){return o.cancel(),a.get().filter(function(e){return dn(e.target(),t.target())}).map(function(e){return n.triggerEvent(Vt(),t)})}}]);return{fireIfReady:function(t,e){return ze(r,e).bind(function(e){return e(t)})}}},rv=function(n){var t=ov({triggerEvent:function(e,t){n.onTapContent(t)}});return{fireTouchstart:function(e){t.fireIfReady(e,"touchstart")},onTouchend:function(){return qh(n.body(),"touchend",function(e){t.fireIfReady(e,"touchend")})},onTouchmove:function(){return qh(n.body(),"touchmove",function(e){t.fireIfReady(e,"touchmove")})}}},iv=6<=zt.detect().os.version.major,av=function(o,t,n){var r=rv(o),i=wn.owner(t),a=function(e){return!dn(e.start(),e.finish())||e.soffset()!==e.foffset()},e=function(){var e=o.doc().dom().hasFocus()&&o.getSelection().exists(a);n.getByDom(t).each(!0===(e||Qi(i).filter(function(e){return"input"===_n.name(e)}).exists(function(e){return e.dom().selectionStart!==e.dom().selectionEnd}))?Va.on:Va.off)},u=[qh(o.body(),"touchstart",function(e){o.onTouchContent(),r.fireTouchstart(e)}),r.onTouchmove(),r.onTouchend(),qh(t,"touchstart",function(e){o.onTouchToolstrip()}),o.onToReading(function(){Ji(o.body())}),o.onToEditing(N),o.onScrollToCursor(function(e){e.preventDefault(),o.getCursorBox().each(function(e){var t=o.win(),n=e.top()>t.innerHeight||e.bottom()>t.innerHeight?e.bottom()-t.innerHeight+50:0;0!==n&&t.scrollTo(t.pageXOffset,t.pageYOffset+n)})})].concat(!0===iv?[]:[qh(Yt.fromDom(o.win()),"blur",function(){n.getByDom(t).each(Va.off)}),qh(i,"select",e),qh(o.doc(),"selectionchange",e)]);return{destroy:function(){V(u,function(e){e.unbind()})}}},uv=function(e,t){var n=parseInt(Un.get(e,t),10);return isNaN(n)?0:n},cv=function dD(n,o){var r=function(e){return n(e)?P.from(e.dom().nodeValue):P.none()},e=zt.detect().browser,t=e.isIE()&&10===e.version.major?function(e){try{return r(e)}catch(t){return P.none()}}:r;return{get:function(e){if(!n(e))throw new Error("Can only get "+o+" value of a "+o+" node");return t(e).getOr("")},getOption:t,set:function(e,t){if(!n(e))throw new Error("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}(_n.isText,"text"),sv=function(e){return cv.get(e)},lv=function(e){return cv.getOption(e)},fv=function(e){return"img"===_n.name(e)?1:lv(e).fold(function(){return wn.children(e).length},function(e){return e.length})},dv=fv,mv=me([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),gv={before:mv.before,on:mv.on,after:mv.after,cata:function(e,t,n,o){return e.fold(t,n,o)},getStart:function(e){return e.fold(b,b,b)}},hv=me([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vv=$t("start","soffset","finish","foffset"),pv={domRange:hv.domRange,relative:hv.relative,exact:hv.exact,exactFromRange:function(e){return hv.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:vv,getWin:function(e){var t=e.match({domRange:function(e){return Yt.fromDom(e.startContainer)},relative:function(e,t){return gv.getStart(e)},exact:function(e,t,n,o){return e}});return wn.defaultView(t)}},bv=function(e,t,n,o){var r=wn.owner(e).dom().createRange();return r.setStart(e.dom(),t),r.setEnd(n.dom(),o),r},wv=function(e,t,n,o){var r=bv(e,t,n,o),i=dn(e,n)&&t===o;return r.collapsed&&!i},yv=function(e,t){e.selectNodeContents(t.dom())},xv=function(e){e.deleteContents()},kv=function(e){return{left:U(e.left),top:U(e.top),right:U(e.right),bottom:U(e.bottom),width:U(e.width),height:U(e.height)}},Sv={create:function(e){return e.document.createRange()},replaceWith:function(e,t){xv(e),e.insertNode(t.dom())},selectNodeContents:function(e,t){var n=e.document.createRange();return yv(n,t),n},selectNodeContentsUsing:yv,relativeToNative:function(e,t,n){var o,r,i=e.document.createRange();return o=i,t.fold(function(e){o.setStartBefore(e.dom())},function(e,t){o.setStart(e.dom(),t)},function(e){o.setStartAfter(e.dom())}),r=i,n.fold(function(e){r.setEndBefore(e.dom())},function(e,t){r.setEnd(e.dom(),t)},function(e){r.setEndAfter(e.dom())}),i},exactToNative:function(e,t,n,o,r){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(o.dom(),r),i},deleteContents:xv,cloneFragment:function(e){var t=e.cloneContents();return Yt.fromDom(t)},getFirstRect:function(e){var t=e.getClientRects(),n=0<t.length?t[0]:e.getBoundingClientRect();return 0<n.width||0<n.height?P.some(n).map(kv):P.none()},getBounds:function(e){var t=e.getBoundingClientRect();return 0<t.width||0<t.height?P.some(t).map(kv):P.none()},isWithin:function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<t.compareBoundaryPoints(e.START_TO_END,e)},toString:function(e){return e.toString()}},Cv=me([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),zv=function(e,t,n){return t(Yt.fromDom(n.startContainer),n.startOffset,Yt.fromDom(n.endContainer),n.endOffset)},Ov=function(e,t){var r,n,o,i=(r=e,t.match({domRange:function(e){return{ltr:U(e),rtl:P.none}},relative:function(e,t){return{ltr:Ze(function(){return Sv.relativeToNative(r,e,t)}),rtl:Ze(function(){return P.some(Sv.relativeToNative(r,t,e))})}},exact:function(e,t,n,o){return{ltr:Ze(function(){return Sv.exactToNative(r,e,t,n,o)}),rtl:Ze(function(){return P.some(Sv.exactToNative(r,n,o,e,t))})}}}));return(o=(n=i).ltr()).collapsed?n.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Cv.rtl(Yt.fromDom(e.endContainer),e.endOffset,Yt.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return zv(0,Cv.ltr,o)}):zv(0,Cv.ltr,o)},Tv=(Cv.ltr,Cv.rtl,Ov),Mv=function(i,e){return Ov(i,e).match({ltr:function(e,t,n,o){var r=i.document.createRange();return r.setStart(e.dom(),t),r.setEnd(n.dom(),o),r},rtl:function(e,t,n,o){var r=i.document.createRange();return r.setStart(n.dom(),o),r.setEnd(e.dom(),t),r}})},Hv=(document.caretPositionFromPoint||document.caretRangeFromPoint,function(e,t){var n=_n.name(e);return"input"===n?gv.after(e):M(["br","img"],n)?0===t?gv.before(e):gv.after(e):gv.on(e,t)}),Av=function(e,t,n,o){var r=Hv(e,t),i=Hv(n,o);return pv.relative(r,i)},Ev=Av,Vv=function(e,t){P.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},Dv=function(e,t,n,o,r){var i=Sv.exactToNative(e,t,n,o,r);Vv(e,i)},Bv=function(f,e){return Tv(f,e).match({ltr:function(e,t,n,o){Dv(f,e,t,n,o)},rtl:function(e,t,n,o){var r,i,a,u,c,s=f.getSelection();if(s.setBaseAndExtent)s.setBaseAndExtent(e.dom(),t,n.dom(),o);else if(s.extend)try{i=e,a=t,u=n,c=o,(r=s).collapse(i.dom(),a),r.extend(u.dom(),c)}catch(l){Dv(f,n,o,e,t)}else Dv(f,n,o,e,t)}})},Rv=function(e){var t=Yt.fromDom(e.anchorNode),n=Yt.fromDom(e.focusNode);return wv(t,e.anchorOffset,n,e.focusOffset)?P.some(pv.range(Yt.fromDom(e.anchorNode),e.anchorOffset,Yt.fromDom(e.focusNode),e.focusOffset)):function(e){if(0<e.rangeCount){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return P.some(pv.range(Yt.fromDom(t.startContainer),t.startOffset,Yt.fromDom(n.endContainer),n.endOffset))}return P.none()}(e)},Fv=function(e){return P.from(e.getSelection()).filter(function(e){return 0<e.rangeCount}).bind(Rv)},Iv=function(e,t,n,o,r){var i=Ev(t,n,o,r);Bv(e,i)},_v=Fv,Lv=function(e){return Fv(e).map(function(e){return pv.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},Nv=function(e){e.getSelection().removeAllRanges()},Pv=function(e,t){var n=Mv(e,t);return Sv.getFirstRect(n)},jv=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:U(2),height:e.height}},Uv=function(e){return{left:U(e.left),top:U(e.top),right:U(e.right),bottom:U(e.bottom),width:U(e.width),height:U(e.height)}},Wv=function(e){var t=e.getSelection();return t!==undefined&&0<t.rangeCount?function(n){if(n.collapsed){var o=Yt.fromDom(n.startContainer);return wn.parent(o).bind(function(e){var t=pv.exact(o,n.startOffset,e,dv(e));return Pv(n.startContainer.ownerDocument.defaultView,t).map(jv).map(q)}).getOr([])}return E(n.getClientRects(),Uv)}(t.getRangeAt(0)):[]},Gv=function(e){e.focus();var t=Yt.fromDom(e.document.body);(Qi().exists(function(e){return M(["input","textarea"],_n.name(e))})?function(e){setTimeout(function(){e()},0)}:u)(function(){Qi().each(Ji),Ki(t)})},Xv="data-"+Ia.resolve("last-outer-height"),Yv=function(e,t){Un.set(e,Xv,t)},$v=function(e){return{top:U(e.top()),bottom:U(e.top()+e.height())}},qv=function(e,t){var n=uv(t,Xv),o=e.innerHeight;return o<n?P.some(n-o):P.none()},Kv=function(e,a){var t=Yt.fromDom(a.document.body),n=qh(Yt.fromDom(e),"resize",function(){qv(e,t).each(function(i){var e,t;(e=a,t=Wv(e),0<t.length?P.some(t[0]).map($v):P.none()).each(function(e){var t,n,o,r=(t=a,o=i,(n=e).top()>t.innerHeight||n.bottom()>t.innerHeight?Math.min(o,n.bottom()-t.innerHeight+50):0);0!==r&&a.scrollTo(a.pageXOffset,a.pageYOffset+r)})}),Yv(t,e.innerHeight)});return Yv(t,e.innerHeight),{toEditing:function(){Gv(a)},destroy:function(){n.unbind()}}},Jv=function(e){return P.some(Yt.fromDom(e.dom().contentWindow.document.body))},Qv=function(e){return P.some(Yt.fromDom(e.dom().contentWindow.document))},Zv=function(e){return P.from(e.dom().contentWindow)},ep=function(e){return Zv(e).bind(_v)},tp=function(e){return e.getFrame()},np=function(e,n){return function(t){return t[e].getOrThunk(function(){var e=tp(t);return function(){return n(e)}})()}},op=function(e,t,n,o){return e[n].getOrThunk(function(){return function(e){return qh(t,o,e)}})},rp=function(e){return{left:U(e.left),top:U(e.top),right:U(e.right),bottom:U(e.bottom),width:U(e.width),height:U(e.height)}},ip={getBody:np("getBody",Jv),getDoc:np("getDoc",Qv),getWin:np("getWin",Zv),getSelection:np("getSelection",ep),getFrame:tp,getActiveApi:function(u){var c=tp(u);return Jv(c).bind(function(a){return Qv(c).bind(function(i){return Zv(c).map(function(r){var e=Yt.fromDom(i.dom().documentElement),t=u.getCursorBox.getOrThunk(function(){return function(){return Lv(r).bind(function(e){return Pv(r,e).orThunk(function(){return _v(r).filter(function(e){return dn(e.start(),e.finish())&&e.soffset()===e.foffset()}).bind(function(e){var t=e.start().dom().getBoundingClientRect();return 0<t.width||0<t.height?P.some(t).map(rp):P.none()})})})}}),n=u.setSelection.getOrThunk(function(){return function(e,t,n,o){Iv(r,e,t,n,o)}}),o=u.clearSelection.getOrThunk(function(){return function(){Nv(r)}});return{body:U(a),doc:U(i),win:U(r),html:U(e),getSelection:f(ep,c),setSelection:n,clearSelection:o,frame:U(c),onKeyup:op(u,i,"onKeyup","keyup"),onNodeChanged:op(u,i,"onNodeChanged","selectionchange"),onDomChanged:u.onDomChanged,onScrollToCursor:u.onScrollToCursor,onScrollToElement:u.onScrollToElement,onToReading:u.onToReading,onToEditing:u.onToEditing,onToolbarScrollStart:u.onToolbarScrollStart,onTouchContent:u.onTouchContent,onTapContent:u.onTapContent,onTouchToolstrip:u.onTouchToolstrip,getCursorBox:t}})})})}},ap="data-ephox-mobile-fullscreen-style",up="position:absolute!important;",cp="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;",sp=zt.detect().os.isAndroid(),lp=function(e,t){var n,o,r=function(o){return function(e){var t=Un.get(e,"style"),n=t===undefined?"no-styles":t.trim();n!==o&&(Un.set(e,ap,n),Un.set(e,"style",o))}},i=iu(e,"*"),a=W(i,function(e){return au(e,"*")}),u=(n=t,(o=Ka.get(n,"background-color"))!==undefined&&""!==o?"background-color:"+o+"!important":"background-color:rgb(255,255,255)!important;");V(a,r("display:none!important;")),V(i,r(up+cp+u)),r((!0===sp?"":up)+cp+u)(e)},fp=function(){var e=ru("["+ap+"]");V(e,function(e){var t=Un.get(e,ap);"no-styles"!==t?Un.set(e,"style",t):Un.remove(e,"style"),Un.remove(e,ap)})},dp=function(){var t=su("head").getOrDie(),e=su('meta[name="viewport"]').getOrThunk(function(){var e=Yt.fromTag("meta");return Un.set(e,"name","viewport"),Sn.append(t,e),e}),n=Un.get(e,"content");return{maximize:function(){Un.set(e,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){n!==undefined&&null!==n&&0<n.length?Un.set(e,"content",n):Un.set(e,"content","user-scalable=yes")}}},mp=function(t,e){var n=dp(),o=ig(),r=ig();return{enter:function(){e.hide(),Pi.add(t.container,Ia.resolve("fullscreen-maximized")),Pi.add(t.container,Ia.resolve("android-maximized")),n.maximize(),Pi.add(t.body,Ia.resolve("android-scroll-reload")),o.set(Kv(t.win,ip.getWin(t.editor).getOrDie("no"))),ip.getActiveApi(t.editor).each(function(e){lp(t.container,e.body()),r.set(av(e,t.toolstrip,t.alloy))})},exit:function(){n.restore(),e.show(),Pi.remove(t.container,Ia.resolve("fullscreen-maximized")),Pi.remove(t.container,Ia.resolve("android-maximized")),fp(),Pi.remove(t.body,Ia.resolve("android-scroll-reload")),r.clear(),o.clear()}}},gp=function(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==r&&clearTimeout(r),r=setTimeout(function(){n.apply(null,e),r=null},o)}}},hp=function(e,t){var n,o,r,i=Jd(Am.sketch({dom:Vl('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:xi([Va.config({toggleClass:Ia.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),a=(n=e,o=200,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===r&&(r=setTimeout(function(){n.apply(null,e),r=null},o))}});return Am.sketch({dom:Vl('<div class="${prefix}-disabled-mask"></div>'),components:[Am.sketch({dom:Vl('<div class="${prefix}-content-container"></div>'),components:[Ml.sketch({dom:Vl('<div class="${prefix}-content-tap-section"></div>'),components:[i.asSpec()],action:function(e){a.throttle()},buttonBehaviours:xi([Va.config({toggleClass:Ia.resolve("mask-tap-icon-selected")})])})]})]})},vp=Uo([br("editor",[gr("getFrame"),xr("getBody"),xr("getDoc"),xr("getWin"),xr("getSelection"),xr("setSelection"),xr("clearSelection"),xr("cursorSaver"),xr("onKeyup"),xr("onNodeChanged"),xr("getCursorBox"),gr("onDomChanged"),Or("onTouchContent",N),Or("onTapContent",N),Or("onTouchToolstrip",N),Or("onScrollToCursor",U({unbind:N})),Or("onScrollToElement",U({unbind:N})),Or("onToEditing",U({unbind:N})),Or("onToReading",U({unbind:N})),Or("onToolbarScrollStart",b)]),gr("socket"),gr("toolstrip"),gr("dropup"),gr("toolbar"),gr("container"),gr("alloy"),Dr("win",function(e){return wn.owner(e.socket).dom().defaultView}),Dr("body",function(e){return Yt.fromDom(e.socket.dom().ownerDocument.body)}),Or("translate",b),Or("setReadOnly",N),Or("readOnlyOnInit",U(!0))]),pp=function(e){var t=rr("Getting AndroidWebapp schema",vp,e);Ka.set(t.toolstrip,"width","100%");var n=Ug(hp(function(){t.setReadOnly(t.readOnlyOnInit()),r.enter()},t.translate));t.alloy.add(n);var o={show:function(){t.alloy.add(n)},hide:function(){t.alloy.remove(n)}};Sn.append(t.container,n.element());var r=mp(t,o);return{setReadOnly:t.setReadOnly,refreshStructure:N,enter:r.enter,exit:r.exit,destroy:N}},bp=U([Or("shell",!0),ms("toolbarBehaviours",[fh])]),wp=U([js({name:"groups",overrides:function(e){return{behaviours:xi([fh.config({})])}}})]),yp=Tl({name:"Toolbar",configFields:bp(),partFields:wp(),factory:function(t,e,n,o){var r=function(e){return t.shell()?P.some(e):el(e,t,"groups")},i=t.shell()?{behaviours:[fh.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid(),dom:t.dom(),components:i.components,behaviours:te(xi(i.behaviours),gs(t.toolbarBehaviours())),apis:{setGroups:function(e,t){r(e).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(e){fh.set(e,t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),xp=U([gr("items"),la(["itemSelector"]),ms("tgroupBehaviours",[ds])]),kp=U([Us({name:"items",unit:"item"})]),Sp=Tl({name:"ToolbarGroup",configFields:xp(),partFields:kp(),factory:function(e,t,n,o){return te({dom:{attributes:{role:"toolbar"}}},{uid:e.uid(),dom:e.dom(),components:t,behaviours:te(xi([ds.config({mode:"flow",selector:e.markers().itemSelector()})]),gs(e.tgroupBehaviours())),"debug.sketcher":n["debug.sketcher"]})}}),Cp="data-"+Ia.resolve("horizontal-scroll"),zp=function(e){return"true"===Un.get(e,Cp)?0<(n=e).dom().scrollLeft||function(e){e.dom().scrollLeft=1;var t=0!==e.dom().scrollLeft;return e.dom().scrollLeft=0,t}(n):0<(t=e).dom().scrollTop||function(e){e.dom().scrollTop=1;var t=0!==e.dom().scrollTop;return e.dom().scrollTop=0,t}(t);var t,n},Op={exclusive:function(e,t){return qh(e,"touchmove",function(e){du(e.target(),t).filter(zp).fold(function(){e.raw().preventDefault()},N)})},markAsHorizontal:function(e){Un.set(e,Cp,"true")}};function Tp(){var t=function(e){var t=!0===e.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:Vl('<div aria-label="'+e.label+'" class="${prefix}-toolbar-group '+t+'"></div>'),tgroupBehaviours:xi([Om("adhoc-scrollable-toolbar",!0===e.scrollable?[ni(function(e,t){Ka.set(e.element(),"overflow-x","auto"),Op.markAsHorizontal(e.element()),Th.register(e.element())})]:[])]),components:[Am.sketch({components:[Sp.parts().items({})]})],markers:{itemSelector:"."+Ia.resolve("toolbar-group-item")},items:e.items}},n=Ug(yp.sketch({dom:Vl('<div class="${prefix}-toolbar"></div>'),components:[yp.parts().groups({})],toolbarBehaviours:xi([Va.config({toggleClass:Ia.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),ds.config({mode:"cyclic"})]),shell:!0})),e=Ug(Am.sketch({dom:{classes:[Ia.resolve("toolstrip")]},components:[Wg(n)],containerBehaviours:xi([Va.config({toggleClass:Ia.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),o=function(){yp.setGroups(n,r.get()),Va.off(n)},r=Ae([]);return{wrapper:U(e),toolbar:U(n),createGroups:function(e){return E(e,h(Sp.sketch,t))},setGroups:function(e){r.set(e),o()},setContextToolbar:function(e){Va.on(n),yp.setGroups(n,e)},restoreToolbar:function(){Va.isOn(n)&&o()},refresh:function(){},focus:function(){ds.focusIn(n)}}}var Mp=function(e,t){fh.append(e,Wg(t))},Hp=function(e,t){fh.remove(e,t)},Ap=function(e){return Ug(Ml.sketch({dom:Vl('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){e.run(function(e){e.setReadOnly(!1)})}}))},Ep=function(){return Ug(Am.sketch({dom:Vl('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:xi([fh.config({})])}))},Vp=function(e,t,n,o){(!0===n?Gi.toAlpha:Gi.toOmega)(o),(n?Mp:Hp)(e,t)},Dp=function(t,e){return e.getAnimationRoot().fold(function(){return t.element()},function(e){return e(t)})},Bp=function(e){return e.dimension().property()},Rp=function(e,t){return e.dimension().getDimension()(t)},Fp=function(e,t){var n=Dp(e,t);Eg(n,[t.shrinkingClass(),t.growingClass()])},Ip=function(e,t){Pi.remove(e.element(),t.openClass()),Pi.add(e.element(),t.closedClass()),Ka.set(e.element(),Bp(t),"0px"),Ka.reflow(e.element())},_p=function(e,t){Pi.remove(e.element(),t.closedClass()),Pi.add(e.element(),t.openClass()),Ka.remove(e.element(),Bp(t))},Lp=function(e,t,n,o){n.setCollapsed(),Ka.set(e.element(),Bp(t),Rp(t,e.element())),Ka.reflow(e.element()),Fp(e,t),Ip(e,t),t.onStartShrink()(e),t.onShrunk()(e)},Np=function(e,t,n,o){var r=o.getOrThunk(function(){return Rp(t,e.element())});n.setCollapsed(),Ka.set(e.element(),Bp(t),r),Ka.reflow(e.element());var i=Dp(e,t);Pi.add(i,t.shrinkingClass()),Ip(e,t),t.onStartShrink()(e)},Pp=function(e,t,n){var o=Rp(t,e.element());("0px"===o?Lp:Np)(e,t,n,P.some(o))},jp=function(e,t,n){_p(e,t);var o=Rp(t,e.element());Ip(e,t);var r=Dp(e,t);Pi.add(r,t.growingClass()),_p(e,t),Ka.set(e.element(),Bp(t),o),n.setExpanded(),t.onStartGrow()(e)},Up=function(e,t,n){var o=Dp(e,t);return!0===Pi.has(o,t.growingClass())},Wp=function(e,t,n){var o=Dp(e,t);return!0===Pi.has(o,t.shrinkingClass())},Gp=Object.freeze({grow:function(e,t,n){n.isExpanded()||jp(e,t,n)},shrink:function(e,t,n){n.isExpanded()&&Pp(e,t,n)},immediateShrink:function(e,t,n){n.isExpanded()&&Lp(e,t,n,P.none())},hasGrown:function(e,t,n){return n.isExpanded()},hasShrunk:function(e,t,n){return n.isCollapsed()},isGrowing:Up,isShrinking:Wp,isTransitioning:function(e,t,n){return!0===Up(e,t)||!0===Wp(e,t)},toggleGrow:function(e,t,n){(n.isExpanded()?Pp:jp)(e,t,n)},disableTransitions:Fp}),Xp=Object.freeze({exhibit:function(e,t){var n=t.expanded();return ci(n?{classes:[t.openClass()],styles:{}}:{classes:[t.closedClass()],styles:Oe(t.dimension().property(),"0px")})},events:function(n,o){return Ur([Zr(Ke(),function(e,t){t.event().raw().propertyName===n.dimension().property()&&(Fp(e,n),o.isExpanded()&&Ka.remove(e.element(),n.dimension().property()),(o.isExpanded()?n.onGrown():n.onShrunk())(e))})])}}),Yp=[gr("closedClass"),gr("openClass"),gr("shrinkingClass"),gr("growingClass"),xr("getAnimationRoot"),da("onShrunk"),da("onStartShrink"),da("onGrown"),da("onStartGrow"),Or("expanded",!1),hr("dimension",ur("property",{width:[va("property","width"),va("getDimension",function(e){return wf(e)+"px"})],height:[va("property","height"),va("getDimension",function(e){return Za(e)+"px"})]}))],$p=Object.freeze({init:function(e){var t=Ae(e.expanded());return yi({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:f(t.set,!1),setExpanded:f(t.set,!0),readState:function(){return"expanded: "+t.get()}})}}),qp=Si({fields:Yp,name:"sliding",active:Xp,apis:Gp,state:$p}),Kp=function(t,n){var o=Ug(Am.sketch({dom:{tag:"div",classes:[Ia.resolve("dropup")]},components:[],containerBehaviours:xi([fh.config({}),qp.config({closedClass:Ia.resolve("dropup-closed"),openClass:Ia.resolve("dropup-open"),shrinkingClass:Ia.resolve("dropup-shrinking"),growingClass:Ia.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(e){t(),n(),fh.set(e,[])},onGrown:function(e){t(),n()}}),Ba(function(e,t){r(N)})])})),r=function(e){window.requestAnimationFrame(function(){e(),qp.shrink(o)})};return{appear:function(e,t,n){!0===qp.hasShrunk(o)&&!1===qp.isTransitioning(o)&&window.requestAnimationFrame(function(){t(n),fh.set(o,[e()]),qp.grow(o)})},disappear:r,component:U(o),element:o.element}},Jp=zt.detect().browser.isFirefox(),Qp=jo([pr("triggerEvent"),pr("broadcastEvent"),Or("stopBackspace",!0)]),Zp=function(t,e){var n,o,r,i,a=rr("Getting GUI events settings",Qp,e),u=zt.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],c=ov(a),s=E(u.concat(["selectstart","input","contextmenu","change","paste","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(e){return qh(t,e,function(t){c.fireIfReady(t,e).each(function(e){e&&t.kill()}),a.triggerEvent(e,t)&&t.kill()})}),l=qh(t,"keydown",function(e){var t;a.triggerEvent("keydown",e)?e.kill():!0!==a.stopBackspace||8!==(t=e).raw().which||M(["input","textarea"],_n.name(t.target()))||e.prevent()}),f=(n=t,o=function(e){a.triggerEvent("focusin",e)&&e.kill()},Jp?Kh(n,"focus",o):qh(n,"focusin",o)),d=(r=t,i=function(e){a.triggerEvent("focusout",e)&&e.kill(),setTimeout(function(){a.triggerEvent(Mt(),e)},0)},Jp?Kh(r,"blur",i):qh(r,"focusout",i)),m=wn.defaultView(t),g=qh(m,"scroll",function(e){a.broadcastEvent(_t(),e)&&e.kill()});return{unbind:function(){V(s,function(e){e.unbind()}),l.unbind(),f.unbind(),d.unbind(),g.unbind()}}},eb=function(e,t){var n=ze(e,"target").map(function(e){return e()}).getOr(t);return Ae(n)},tb=me([{stopped:[]},{resume:["element"]},{complete:[]}]),nb=function(e,o,t,n,r,i){var a,u,c,s,l=e(o,n),f=(a=t,u=r,c=Ae(!1),s=Ae(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:U(a),setSource:u.set,getSource:u.get});return l.fold(function(){return i.logEventNoHandlers(o,n),tb.complete()},function(t){var n=t.descHandler();return Sg(n)(f),f.isStopped()?(i.logEventStopped(o,t.element(),n.purpose()),tb.stopped()):f.isCut()?(i.logEventCut(o,t.element(),n.purpose()),tb.complete()):wn.parent(t.element()).fold(function(){return i.logNoParent(o,t.element(),n.purpose()),tb.complete()},function(e){return i.logEventResponse(o,t.element(),n.purpose()),tb.resume(e)})})},ob=function(t,n,o,e,r,i){return nb(t,n,o,e,r,i).fold(function(){return!0},function(e){return ob(t,n,o,e,r,i)},function(){return!1})},rb=function(e,t,n){var o,r,i=(o=t,r=Ae(!1),{stop:function(){r.set(!0)},cut:N,isStopped:r.get,isCut:U(!1),event:U(o),setSource:a("Cannot set source of a broadcasted event"),getSource:a("Cannot get source of a broadcasted event")});return V(e,function(e){var t=e.descHandler();Sg(t)(i)}),i.isStopped()},ib=function(e,t,n,o,r){var i=eb(n,o);return ob(e,t,n,o,i,r)},ab=$t("element","descHandler"),ub=function(e,t){return{id:U(e),descHandler:U(t)}};function cb(){var i={};return{registerId:function(o,r,e){ce(e,function(e,t){var n=i[t]!==undefined?i[t]:{};n[r]=kg(e,o),i[t]=n})},unregisterId:function(n){ce(i,function(e,t){e.hasOwnProperty(n)&&delete e[n]})},filterByType:function(e){return ze(i,e).map(function(e){return fe(e,function(e,t){return ub(t,e)})}).getOr([])},find:function(e,t,n){var r=Se(t)(i);return jr(n,function(e){return n=r,wl(o=e).fold(function(){return P.none()},function(e){var t=Se(e);return n.bind(t).map(function(e){return ab(o,e)})});var n,o},e)}}}function sb(){var o=cb(),r={},i=function(o){var e=o.element();return wl(e).fold(function(){return e="uid-",t=o.element(),n=oo(vl+e),bl(t,n),n;var e,t,n},function(e){return e})},a=function(e){wl(e.element()).each(function(e){r[e]=undefined,o.unregisterId(e)})};return{find:function(e,t,n){return o.find(e,t,n)},filter:function(e){return o.filterByType(e)},register:function(e){var t=i(e);He(r,t)&&function(e,t){var n=r[t];if(n!==e)throw new Error('The tagId "'+t+'" is already used by: '+Xn(n.element())+"\nCannot use it for: "+Xn(e.element())+"\nThe conflicting element is"+(go.inBody(n.element())?" ":" not ")+"already in the DOM");a(e)}(e,t);var n=[e];o.registerId(n,t,e.events()),r[t]=e},unregister:a,getById:function(e){return Se(e)(r)}}}var lb=function(n){var o=function(t){return wn.parent(n.element()).fold(function(){return!0},function(e){return dn(t,e)})},r=sb(),s=function(e,t){return r.find(o,e,t)},e=Zp(n.element(),{triggerEvent:function(a,u){return Qn(a,u.target(),function(e){return t=s,n=a,r=e,i=(o=u).target(),ib(t,n,o,i,r);var t,n,o,r,i})},broadcastEvent:function(e,t){var n=r.filter(e);return rb(n,t)}}),i=vg({debugInfo:U("real"),triggerEvent:function(t,n,o){Qn(t,n,function(e){ib(s,t,o,n,e)})},triggerFocus:function(u,c){wl(u).fold(function(){Ki(u)},function(e){Qn(Tt(),u,function(e){var t,n,o,r,i,a;t=s,n=Tt(),o={originator:U(c),kill:N,prevent:N,target:U(u)},i=e,a=eb(o,r=u),nb(t,n,o,r,a,i)})})},triggerEscape:function(e,t){i.triggerEvent("keydown",e.element(),t.event())},getByUid:function(e){return m(e)},getByDom:function(e){return g(e)},build:Ug,addToGui:function(e){u(e)},removeFromGui:function(e){c(e)},addToWorld:function(e){t(e)},removeFromWorld:function(e){a(e)},broadcast:function(e){f(e)},broadcastOn:function(e,t){d(e,t)},isConnected:U(!0)}),t=function(e){e.connect(i),_n.isText(e.element())||(r.register(e),V(e.components(),t),i.triggerEvent(It(),e.element(),{target:U(e.element())}))},a=function(e){_n.isText(e.element())||(V(e.components(),a),r.unregister(e)),e.disconnect()},u=function(e){po(n,e)},c=function(e){yo(e)},l=function(n){var e=r.filter(Ht());V(e,function(e){var t=e.descHandler();Sg(t)(n)})},f=function(e){l({universal:U(!0),data:U(e)})},d=function(e,t){l({universal:U(!1),channels:U(e),data:U(t)})},m=function(e){return r.getById(e).fold(function(){return ie.error(new Error('Could not find component with uid: "'+e+'" in system.'))},ie.value)},g=function(e){var t=wl(e).getOr("not found");return m(t)};return t(n),{root:U(n),element:n.element,destroy:function(){e.unbind(),Tn.remove(n.element())},add:u,remove:c,getByUid:m,getByDom:g,addToWorld:t,removeFromWorld:a,broadcast:f,broadcastOn:d}},fb=U(Ia.resolve("readonly-mode")),db=U(Ia.resolve("edit-mode"));function mb(e){var t=Ug(Am.sketch({dom:{classes:[Ia.resolve("outer-container")].concat(e.classes)},containerBehaviours:xi([Gi.config({alpha:fb(),omega:db()})])}));return lb(t)}var gb=function(e,t){var n=Yt.fromTag("input");Ka.setAll(n,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),Sn.append(e,n),Ki(n),t(n),Tn.remove(n)},hb=function(e){var t=e.getSelection();if(0<t.rangeCount){var n=t.getRangeAt(0),o=e.document.createRange();o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),t.removeAllRanges(),t.addRange(o)}},vb=function(e,t){Qi().each(function(e){dn(e,t)||Ji(e)}),e.focus(),Ki(Yt.fromDom(e.document.body)),hb(e)},pb={stubborn:function(e,t,n,o){var r=function(){vb(t,o)},i=qh(n,"keydown",function(e){M(["input","textarea"],_n.name(e.target()))||r()});return{toReading:function(){gb(e,Ji)},toEditing:r,onToolbarTouch:function(){},destroy:function(){i.unbind()}}},timid:function(e,t,n,o){var r=function(){Ji(o)};return{toReading:function(){r()},toEditing:function(){vb(t,o)},onToolbarTouch:function(){r()},destroy:N}}},bb=function(n,o,r,i,e){var a=function(){o.run(function(e){e.refreshSelection()})},t=function(e,t){var n=e-i.dom().scrollTop;o.run(function(e){e.scrollIntoView(n,n+t)})},u=function(){o.run(function(e){e.clearSelection()})},c=function(){n.getCursorBox().each(function(e){t(e.top(),e.height())}),o.run(function(e){e.syncHeight()})},s=rv(n),l=gp(c,300),f=[n.onKeyup(function(){u(),l.throttle()}),n.onNodeChanged(a),n.onDomChanged(l.throttle),n.onDomChanged(a),n.onScrollToCursor(function(e){e.preventDefault(),l.throttle()}),n.onScrollToElement(function(e){e.element(),t(o,i)}),n.onToEditing(function(){o.run(function(e){e.toEditing()})}),n.onToReading(function(){o.run(function(e){e.toReading()})}),qh(n.doc(),"touchend",function(e){dn(n.html(),e.target())||dn(n.body(),e.target())}),qh(r,"transitionend",function(e){var t;"height"===e.raw().propertyName&&(t=Za(r),o.run(function(e){e.setViewportOffset(t)}),a(),c())}),Kh(r,"touchstart",function(e){var t;o.run(function(e){e.highlightSelection()}),t=e,o.run(function(e){e.onToolbarTouch(t)}),n.onTouchToolstrip()}),qh(n.body(),"touchstart",function(e){u(),n.onTouchContent(),s.fireTouchstart(e)}),s.onTouchmove(),s.onTouchend(),qh(n.body(),"click",function(e){e.kill()}),qh(r,"touchmove",function(){n.onToolbarScrollStart()})];return{destroy:function(){V(f,function(e){e.unbind()})}}},wb=function(e){var n=P.none(),t=[],o=function(e){r()?a(e):t.push(e)},r=function(){return n.isSome()},i=function(e){V(e,a)},a=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(function(e){n=P.some(e),i(t),t=[]}),{get:o,map:function(n){return wb(function(t){o(function(e){t(n(e))})})},isReady:r}},yb={nu:wb,pure:function(t){return wb(function(e){e(t)})}},xb=function(t){var e=function(e){var o;t((o=e,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;setTimeout(function(){o.apply(n,e)},0)}))},n=function(){return yb.nu(e)};return{map:function(o){return xb(function(n){e(function(e){var t=o(e);n(t)})})},bind:function(n){return xb(function(t){e(function(e){n(e).get(t)})})},anonBind:function(n){return xb(function(t){e(function(e){n.get(t)})})},toLazy:n,toCached:function(){var t=null;return xb(function(e){null===t&&(t=n()),t.get(e)})},get:e}},kb={nu:xb,pure:function(t){return xb(function(e){e(t)})}},Sb=function(e,t,n){return Math.abs(e-t)<=n?P.none():e<t?P.some(e+n):P.some(e-n)},Cb=function(){var s=null;return{animate:function(o,r,e,i,t,n){var a=!1,u=function(e){a=!0,t(e)};clearInterval(s);var c=function(e){clearInterval(s),u(e)};s=setInterval(function(){var n=o();Sb(n,r,e).fold(function(){clearInterval(s),u(r)},function(e){if(i(e,c),!a){var t=o();(t!==e||Math.abs(t-r)>Math.abs(n-r))&&(clearInterval(s),u(r))}})},n)}}},zb=function(t,n){return Ve([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(e){return t<=e.width&&n<=e.height?P.some(e.keyboard):P.none()}).getOr({portrait:n/5,landscape:t/4})},Ob=function(e){var t,n=Qh(e).isPortrait(),o=zb((t=e).screen.width,t.screen.height),r=n?o.portrait:o.landscape;return(n?e.screen.height:e.screen.width)-e.innerHeight>r?0:r},Tb=function(e,t){var n=wn.owner(e).dom().defaultView;return Za(e)+Za(t)-Ob(n)},Mb=Tb,Hb=function(e,t,n){var o=Tb(t,n),r=Za(t)+Za(n)-o;Ka.set(e,"padding-bottom",r+"px")},Ab=me([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),Eb="data-"+Ia.resolve("position-y-fixed"),Vb="data-"+Ia.resolve("y-property"),Db="data-"+Ia.resolve("scrolling"),Bb="data-"+Ia.resolve("last-window-height"),Rb=function(e){return uv(e,Eb)},Fb=function(e,t){var n=Un.get(e,Vb);return Ab.fixed(e,n,t)},Ib=function(e,t){return Ab.scroller(e,t)},_b=function(e){var t=Rb(e);return("true"===Un.get(e,Db)?Ib:Fb)(e,t)},Lb=function(e,t,n){var o=wn.owner(e).dom().defaultView.innerHeight;return Un.set(e,Bb,o+"px"),o-t-n},Nb=function(e){var t=uu(e,"["+Eb+"]");return E(t,_b)},Pb=function(o,r,i,a){var e,t,n,u,c,s,l,f,d=wn.owner(o).dom().defaultView,m=(f=Un.get(l=i,"style"),Ka.setAll(l,{position:"absolute",top:"0px"}),Un.set(l,Eb,"0px"),Un.set(l,Vb,"top"),{restore:function(){Un.set(l,"style",f||""),Un.remove(l,Eb),Un.remove(l,Vb)}}),g=Za(i),h=Za(a),v=Lb(o,g,h),p=(n=g,u=v,s=Un.get(c=o,"style"),Th.register(c),Ka.setAll(c,{position:"absolute",height:u+"px",width:"100%",top:n+"px"}),Un.set(c,Eb,n+"px"),Un.set(c,Db,"true"),Un.set(c,Vb,"top"),{restore:function(){Th.deregister(c),Un.set(c,"style",s||""),Un.remove(c,Eb),Un.remove(c,Db),Un.remove(c,Vb)}}),b=(t=Un.get(e=a,"style"),Ka.setAll(e,{position:"absolute",bottom:"0px"}),Un.set(e,Eb,"0px"),Un.set(e,Vb,"bottom"),{restore:function(){Un.set(e,"style",t||""),Un.remove(e,Eb),Un.remove(e,Vb)}}),w=!0,y=function(){var e=d.innerHeight;return uv(o,Bb)<e},x=function(){if(w){var e=Za(i),t=Za(a),n=Lb(o,e,t);Un.set(o,Eb,e+"px"),Ka.set(o,"height",n+"px"),Ka.set(a,"bottom",-(e+n+t)+"px"),Hb(r,o,a)}};return Hb(r,o,a),{setViewportOffset:function(e){Un.set(o,Eb,e+"px"),x()},isExpanding:y,isShrinking:k(y),refresh:x,restore:function(){w=!1,m.restore(),p.restore(),b.restore()}}},jb=Rb,Ub=Cb(),Wb="data-"+Ia.resolve("last-scroll-top"),Gb=function(e){var t=Ka.getRaw(e,"top").getOr("0");return parseInt(t,10)},Xb=function(e){return parseInt(e.dom().scrollTop,10)},Yb=function(e,t){var n=t+jb(e)+"px";Ka.set(e,"top",n)},$b=function(n,o,r){return kb.nu(function(e){var t=f(Xb,n);Ub.animate(t,o,15,function(e){n.dom().scrollTop=e,Ka.set(n,"top",Gb(n)+15+"px")},function(){n.dom().scrollTop=o,Ka.set(n,"top",r+"px"),e(o)},10)})},qb=function(r,i){return kb.nu(function(e){var t=f(Xb,r);Un.set(r,Wb,t());var n=Math.abs(i-t()),o=Math.ceil(n/10);Ub.animate(t,i,o,function(e,t){uv(r,Wb)!==r.dom().scrollTop?t(r.dom().scrollTop):(r.dom().scrollTop=e,Un.set(r,Wb,e))},function(){r.dom().scrollTop=i,Un.set(r,Wb,i),e(i)},10)})},Kb=function(i,a){return kb.nu(function(e){var t=f(Gb,i),n=function(e){Ka.set(i,"top",e+"px")},o=Math.abs(a-t()),r=Math.ceil(o/10);Ub.animate(t,a,r,n,function(){n(a),e(a)},10)})},Jb=function(t,n,o){var r=wn.owner(t).dom().defaultView;return kb.nu(function(e){Yb(t,o),Yb(n,o),r.scrollTo(0,o),e(o)})},Qb=function(e,t,n,o,r){var i=Mb(t,n),a=f(hb,e);i<o||i<r?qb(t,t.dom().scrollTop-i+r).get(a):o<0&&qb(t,t.dom().scrollTop+o).get(a)},Zb=function(a,e){return e(function(o){var r=[],i=0;0===a.length?o([]):V(a,function(e,t){var n;e.get((n=t,function(e){r[n]=e,++i>=a.length&&o(r)}))})})},ew=function(e,c){return e.fold(function(e,t,n){return o=e,r=t,a=c+(i=n),Ka.set(o,r,a+"px"),kb.pure(i);var o,r,i,a},function(e,t){return n=e,r=c+(o=t),i=Ka.getRaw(n,"top").getOr(o),a=r-parseInt(i,10),u=n.dom().scrollTop+a,$b(n,u,r);var n,o,r,i,a,u})},tw=function(e,t){var n=Nb(e),o=E(n,function(e){return ew(e,t)});return Zb(o,kb.nu)},nw=function(t,n,e,o,r,i){var a=function s(n){var o=Ae(yb.pure({}));return{start:function(t){var e=yb.nu(function(e){return n(t).get(e)});o.set(e)},idle:function(e){o.get().get(function(){e()})}}}(function(e){return Jb(t,n,e)}),u=gp(function(){a.idle(function(){tw(e,o.pageYOffset).get(function(){var e;(e=Wv(i),P.from(e[0]).bind(function(e){var t=e.top()-n.dom().scrollTop;return t>o.innerHeight+5||t<-5?P.some({top:U(t),bottom:U(t+e.height())}):P.none()})).each(function(e){n.dom().scrollTop=n.dom().scrollTop+e.top()}),a.start(0),r.refresh()})})},1e3),c=qh(Yt.fromDom(o),"scroll",function(){o.pageYOffset<0||u.throttle()});return tw(e,o.pageYOffset).get(b),{unbind:c.unbind}},ow=function(e){var n=e.cWin(),t=e.ceBody(),o=e.socket(),r=e.toolstrip(),i=e.toolbar(),a=e.contentElement(),u=e.keyboardType(),c=e.outerWindow(),s=e.dropup(),l=Pb(o,t,r,s),f=u(e.outerBody(),n,go.body(),a,r,i),d=Zh(c,{onChange:N,onReady:l.refresh});d.onAdjustment(function(){l.refresh()});var m=qh(Yt.fromDom(c),"resize",function(){l.isExpanding()&&l.refresh()}),g=nw(r,o,e.outerBody(),c,l,n),h=function p(n,t){var e=n.document,o=Yt.fromTag("div");Pi.add(o,Ia.resolve("unfocused-selections")),Sn.append(Yt.fromDom(e.documentElement),o);var r=qh(o,"touchstart",function(e){e.prevent(),vb(n,t),a()}),i=function(e){var t=Yt.fromTag("span");return Ag(t,[Ia.resolve("layer-editor"),Ia.resolve("unfocused-selection")]),Ka.setAll(t,{left:e.left()+"px",top:e.top()+"px",width:e.width()+"px",height:e.height()+"px"}),t},a=function(){Tn.empty(o)};return{update:function(){a();var e=Wv(n),t=E(e,i);zn(o,t)},isActive:function(){return 0<wn.children(o).length},destroy:function(){r.unbind(),Tn.remove(o)},clear:a}}(n,a),v=function(){h.clear()};return{toEditing:function(){f.toEditing(),v()},toReading:function(){f.toReading()},onToolbarTouch:function(e){f.onToolbarTouch(e)},refreshSelection:function(){h.isActive()&&h.update()},clearSelection:v,highlightSelection:function(){h.update()},scrollIntoView:function(e,t){Qb(n,o,s,e,t)},updateToolbarPadding:N,setViewportOffset:function(e){l.setViewportOffset(e),Kb(o,e).get(b)},syncHeight:function(){Ka.set(a,"height",a.dom().contentWindow.document.body.scrollHeight+"px")},refreshStructure:l.refresh,destroy:function(){l.restore(),d.destroy(),g.unbind(),m.unbind(),f.destroy(),h.destroy(),gb(go.body(),Ji)}}},rw=function(o,e){var r=dp(),i=ag(),a=ag(),u=ig(),c=ig();return{enter:function(){e.hide();var n=Yt.fromDom(document);ip.getActiveApi(o.editor).each(function(e){i.set({socketHeight:Ka.getRaw(o.socket,"height"),iframeHeight:Ka.getRaw(e.frame(),"height"),outerScroll:document.body.scrollTop}),a.set({exclusives:Op.exclusive(n,"."+Th.scrollable())}),Pi.add(o.container,Ia.resolve("fullscreen-maximized")),lp(o.container,e.body()),r.maximize(),Ka.set(o.socket,"overflow","scroll"),Ka.set(o.socket,"-webkit-overflow-scrolling","touch"),Ki(e.body());var t=en(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);u.set(ow(t({cWin:e.win(),ceBody:e.body(),socket:o.socket,toolstrip:o.toolstrip,toolbar:o.toolbar,dropup:o.dropup.element(),contentElement:e.frame(),cursor:N,outerBody:o.body,outerWindow:o.win,keyboardType:pb.stubborn,isScrolling:function(){return a.get().exists(function(e){return e.socket.isScrolling()})}}))),u.run(function(e){e.syncHeight()}),c.set(bb(e,u,o.toolstrip,o.socket,o.dropup))})},refreshStructure:function(){u.run(function(e){e.refreshStructure()})},exit:function(){r.restore(),c.clear(),u.clear(),e.show(),i.on(function(e){e.socketHeight.each(function(e){Ka.set(o.socket,"height",e)}),e.iframeHeight.each(function(e){Ka.set(o.editor.getFrame(),"height",e)}),document.body.scrollTop=e.scrollTop}),i.clear(),a.on(function(e){e.exclusives.unbind()}),a.clear(),Pi.remove(o.container,Ia.resolve("fullscreen-maximized")),fp(),Th.deregister(o.toolbar),Ka.remove(o.socket,"overflow"),Ka.remove(o.socket,"-webkit-overflow-scrolling"),Ji(o.editor.getFrame()),ip.getActiveApi(o.editor).each(function(e){e.clearSelection()})}}},iw=function(e){var t=rr("Getting IosWebapp schema",vp,e);Ka.set(t.toolstrip,"width","100%"),Ka.set(t.container,"position","relative");var n=Ug(hp(function(){t.setReadOnly(t.readOnlyOnInit()),o.enter()},t.translate));t.alloy.add(n);var o=rw(t,{show:function(){t.alloy.add(n)},hide:function(){t.alloy.remove(n)}});return{setReadOnly:t.setReadOnly,refreshStructure:o.refreshStructure,enter:o.enter,exit:o.exit,destroy:N}},aw=tinymce.util.Tools.resolve("tinymce.EditorManager"),uw=function(e){var t=ze(e.settings,"skin_url").fold(function(){return aw.baseURL+"/skins/oxide"},function(e){return e});return{content:t+"/content.mobile.min.css",ui:t+"/skin.mobile.min.css"}},cw=function(e,t,n){e.system().broadcastOn([na.formatChanged()],{command:t,state:n})},sw=function(o,e){var t=ae(e.formatter.get());V(t,function(t){e.formatter.formatChanged(t,function(e){cw(o,t,e)})}),V(["ul","ol"],function(n){e.selection.selectorChanged(n,function(e,t){cw(o,n,e)})})},lw=(U(["x-small","small","medium","large","x-large"]),function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}}),fw=U("toReading"),dw=U("toEditing"),mw=function(m){return{getNotificationManagerImpl:function(){return{open:b,close:N,reposition:N,getArgs:b}},renderUI:function(e){var t=uw(m);0==(!1===m.settings.skin)?(m.contentCSS.push(t.content),ea.DOM.styleSheetLoader.load(t.ui,lw(m))):lw(m)();var n=function(){m.fire("scrollIntoView")},o=Yt.fromTag("div"),s=zt.detect().os.isAndroid()?function u(e){var t=mb({classes:[Ia.resolve("android-container")]}),n=Tp(),o=ig(),r=Ap(o),i=Ep(),a=Kp(N,e);return t.add(n.wrapper()),t.add(i),t.add(a.component()),{system:U(t),element:t.element,init:function(e){o.set(pp(e))},exit:function(){o.run(function(e){e.exit(),fh.remove(i,r)})},setToolbarGroups:function(e){var t=n.createGroups(e);n.setGroups(t)},setContextToolbar:function(e){var t=n.createGroups(e);n.setContextToolbar(t)},focusToolbar:function(){n.focus()},restoreToolbar:function(){n.restoreToolbar()},updateMode:function(e){Vp(i,r,e,t.root())},socket:U(i),dropup:U(a)}}(n):function c(e){var t=mb({classes:[Ia.resolve("ios-container")]}),n=Tp(),o=ig(),r=Ap(o),i=Ep(),a=Kp(function(){o.run(function(e){e.refreshStructure()})},e);return t.add(n.wrapper()),t.add(i),t.add(a.component()),{system:U(t),element:t.element,init:function(e){o.set(iw(e))},exit:function(){o.run(function(e){fh.remove(i,r),e.exit()})},setToolbarGroups:function(e){var t=n.createGroups(e);n.setGroups(t)},setContextToolbar:function(e){var t=n.createGroups(e);n.setContextToolbar(t)},focusToolbar:function(){n.focus()},restoreToolbar:function(){n.restoreToolbar()},updateMode:function(e){Vp(i,r,e,t.root())},socket:U(i),dropup:U(a)}}(n),r=Yt.fromDom(e.targetNode);Sn.after(r,o),ko(o,s.system());var i=e.targetNode.ownerDocument.defaultView,l=Zh(i,{onChange:function(){s.system().broadcastOn([na.orientationChanged()],{width:ev(i)})},onReady:N}),f=function(e,t,n,o){!1===o&&m.selection.collapse();var r=a(e,t,n);s.setToolbarGroups(!0===o?r.readOnly:r.main),m.setMode(!0===o?"readonly":"design"),m.fire(!0===o?fw():dw()),s.updateMode(o)},a=function(e,t,n){var o=e.get(),r={readOnly:o.backToMask.concat(t.get()),main:o.backToMask.concat(n.get())};return r},d=function(e,t){return m.on(e,t),{unbind:function(){m.off(e)}}};return m.on("init",function(){s.init({editor:{getFrame:function(){return Yt.fromDom(m.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:N}},onToReading:function(e){return d(fw(),e)},onToEditing:function(e){return d(dw(),e)},onScrollToCursor:function(t){return m.on("scrollIntoView",function(e){t(e)}),{unbind:function(){m.off("scrollIntoView"),l.destroy()}}},onTouchToolstrip:function(){n()},onTouchContent:function(){var e,t=Yt.fromDom(m.editorContainer.querySelector("."+Ia.resolve("toolbar")));(e=t,Zi(e).bind(function(e){return s.system().getByDom(e).toOption()})).each(uo),s.restoreToolbar(),n()},onTapContent:function(e){var t=e.target();"img"===_n.name(t)?(m.selection.select(t.dom()),e.kill()):"a"===_n.name(t)&&s.system().getByDom(Yt.fromDom(m.editorContainer)).each(function(e){Gi.isAlpha(e)&&ta(t.dom())})}},container:Yt.fromDom(m.editorContainer),socket:Yt.fromDom(m.contentAreaContainer),toolstrip:Yt.fromDom(m.editorContainer.querySelector("."+Ia.resolve("toolstrip"))),toolbar:Yt.fromDom(m.editorContainer.querySelector("."+Ia.resolve("toolbar"))),dropup:s.dropup(),alloy:s.system(),translate:N,setReadOnly:function(e){f(c,u,a,e)},readOnlyOnInit:function(){return!1}});var n=function(){s.dropup().disappear(function(){s.system().broadcastOn([na.dropupDismissed()],{})})},e={label:"The first group",scrollable:!1,items:[Fl.forToolbar("back",function(){m.selection.collapse(),s.exit()},{})]},t={label:"Back to read only",scrollable:!1,items:[Fl.forToolbar("readonly-back",function(){f(c,u,a,!0)},{})]},o=Ph(s,m),r=jh(m.settings,o),i={label:"The extra group",scrollable:!1,items:[]},a=Ae([{label:"the action group",scrollable:!0,items:r},i]),u=Ae([{label:"The read only mode group",scrollable:!0,items:[]},i]),c=Ae({backToMask:[e],backToReadOnly:[t]});sw(s,m)}),{iframeContainer:s.socket().element().dom(),editorContainer:s.element().dom()}}}};ro.add("mobile",mw);var gw=function(t,e){return(n=e,Pr.closest(n,function(e){if(!_n.isElement(e))return!1;var t=Un.get(e,"id");return t!==undefined&&-1<t.indexOf("aria-owns")}).bind(function(e){var t=Un.get(e,"id"),n=wn.owner(e);return fu(n,'[aria-owns="'+t+'"]')})).exists(function(e){return hw(t,e)});var n},hw=function(t,e){return Xi(e,function(e){return dn(e,t.element())},U(!1))||gw(t,e)},vw=Object.freeze({exhibit:function(e,t){return ci({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}}),pw=function(e,t){var n=t||Yt.fromDom(document.documentElement);return Pr.ancestor(e,f(dn,n)).isSome()},bw=function(e){var t=e.dom();return t===t.window&&e instanceof Window?e:_n.isDocument(e)?t.defaultView||t.parentWindow:null},ww=function(e,t){return e!==undefined?e:t!==undefined?t:0},yw=function(e){var t,n=e.dom(),o=n.ownerDocument,r=o.body,i=Yt.fromDom(o.documentElement);return r===n?cf(r.offsetLeft,r.offsetTop):pw(e,i)?(t=n.getBoundingClientRect(),cf(t.left,t.top)):cf(0,0)},xw={absolute:function(e){var t=e.dom().ownerDocument,n=t.body,o=bw(Yt.fromDom(t)),r=t.documentElement,i=ww(o.pageYOffset,r.scrollTop),a=ww(o.pageXOffset,r.scrollLeft),u=ww(r.clientTop,n.clientTop),c=ww(r.clientLeft,n.clientLeft);return yw(e).translate(a-c,i-u)},relative:function(e){var t=e.dom();return cf(t.offsetLeft,t.offsetTop)},viewport:yw},kw=(zt.detect().browser.isSafari(),function(e){var t=e!==undefined?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return cf(n,o)}),Sw=kw,Cw=en(["x","y","width","height","maxHeight","direction","classes","label","candidateYforTest"],[]),zw=$t("position","left","top","right","bottom"),Ow=me([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Tw=Ow.southeast,Mw=Ow.southwest,Hw=Ow.northeast,Aw=Ow.northwest,Ew=Ow.south,Vw=Ow.north,Dw=Ow.east,Bw=Ow.west,Rw=$t("point","width","height"),Fw=$t("x","y","width","height"),Iw=function(e,t,n,o){return{x:U(e),y:U(t),width:U(n),height:U(o),right:U(e+n),bottom:U(t+o)}},_w=function(o,e){return o.view(e).fold(U([]),function(e){var t=o.owner(e),n=_w(o,t);return[e].concat(n)})},Lw=Object.freeze({view:function(e){return(e.dom()===document?P.none():P.from(e.dom().defaultView.frameElement)).map(Yt.fromDom)},owner:function(e){return wn.owner(e)}}),Nw=function(o){var e,t,n,r,i=Yt.fromDom(document),a=Sw(i);return(e=o,n=(t=Lw).owner(e),r=_w(t,n),P.some(r)).fold(f(xw.absolute,o),function(e){var t=xw.viewport(o),n=B(e,function(e,t){var n=xw.viewport(t);return{left:e.left+n.left(),top:e.top+n.top()}},{left:0,top:0});return cf(n.left+t.left()+a.left(),n.top+t.top()+a.top())})},Pw=function(){var e=window.innerWidth,t=window.innerHeight,n=Yt.fromDom(document),o=Sw(n);return Iw(o.left(),o.top(),e,t)},jw=me([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Uw=function(e,t,n,o,r,i){var a,u,c,s,l,f,d,m,g,h=t.x()-n,v=t.y()-o,p=r-(h+t.width()),b=i-(v+t.height()),w=P.some(h),y=P.some(v),x=P.some(p),k=P.some(b),S=P.none();return a=t.direction(),u=function(){return zw(e,w,y,S,S)},c=function(){return zw(e,S,y,x,S)},s=function(){return zw(e,w,S,S,k)},l=function(){return zw(e,S,S,x,k)},f=function(){return zw(e,w,y,S,S)},d=function(){return zw(e,w,S,S,k)},m=function(){return zw(e,w,y,S,S)},g=function(){return zw(e,S,y,x,S)},a.fold(u,c,s,l,f,d,m,g)},Ww=function(e,t){var n=f(Nw,t),o=e.fold(n,n,function(){var e=Sw();return Nw(t).translate(-e.left(),-e.top())}),r=yf(t),i=eu(t);return Iw(o.left(),o.top(),r,i)},Gw=(jw.none,jw.relative),Xw=jw.fixed,Yw=$t("anchorBox","origin"),$w=me([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),qw=function(e,I,_,L,N){var P=_.width(),j=_.height(),o=function(e,o,r,i){var t,n,a,u,c,s,l,f,d,m,g,h,v,p,b,w,y,x,k,S,C,z,O,T,M,H,A,E,V,D,B,R,F=e(I,_,L);return(n=P,a=j,u=N,d=(t=F).x(),m=t.y(),g=t.bubble().offset().left(),h=t.bubble().offset().top(),v=u.x(),p=u.y(),b=u.width(),w=u.height(),S=p<=(x=m+h),C=(k=v<=(y=d+g))&&S,z=y+n<=v+b&&x+a<=p+w,O=k?Math.min(n,v+b-y):Math.abs(v-(y+n)),T=S?Math.min(a,p+w-x):Math.abs(p-(x+a)),M=u.width()-n,H=Math.max(0,y),A=Math.min(H,M),V=U((E=S?x:x+(a-T))+T-p),D=U(p+w-E),c=t.direction(),l=s=D,f=V,B=c.fold(s,s,f,f,s,f,l,l),R=Cw({x:A,y:E,width:O,height:T,maxHeight:B,direction:t.direction(),classes:{on:t.bubble().classesOn(),off:t.bubble().classesOff()},label:t.label(),candidateYforTest:x}),C&&z?$w.fit(R):$w.nofit(R,O,T)).fold($w.fit,function(e,t,n){return r<t||i<n?$w.nofit(e,t,n):$w.nofit(o,r,i)})};return R(e,function(e,t){var n=f(o,t);return e.fold($w.fit,n)},$w.nofit(Cw({x:I.x(),y:I.y(),width:_.width(),height:_.height(),maxHeight:_.height(),direction:Tw(),classes:[],label:"none",candidateYforTest:I.y()}),-1,-1)).fold(b,b)},Kw=function(e,t,n,o){Ka.remove(t,"max-height");var r,i={width:U(yf(r=t)),height:U(eu(r))};return qw(o.preference(),e,i,n,o.bounds())},Jw=function(e,t,n){var o,r,i=function(e){return e+"px"},a=(o=n.origin(),r=t,o.fold(function(){return zw("absolute",P.some(r.x()),P.some(r.y()),P.none(),P.none())},function(e,t,n,o){return Uw("absolute",r,e,t,n,o)},function(e,t,n,o){return Uw("fixed",r,e,t,n,o)}));Ka.setOptions(e,{position:P.some(a.position()),left:a.left().map(i),top:a.top().map(i),right:a.right().map(i),bottom:a.bottom().map(i)})},Qw=function(e,t){tu(e,Math.floor(t))},Zw=U(function(e,t){Qw(e,t),Ka.setAll(e,{"overflow-x":"hidden","overflow-y":"auto"})}),ey=U(function(e,t){Qw(e,t)}),ty=en(["bounds","origin","preference","maxHeightFunction"],[]),ny=function(e,t,n,o,r,i){var a,u,c,s,l,f=(a=i,u="maxHeightFunction",c=Zw(),a[u]===undefined?c:a[u]),d=e.anchorBox(),m=e.origin(),g=ty({bounds:(s=m,l=r,l.fold(function(){return s.fold(Pw,Pw,Iw)},function(e){return s.fold(e,e,Iw)})),origin:m,preference:o,maxHeightFunction:f});oy(d,t,n,g)},oy=function(e,t,n,o){var r,i,a,u,c=Kw(e,t,n,o);Jw(t,c,o),r=t,i=c.classes(),Eg(r,i.off),Ag(r,i.on),a=t,u=c,o.maxHeightFunction()(a,u.maxHeight())},ry=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],iy=function(e,t,n){var r=function(e){return ze(n,e).getOr([])},o=function(e,t,n){var o=$(ry,n);return{offset:function(){return cf(e,t)},classesOn:function(){return W(n,r)},classesOff:function(){return W(o,r)}}};return{southeast:function(){return o(-e,t,["top","alignLeft"])},southwest:function(){return o(e,t,["top","alignRight"])},south:function(){return o(-e/2,t,["top","alignCentre"])},northeast:function(){return o(-e,-t,["bottom","alignLeft"])},northwest:function(){return o(e,-t,["bottom","alignRight"])},north:function(){return o(-e/2,-t,["bottom","alignCentre"])},east:function(){return o(e,-t/2,["valignCentre","left"])},west:function(){return o(-e,-t/2,["valignCentre","right"])}}},ay=function(){return iy(0,0,{})},uy=$t("x","y","bubble","direction","label"),cy=function(e){return e.x()},sy=function(e,t){return e.x()+e.width()-t.width()/2},ly=function(e,t){return e.x()+e.width()-t.width()},fy=function(e,t){return e.y()-t.height()},dy=function(e){return e.y()+e.height()},my=function(e,t){return e.y()+e.height()-t.height()/2},gy=function(e,t,n){return uy(cy(e),dy(e),n.southeast(),Tw(),"layout-se")},hy=function(e,t,n){return uy(ly(e,t),dy(e),n.southwest(),Mw(),"layout-sw")},vy=function(e,t,n){return uy(cy(e),fy(e,t),n.northeast(),Hw(),"layout-ne")},py=function(e,t,n){return uy(ly(e,t),fy(e,t),n.northwest(),Aw(),"layout-nw")},by=function(e,t,n){return uy(sy(e,t),fy(e,t),n.north(),Vw(),"layout-n")},wy=function(e,t,n){return uy(sy(e,t),dy(e),n.south(),Ew(),"layout-s")},yy=function(e,t,n){return uy((o=e).x()+o.width(),my(e,t),n.east(),Dw(),"layout-e");var o},xy=function(e,t,n){return uy((o=t,e.x()-o.width()),my(e,t),n.west(),Bw(),"layout-w");var o},ky=function(){return[gy,hy,vy,py,wy,by,yy,xy]},Sy=function(){return[hy,gy,py,vy,wy,by,yy,xy]},Cy=bi(["anchorBox","bubble","overrides","layouts","placer"]),zy=function(){return Cr("layouts",[gr("onLtr"),gr("onRtl")])},Oy=function(t,e,n,o){var r=e.layouts().map(function(e){return e.onLtr()(t)}).getOr(n),i=e.layouts().map(function(e){return e.onRtl()(t)}).getOr(o);return Qu(r,i)(t)},Ty=[gr("hotspot"),zy(),va("placement",function(e,t,n,o){var r=n.hotspot(),i=Ww(o,r.element()),a=Oy(e.element(),n,ky(),Sy());return P.some(Cy({anchorBox:U(i),bubble:U(ay()),overrides:U({}),layouts:U(a),placer:P.none}))})],My=[gr("x"),gr("y"),Or("height",0),Or("width",0),Or("bubble",ay()),zy(),va("placement",function(e,t,n,o){var r=Iw(n.x(),n.y(),n.width(),n.height()),i=Oy(e.element(),n,ky(),Sy());return P.some(Cy({anchorBox:U(r),bubble:n.bubble,overrides:U({}),layouts:U(i),placer:P.none}))})],Hy=me([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Ay=function(e){return e.fold(function(e){return e},function(e,t,n){return e.translate(-t,-n)})},Ey=function(e){return e.fold(function(e){return e},function(e,t,n){return e})},Vy=function(e){return R(e,function(e,t){return e.translate(t.left(),t.top())},cf(0,0))},Dy=function(e){var t=E(e,Ey);return Vy(t)},By=Hy.screen,Ry=Hy.absolute,Fy=$t("element","offset"),Iy=function(e,t,n){var o,r,i,a=wn.owner(e.element()),u=Sw(a),c=(o=e,r=n,i=wn.defaultView(r.root()).dom(),P.from(i.frameElement).map(Yt.fromDom).filter(function(e){var t=wn.owner(e),n=wn.owner(o.element());return dn(t,n)}).map(xw.absolute)).getOr(u);return Ry(c,u.left(),u.top())},_y=$t("element","offset"),Ly=function(e,t){return _n.isText(e)?_y(e,t):function(e,t){var n=wn.children(e);if(0===n.length)return Fy(e,t);if(t<n.length)return Fy(n[t],0);var o=n[n.length-1],r=_n.isText(o)?sv(o).length:wn.children(o).length;return Fy(o,r)}(e,t)},Ny=function(e,t){return t.getSelection().getOrThunk(function(){return function(){return _v(e)}})().map(function(e){var t=Ly(e.start(),e.soffset()),n=Ly(e.finish(),e.foffset());return pv.range(t.element(),t.offset(),n.element(),n.offset())})},Py=[xr("getSelection"),gr("root"),xr("bubble"),zy(),Or("overrides",{}),Or("showAbove",!1),va("placement",function(s,e,l,f){var d=wn.defaultView(l.root()).dom(),m=Iy(s,0,l);return Ny(d,l).bind(function(e){return Pv(d,pv.exactFromRange(e)).orThunk(function(){var t=Yt.fromText("\ufeff");return Sn.before(e.start(),t),Pv(d,pv.exact(t,0,t,1)).map(function(e){return Tn.remove(t),e})}).map(function(e){var t=By(cf(Math.max(0,e.left()),Math.max(0,e.top())));return Rw(t,e.width(),e.height())})}).map(function(e){var t,n,o,r=[m,e.point()],i=(t=function(){return Dy(r)},n=function(){return Dy(r)},o=function(){return e=E(r,Ay),Vy(e);var e},f.fold(t,n,o)),a=Fw(i.left(),i.top(),e.width(),e.height()),u=Ny(d,l).bind(function(e){return _n.isElement(e.start())?P.some(e.start()):wn.parent(e.start())}).getOr(s.element()),c=Oy(u,l,l.showAbove()?[vy,py,gy,hy,by,wy]:[gy,hy,vy,py,wy,wy],l.showAbove()?[py,vy,hy,gy,by,wy]:[hy,gy,py,vy,wy,by]);return Cy({anchorBox:U(a),bubble:U(l.bubble().getOr(ay())),overrides:l.overrides,layouts:U(c),placer:P.none})})})],jy=function(e){return e.x()+e.width()},Uy=function(e,t){return e.x()-t.width()},Wy=function(e,t){return e.y()-t.height()+e.height()},Gy=function(e){return e.y()},Xy=function(e,t,n){return uy(jy(e),Gy(e),n.southeast(),Tw(),"link-layout-se")},Yy=function(e,t,n){return uy(Uy(e,t),Gy(e),n.southwest(),Mw(),"link-layout-sw")},$y=function(e,t,n){return uy(jy(e),Wy(e,t),n.northeast(),Hw(),"link-layout-ne")},qy=function(e,t,n){return uy(Uy(e,t),Wy(e,t),n.northwest(),Aw(),"link-layout-nw")},Ky=[gr("item"),zy(),va("placement",function(e,t,n,o){var r=Ww(o,n.item().element()),i=Oy(e.element(),n,[Xy,Yy,$y,qy],[Yy,Xy,qy,$y]);return P.some(Cy({anchorBox:U(r),bubble:U(ay()),overrides:U({}),layouts:U(i),placer:P.none}))})],Jy=ur("anchor",{selection:Py,hotspot:Ty,submenu:Ky,makeshift:My}),Qy=function(e,t,n,o,r){var i,a=(i=n.anchorBox(),Yw(i,t));ny(a,r.element(),n.bubble(),n.layouts(),o.getBounds(),n.overrides())},Zy=Object.freeze({position:function(t,n,e,o,r){var i=ir("positioning anchor.info",Jy,o);Ka.set(r.element(),"position","fixed");var a=Ka.getRaw(r.element(),"visibility");Ka.set(r.element(),"visibility","hidden");var u,c,s,l=n.useFixed()?Xw(0,0,window.innerWidth,window.innerHeight):(u=t,c=xw.absolute(u.element()),s=u.element().dom().getBoundingClientRect(),Gw(c.left(),c.top(),s.width,s.height));i.placement()(t,n,i,l).each(function(e){e.placer().getOr(Qy)(t,l,e,n,r)}),a.fold(function(){Ka.remove(r.element(),"visibility")},function(e){Ka.set(r.element(),"visibility",e)}),Ka.getRaw(r.element(),"left").isNone()&&Ka.getRaw(r.element(),"top").isNone()&&Ka.getRaw(r.element(),"right").isNone()&&Ka.getRaw(r.element(),"bottom").isNone()&&Ka.getRaw(r.element(),"position").is("fixed")&&Ka.remove(r.element(),"position")},getMode:function(e,t,n){return t.useFixed()?"fixed":"absolute"}}),ex=[Or("useFixed",!1),xr("getBounds")],tx=Si({fields:ex,name:"positioning",active:vw,apis:Zy}),nx=function(e,t,n,o){var r=function(t,e,n,o){n.get().each(function(e){xo(t)});var r=e.getAttachPoint()();po(r,t);var i=t.getSystem().build(o);return po(t,i),n.set(i),i}(e,t,n,o);return t.onOpen()(e,r),r},ox=function(t,n,o){o.get().each(function(e){xo(t),yo(t),n.onClose()(t,e),o.clear()})},rx=function(e,t,n){return n.isOpen()},ix=function(e,t,n){var o,r,i,a,u=t.getAttachPoint()();Ka.set(e.element(),"position",tx.getMode(u)),o=e,r="visibility",i=t.cloakVisibilityAttr(),a="hidden",Ka.getRaw(o.element(),r).fold(function(){Un.remove(o.element(),i)},function(e){Un.set(o.element(),i,e)}),Ka.set(o.element(),r,a)},ax=function(e,t,n){var o;o=e.element(),H(["top","left","right","bottom"],function(e){return Ka.getRaw(o,e).isSome()})||Ka.remove(e.element(),"position"),function(e,t,n){if(Un.has(e.element(),n)){var o=Un.get(e.element(),n);Ka.set(e.element(),t,o)}else Ka.remove(e.element(),t)}(e,"visibility",t.cloakVisibilityAttr())},ux=Object.freeze({cloak:ix,decloak:ax,open:nx,openWhileCloaked:function(e,t,n,o,r){ix(e,t,n),nx(e,t,n,o),r(),ax(e,t,n)},close:ox,isOpen:rx,isPartOf:function(t,n,e,o){return rx(0,0,e)&&e.get().exists(function(e){return n.isPartOf()(t,e,o)})},getState:function(e,t,n){return n.get()}}),cx=Object.freeze({events:function(n,o){return Ur([Xr(Rt(),function(e,t){ox(e,n,o)})])}}),sx=[da("onOpen"),da("onClose"),gr("isPartOf"),gr("getAttachPoint"),Or("cloakVisibilityAttr","data-precloak-visibility")],lx=Object.freeze({init:function(){var t=Ae(P.none()),e=U("not-implemented");return yi({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(P.none())},set:function(e){t.set(P.some(e))},get:function(e){return t.get()}})}}),fx=Si({fields:sx,name:"sandboxing",active:cx,apis:ux,state:lx}),dx=U("dismiss.popups"),mx=U("mouse.released"),gx=jo([Or("isExtraPart",U(!1)),Cr("fireEventInstead",[Or("event",Pt())])]),hx=function(e){var t=vx(e);return ya.config(t)},vx=function(e){var n=rr("Dismissal",gx,e);return{channels:Oe(dx(),{schema:jo([gr("target")]),onReceive:function(t,e){fx.isOpen(t)&&(fx.isPartOf(t,e.target())||n.isExtraPart(t,e.target())||n.fireEventInstead.fold(function(){return fx.close(t)},function(e){return io(t,e.event)}))}})}},px=Ol({name:"InlineView",configFields:[gr("lazySink"),da("onShow"),da("onHide"),ms("inlineBehaviours",[fx,ya]),Cr("fireDismissalEventInstead",[Or("event",Pt())]),Or("getRelated",P.none),Or("eventOrder",P.none)],factory:function(u,e){return te({uid:u.uid(),dom:u.dom(),behaviours:te(xi([fx.config({isPartOf:function(e,t,n){return hw(t,n)||(o=e,r=n,u.getRelated()(o).exists(function(e){return hw(e,r)}));var o,r},getAttachPoint:function(){return u.lazySink()().getOrDie()}}),hx(te({isExtraPart:U(!1)},u.fireDismissalEventInstead().map(function(e){return{fireEventInstead:{event:e.event()}}}).getOr({})))]),gs(u.inlineBehaviours())),eventOrder:u.eventOrder(),apis:{setContent:function(e,t){fx.open(e,t)},showAt:function(e,t,n){var o=u.lazySink()().getOrDie();fx.openWhileCloaked(e,n,function(){return tx.position(o,t,e)}),u.onShow()(e)},showMenuAt:function(e,t,n){var r,o,i,a=(r=u.lazySink(),o=t,i=n,vh.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,onEscape:function(){return P.some(!0)},onExecute:function(){return P.some(!0)},onOpenMenu:function(e,t){tx.position(r().getOrDie(),o,t)},onOpenSubmenu:function(e,t,n){var o=r().getOrDie();tx.position(o,{anchor:"submenu",item:t},n)}}));fx.open(e,a),u.onShow()(e)},hide:function(e){fx.close(e),u.onHide()(e)},getContent:function(e){return fx.getState(e)},isOpen:fx.isOpen}})},apis:{showAt:function(e,t,n,o){e.showAt(t,n,o)},showMenuAt:function(e,t,n,o){e.showMenuAt(t,n,o)},hide:function(e,t){e.hide(t)},isOpen:function(e,t){return e.isOpen(t)},getContent:function(e,t){return e.getContent(t)},setContent:function(e,t,n){e.setContent(t,n)}}}),bx={"icon-accessibility-check":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-accessibility-check" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm8 7h-5v12a1 1 0 0 1-2 0v-5a1 1 0 0 0-2 0v5a1 1 0 0 1-2 0V9H4a1 1 0 1 1 0-2h16a1 1 0 0 1 0 2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-align-center":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-align-center" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14a1 1 0 0 1 0 2H5a1 1 0 1 1 0-2zm3 4h8a1 1 0 0 1 0 2H8a1 1 0 1 1 0-2zm0 8h8a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zm-3-4h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-justify":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-align-justify" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14a1 1 0 0 1 0 2H5a1 1 0 1 1 0-2zm0 4h14a1 1 0 0 1 0 2H5a1 1 0 1 1 0-2zm0 4h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm0 4h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-left":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-align-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14a1 1 0 0 1 0 2H5a1 1 0 1 1 0-2zm0 4h8a1 1 0 0 1 0 2H5a1 1 0 1 1 0-2zm0 8h8a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm0-4h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-right":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-align-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14a1 1 0 0 1 0 2H5a1 1 0 1 1 0-2zm6 4h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zm0 8h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zm-6-4h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-background-color":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-background-color" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle" opacity=".08" d="M3 3h18v16H3z"/><path id="color" d="M3 19h18v3H3z"/><path d="M8.66 17h-.738a.5.5 0 0 1-.479-.644l2.7-9A.5.5 0 0 1 10.622 7h2.756a.5.5 0 0 1 .479.356l2.7 9a.5.5 0 0 1-.479.644h-.738a.5.5 0 0 1-.479-.355l-.691-2.29A.5.5 0 0 0 13.69 14H10.31a.5.5 0 0 0-.479.355l-.691 2.29A.5.5 0 0 1 8.66 17zm2.67-7.645l-.604 2a.5.5 0 0 0 .479.645h1.59a.5.5 0 0 0 .479-.645l-.604-2A.5.5 0 0 0 12.19 9h-.382a.5.5 0 0 0-.479.355z" id="shape"/></g></svg>',"icon-bold":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-bold" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.761 19c-.253 0-.44-.06-.56-.18-.12-.12-.18-.307-.18-.56l-.02-12.52c0-.267.08-.457.2-.57.12-.113.307-.17.56-.17h5.019c1.56 0 2.723.317 3.49.95.767.633 1.15 1.497 1.15 2.59 0 .667-.21 1.283-.63 1.85-.42.567-.937.963-1.55 1.19l.02.08c.387.067.793.247 1.22.54.427.293.787.677 1.08 1.15.293.473.44 1.01.44 1.61 0 1.32-.427 2.323-1.28 3.01-.853.687-2.12 1.03-3.8 1.03H7.761zm4.969-8.26c.687 0 1.237-.17 1.65-.51.414-.34.621-.77.621-1.29 0-1.147-.757-1.72-2.271-1.72H9.28v3.52h3.45zm.59 6.02c.725 0 1.283-.17 1.674-.51.39-.34.586-.823.586-1.45 0-.587-.223-1.037-.67-1.35-.446-.313-1.088-.47-1.925-.47H9.28v3.78h4.04z" id="B"/></g></svg>',"icon-bookmark":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-bookmark" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 4v17l6-4 6 4V4a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-border-width":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-border-width" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 14.844h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zM4.5 18.5h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm.5-8.344h14a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zM5 4.5h14a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" id="shape"/></g></svg>',"icon-brightness":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-brightness" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 17c.281 0 .518.096.71.29.194.192.29.429.29.71v1a.966.966 0 0 1-.29.71.966.966 0 0 1-.71.29.966.966 0 0 1-.71-.29A.966.966 0 0 1 11 19v-1c0-.281.096-.518.29-.71A.966.966 0 0 1 12 17zm0-10a.966.966 0 0 1-.71-.29A.966.966 0 0 1 11 6V5c0-.281.096-.518.29-.71A.966.966 0 0 1 12 4c.281 0 .518.096.71.29.194.192.29.429.29.71v1a.966.966 0 0 1-.29.71A.966.966 0 0 1 12 7zm7 4c.281 0 .518.096.71.29.194.192.29.429.29.71a.966.966 0 0 1-.29.71.966.966 0 0 1-.71.29h-1a.966.966 0 0 1-.71-.29A.966.966 0 0 1 17 12c0-.281.096-.518.29-.71A.966.966 0 0 1 18 11h1zM7 12a.966.966 0 0 1-.29.71A.966.966 0 0 1 6 13H5a.966.966 0 0 1-.71-.29A.966.966 0 0 1 4 12c0-.281.096-.518.29-.71A.966.966 0 0 1 5 11h1c.281 0 .518.096.71.29.194.192.29.429.29.71zm9.953 3.531l.703.719a.92.92 0 0 1 .297.695.97.97 0 0 1-.297.711.97.97 0 0 1-.71.297.92.92 0 0 1-.696-.297l-.719-.703a.997.997 0 0 1-.281-.71c0-.277.094-.514.281-.712a.997.997 0 0 1 .711-.281c.276 0 .513.094.711.281zM7.047 8.47l-.703-.719a.92.92 0 0 1-.297-.695.97.97 0 0 1 .297-.711.97.97 0 0 1 .71-.297.92.92 0 0 1 .696.297l.719.703a.997.997 0 0 1 .281.71.997.997 0 0 1-.281.712.997.997 0 0 1-.711.281.997.997 0 0 1-.711-.281zm9.906 0a.997.997 0 0 1-.71.281.997.997 0 0 1-.712-.281.997.997 0 0 1-.281-.711c0-.276.094-.513.281-.711l.719-.703a.92.92 0 0 1 .695-.297.97.97 0 0 1 .711.297.97.97 0 0 1 .297.71.92.92 0 0 1-.297.696l-.703.719zM7.047 15.53a.997.997 0 0 1 .71-.281c.277 0 .514.094.712.281a.997.997 0 0 1 .281.711.997.997 0 0 1-.281.711l-.719.703a.92.92 0 0 1-.695.297.97.97 0 0 1-.711-.297.97.97 0 0 1-.297-.71.92.92 0 0 1 .297-.696l.703-.719zM12 8c.552 0 1.073.104 1.563.313a4.065 4.065 0 0 1 2.124 2.124c.209.49.313 1.01.313 1.563 0 .552-.104 1.073-.313 1.563a4.065 4.065 0 0 1-2.124 2.124c-.49.209-1.01.313-1.563.313a3.949 3.949 0 0 1-1.563-.313 4.065 4.065 0 0 1-2.124-2.124A3.949 3.949 0 0 1 8 12c0-.552.104-1.073.313-1.563a4.065 4.065 0 0 1 2.124-2.124A3.949 3.949 0 0 1 12 8zm0 6.5c.688 0 1.276-.245 1.766-.734.49-.49.734-1.078.734-1.766s-.245-1.276-.734-1.766A2.407 2.407 0 0 0 12 9.5c-.688 0-1.276.245-1.766.734A2.407 2.407 0 0 0 9.5 12c0 .688.245 1.276.734 1.766.49.49 1.078.734 1.766.734z" id="shape"/></g></svg>',"icon-browse":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-browse" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19 4a2 2 0 0 1 2 2v12c0 1.1-.9 2-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h14zm-8 9.414l-2.293 2.293a1 1 0 1 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L13 13.414V20a1 1 0 0 1-2 0v-6.586z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-cancel":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-cancel" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4.552A7.448 7.448 0 1 1 4.552 12 7.456 7.456 0 0 1 12 4.552zM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm-.02 7.923l2.786-2.786 1.097 1.097-2.786 2.786 2.71 2.71-1.097 1.097-2.71-2.71-2.651 2.651-1.097-1.097 2.65-2.65-2.726-2.726 1.097-1.098 2.726 2.726z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-character-count":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-character-count" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 11.5h16v1H4v-1zm4.75-6.75v5.297H7.703v-4.25H6.656V4.75H8.75zm2.203 3.406V9h2.094v1.047h-3.14v-2.39l2.093-1v-.86H9.906V4.75h3.14v2.406l-2.093 1zm6.39-3.406v5.297h-3.187V9h2.14V7.953h-2.14v-1.11h2.14V5.798h-2.14V4.75h3.188zM5.798 16.406c.031-.458.185-.791.46-1 .277-.208.69-.312 1.243-.312.302 0 .565.036.79.11.223.072.408.171.554.296.156.125.263.27.32.438.057.166.086.385.086.656v1.75c0 .208.005.343.016.406.01.063.057.146.14.25H8.25a1.83 1.83 0 0 0-.047-.148 1.83 1.83 0 0 1-.047-.149 1.691 1.691 0 0 1-.515.305 1.832 1.832 0 0 1-.594.086c-.427 0-.766-.112-1.016-.336a1.093 1.093 0 0 1-.375-.852c0-.354.12-.633.36-.836.24-.203.635-.34 1.187-.414l.594-.11a.766.766 0 0 0 .273-.085.182.182 0 0 0 .086-.164c0-.094-.052-.175-.156-.242-.104-.068-.255-.102-.453-.102a.91.91 0 0 0-.477.11.493.493 0 0 0-.226.343H5.797zm2.297.797c-.042.021-.094.042-.156.063a.75.75 0 0 1-.235.03l-.406.11c-.198.042-.346.102-.445.18-.1.078-.149.164-.149.258 0 .125.047.224.14.297.095.073.23.109.407.109.177 0 .339-.04.484-.117a.887.887 0 0 0 .36-.383v-.547zm2-3.453h1.156v1.75c.177-.125.346-.214.508-.266a1.75 1.75 0 0 1 .539-.078c.5 0 .9.18 1.203.54.302.359.453.825.453 1.398 0 .604-.159 1.107-.476 1.508-.318.4-.727.601-1.227.601-.25 0-.45-.042-.602-.125a1.45 1.45 0 0 1-.445-.422v.438h-1.11V13.75zm1.11 3.344c0 .333.075.601.226.804.15.204.34.305.57.305.23 0 .42-.101.57-.305.151-.203.227-.47.227-.804 0-.344-.07-.612-.211-.805A.685.685 0 0 0 12 16c-.23 0-.42.102-.57.305-.151.203-.227.466-.227.789zm6.093-.5a.59.59 0 0 0-.211-.399c-.12-.099-.284-.148-.492-.148a.685.685 0 0 0-.586.289c-.14.193-.211.466-.211.82 0 .375.07.66.21.852.141.193.337.289.587.289.208 0 .372-.052.492-.156.12-.105.19-.266.21-.485l1.11.047c-.083.469-.289.836-.617 1.102-.328.265-.742.398-1.242.398-.573 0-1.031-.185-1.375-.555-.344-.37-.516-.851-.516-1.445 0-.625.175-1.122.524-1.492.349-.37.82-.555 1.414-.555.5 0 .911.13 1.234.39.323.261.495.631.516 1.11h-1.047v-.062z" id="shape"/></g></svg>',"icon-checkmark":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-checkmark" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18.168 5.445a1 1 0 0 1 1.664 1.11l-8 12a1 1 0 0 1-1.536.156L5.3 13.762a1 1 0 1 1 1.407-1.42l4.135 4.093 7.327-10.99z" id="Shape-Copy" fill-rule="nonzero"/></g></svg>',"icon-chevron-down":'<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><g id="icon-chevron-down" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8.667 2.217a.773.773 0 0 1 1.1.02c.303.313.311.818.02 1.141L5.56 7.76c-.31.32-.81.32-1.12 0L.213 3.378a.843.843 0 0 1 .02-1.14.773.773 0 0 1 1.1-.02L5 6.017l3.667-3.8z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-left":'<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><g id="icon-chevron-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.781 1.335L3.98 5.002l3.801 3.667a.773.773 0 0 1-.02 1.1.843.843 0 0 1-1.14.02L2.237 5.562a.773.773 0 0 1 0-1.12L6.62.215a.843.843 0 0 1 1.141.02.773.773 0 0 1 .02 1.1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-right":'<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><g id="icon-chevron-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M2.218 1.335a.773.773 0 0 1 .02-1.1.843.843 0 0 1 1.142-.02l4.382 4.227c.32.31.32.81 0 1.12L3.38 9.79a.843.843 0 0 1-1.141-.02.773.773 0 0 1-.02-1.1l3.8-3.667-3.8-3.667z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-up":'<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><g id="icon-chevron-up" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8.667 7.783L5 3.983l-3.667 3.8a.773.773 0 0 1-1.1-.02.843.843 0 0 1-.02-1.14L4.44 2.24c.31-.32.81-.32 1.12 0l4.227 4.382a.843.843 0 0 1-.02 1.141.773.773 0 0 1-1.1.02z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-close":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-close" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.251 8.157L13.421 12l3.83 3.843a.996.996 0 0 1-1.408 1.408L12 13.421l-3.843 3.83a.996.996 0 0 1-1.408-1.408L10.579 12l-3.83-3.843A.996.996 0 0 1 8.157 6.75L12 10.579l3.843-3.83a.996.996 0 0 1 1.408 1.408z" id="shape"/></g></svg>',"icon-code-sample":'<svg width="24" height="26" xmlns="http://www.w3.org/2000/svg"><g id="icon-code-sample" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.125 10.969A2.782 2.782 0 0 1 6.265 13a2.795 2.795 0 0 1 .86 2.031v1.625c0 .334.12.62.36.86.239.24.525.359.859.359.224 0 .406.182.406.406v.813a.406.406 0 0 1-.406.406c-.782 0-1.45-.279-2.008-.836a2.738 2.738 0 0 1-.836-2.008v-1.625c0-.333-.12-.62-.36-.86-.239-.239-.525-.358-.859-.358a.406.406 0 0 1-.406-.407v-.812c0-.225.182-.406.406-.406.334 0 .62-.12.86-.36s.359-.526.359-.86V9.345c0-.782.279-1.45.836-2.008A2.738 2.738 0 0 1 8.344 6.5c.224 0 .406.182.406.406v.813a.406.406 0 0 1-.406.406c-.334 0-.62.12-.86.36-.24.239-.359.525-.359.859v1.625zm9.75 0V9.344c0-.334-.12-.62-.36-.86-.239-.24-.525-.359-.859-.359a.406.406 0 0 1-.406-.406v-.813c0-.224.182-.406.406-.406.782 0 1.45.279 2.008.836.557.557.836 1.226.836 2.008v1.625c0 .333.12.62.36.86.239.239.525.358.859.358.224 0 .406.182.406.407v.812a.406.406 0 0 1-.406.406c-.334 0-.62.12-.86.36s-.359.526-.359.86v1.624c0 .782-.279 1.45-.836 2.008a2.738 2.738 0 0 1-2.008.836.406.406 0 0 1-.406-.406v-.813c0-.224.182-.406.406-.406.334 0 .62-.12.86-.36.24-.239.359-.525.359-.859v-1.625a2.782 2.782 0 0 1 .86-2.031 2.795 2.795 0 0 1-.86-2.031zm-3.25-.39c0 .447-.159.83-.477 1.148-.317.317-.7.476-1.148.476-.448 0-.83-.159-1.148-.476a1.565 1.565 0 0 1-.477-1.149c0-.448.159-.83.477-1.148.317-.318.7-.477 1.148-.477.448 0 .83.159 1.148.477.318.317.477.7.477 1.148zM12 12.983c.448 0 .83.16 1.148.477.318.318.477.7.477 1.148 0 .917-.167 1.61-.5 2.079-.344.468-.719.799-1.125.992-.406.192-.781.294-1.125.304a.485.485 0 0 1-.5-.484v-.469c.365-.031.685-.107.96-.226.277-.12.509-.31.696-.57-.625-.032-1.057-.201-1.297-.508-.24-.308-.359-.68-.359-1.118 0-.448.159-.83.477-1.148.317-.318.7-.477 1.148-.477z" id="shape"/></g></svg>',"icon-color-levels":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-color-levels" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.516 11.39c.156.449.276.902.359 1.36a6.653 6.653 0 0 1-.063 2.734c-.104.448-.27.886-.5 1.313-.26.479-.578.917-.953 1.312a6.045 6.045 0 0 1-1.257 1.016 5.9 5.9 0 0 1-1.477.64 5.73 5.73 0 0 1-3.25 0 5.9 5.9 0 0 1-1.477-.64 6.045 6.045 0 0 1-1.257-1.016 6.217 6.217 0 0 1-.954-1.312 5.315 5.315 0 0 1-.5-1.313 6.653 6.653 0 0 1-.171-1.359c-.01-.458.026-.917.109-1.375.083-.458.203-.911.36-1.36.26-.718.583-1.416.968-2.093.396-.677.833-1.326 1.313-1.945.479-.62.994-1.211 1.546-1.774A26.375 26.375 0 0 1 12 4c.573.49 1.135 1.016 1.688 1.578a19.95 19.95 0 0 1 1.546 1.774c.48.62.917 1.268 1.313 1.945.385.677.708 1.375.969 2.094zm-1.97 4.47c.355-.678.5-1.355.438-2.032s-.182-1.265-.359-1.765a7.842 7.842 0 0 0-.258-.641 19.19 19.19 0 0 0-.32-.672c.135.552.195 1.161.18 1.828-.016.667-.201 1.333-.555 2-.208.406-.469.771-.781 1.094a5.335 5.335 0 0 1-1.063.851 5.017 5.017 0 0 1-1.234.54 4.867 4.867 0 0 1-1.344.187c-.104 0-.208-.003-.313-.008a2.135 2.135 0 0 1-.312-.039c.344.25.719.445 1.125.586.406.14.823.211 1.25.211a3.92 3.92 0 0 0 2.063-.586 3.976 3.976 0 0 0 1.484-1.555z" id="shape"/></g></svg>',"icon-color-picker":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-color-picker" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 3a9 9 0 0 0 0 18c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-color-swatch":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-color-swatch" stroke="none" stroke-width="1" fill-rule="evenodd"><rect id="Rectangle" x="3" y="3" width="18" height="18" rx="1"/></g></svg>',"icon-comment":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-comment" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9 19.091L12.02 17H19c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h4v2.091zM7 22.91V19H5c-1.655 0-3-1.345-3-3V6c0-1.655 1.345-3 3-3h14c1.655 0 3 1.345 3 3v10c0 1.655-1.345 3-3 3h-6.355L7 22.909z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-contrast":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-contrast" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4c1.104 0 2.14.208 3.11.625.979.417 1.83.987 2.554 1.71a8.005 8.005 0 0 1 1.711 2.556c.417.968.625 2.005.625 3.109s-.208 2.14-.625 3.11a8.005 8.005 0 0 1-1.71 2.554 8.005 8.005 0 0 1-2.556 1.711A7.785 7.785 0 0 1 12 20a7.785 7.785 0 0 1-3.11-.625 8.005 8.005 0 0 1-2.554-1.71 8.005 8.005 0 0 1-1.711-2.556A7.785 7.785 0 0 1 4 12c0-1.104.208-2.14.625-3.11.417-.979.987-1.83 1.71-2.554a8.005 8.005 0 0 1 2.556-1.711A7.785 7.785 0 0 1 12 4zm-6 8c0 .833.156 1.61.469 2.328.312.73.742 1.367 1.289 1.914a6.048 6.048 0 0 0 1.914 1.29A5.775 5.775 0 0 0 12 18V6c-.833 0-1.61.156-2.328.469a6.048 6.048 0 0 0-1.914 1.289 6.048 6.048 0 0 0-1.29 1.914A5.775 5.775 0 0 0 6 12z" id="shape"/></g></svg>',"icon-copy":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-copy" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 2H5c-1.1 0-2 .86-2 1.91v13.176h2V3.91h12V2zm3 3.818c1.1 0 2 .86 2 1.91V21.09C22 22.14 21.1 23 20 23H9c-1.1 0-2-.86-2-1.91V7.728c0-1.05.9-1.909 2-1.909h11zm0 15.273V7.727H9v13.364h11z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-crop":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-crop" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 8v7h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H7V9H5a1 1 0 1 1 0-2h2V5a1 1 0 1 1 2 0v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" id="shape"/></g></svg>',"icon-cut":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-cut" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.922 15.078c.635.636.99 1.367 1.062 2.195.073.829-.156 1.508-.687 2.04-.23.229-.498.4-.805.515a2.728 2.728 0 0 1-.96.172c-.417 0-.842-.091-1.274-.273a3.869 3.869 0 0 1-1.195-.805 3.636 3.636 0 0 1-.891-1.399 3.108 3.108 0 0 1-.156-1.492L12 15l-1.016 1.031c.073.48.021.977-.156 1.492a3.636 3.636 0 0 1-.89 1.399 3.869 3.869 0 0 1-1.196.805A3.262 3.262 0 0 1 7.47 20c-.334 0-.654-.057-.961-.172a2.222 2.222 0 0 1-.805-.515c-.531-.532-.76-1.211-.687-2.04.073-.828.427-1.56 1.062-2.195.354-.354.75-.622 1.188-.805A3.318 3.318 0 0 1 8.546 14H9l1-1-3.984-4a2.383 2.383 0 0 1-.563-.906 3.263 3.263 0 0 1 0-2.188c.125-.354.313-.656.563-.906L12 11l5.984-6c.25.25.438.552.563.906a3.263 3.263 0 0 1 0 2.188 2.383 2.383 0 0 1-.563.906L14 13l1 1h.453c.417 0 .844.091 1.281.273.438.183.834.451 1.188.805zm-8.406 2.14c.052-.124.093-.252.125-.382.03-.13.046-.258.046-.383 0-.114-.02-.247-.062-.398a.935.935 0 0 0-.25-.414.935.935 0 0 0-.414-.25 1.568 1.568 0 0 0-.414-.063c-.125 0-.25.016-.375.047s-.25.073-.375.125a2.453 2.453 0 0 0-.781.531 2.362 2.362 0 0 0-.516.766c-.052.125-.094.25-.125.375s-.047.25-.047.375c0 .114.021.247.063.398.041.151.125.29.25.414a.935.935 0 0 0 .414.25c.15.042.289.063.414.063.114 0 .237-.016.367-.047s.258-.073.383-.125c.146-.063.281-.138.406-.227.125-.088.245-.19.36-.304a1.97 1.97 0 0 0 .304-.352c.089-.13.164-.263.227-.398zM12 14.423c.385 0 .716-.138.992-.414.276-.276.414-.612.414-1.008 0-.385-.138-.716-.414-.992a1.353 1.353 0 0 0-.992-.414c-.385 0-.716.138-.992.414a1.353 1.353 0 0 0-.414.992c0 .396.138.732.414 1.008.276.276.607.414.992.414zm5.36 3.937a.935.935 0 0 0 .25-.414c.041-.15.062-.284.062-.398 0-.125-.016-.25-.047-.375a2.52 2.52 0 0 0-.344-.781 2.534 2.534 0 0 0-1.078-.89 2.639 2.639 0 0 0-.375-.126 1.541 1.541 0 0 0-.375-.047c-.125 0-.263.021-.414.063a.935.935 0 0 0-.414.25.935.935 0 0 0-.25.414 1.524 1.524 0 0 0-.063.398c0 .125.016.253.047.383.032.13.073.258.125.383.063.135.138.268.227.398.088.13.19.248.305.352.114.114.234.216.359.304a2.199 2.199 0 0 0 .79.352c.13.031.252.047.366.047.125 0 .263-.021.414-.063a.935.935 0 0 0 .414-.25z" id="shape"/></g></svg>',"icon-drag":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-drag" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" id="shape"/></g></svg>',"icon-duplicate":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-duplicate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 2H5c-1.1 0-2 .86-2 1.91v13.176h2V3.91h12V2zm3 3.818c1.1 0 2 .86 2 1.91V21.09C22 22.14 21.1 23 20 23H9c-1.1 0-2-.86-2-1.91V7.728c0-1.05.9-1.909 2-1.909h11zm0 15.273V7.727H9v13.364h11zM17 16h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-edit-image":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-edit-image" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 16h2V7c0-1.1-.9-2-2-2H7v2h11v9zM6 17h17v2h-3v4h-2v-4H6c-1.1 0-2-.9-2-2V7H1V5h3V1h2v16zm3.065-5.313l1.273 2.042 2.935-4.708L17 15H7l2.065-3.313z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-embed":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-embed" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2v14h14V5H5zm4.79 2.565l5.64 4.028a.5.5 0 0 1 0 .814l-5.64 4.028a.5.5 0 0 1-.79-.407V7.972a.5.5 0 0 1 .79-.407z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-emoji":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-emoji" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-fill":'<svg width="24" height="26" xmlns="http://www.w3.org/2000/svg"><g id="icon-fill" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.56 11.94L7.62 3 6.21 4.41l2.38 2.38-5.15 5.15a1.49 1.49 0 0 0 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 13L10 8.21 14.79 13H5.21zM19 14.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-flip-horizontally":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-flip-horizontally" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-flip-vertically":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-flip-vertically" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3 15h2v2H3v-2zm12 4h2v2h-2v-2zm4-16c1.1 0 2 .9 2 2v4h-2V5H5v4H3V5c0-1.1.9-2 2-2h14zm2 16c0 1.1-.9 2-2 2v-2h2zM1 11h22v2H1v-2zm6 8h2v2H7v-2zm12-4h2v2h-2v-2zm-8 4h2v2h-2v-2zm-8 0h2v2c-1.1 0-2-.9-2-2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-format-painter":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-format-painter" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 5V4c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V7h1v4H9v9c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-7h8V5h-3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-fullscreen":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-fullscreen" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.59 9.823L14.178 8.41 17.586 5H15a1 1 0 0 1 0-2h5a1 1 0 0 1 1 1v5a1 1 0 0 1-2 0V6.414l-3.41 3.41zm0 4.354L19 17.586V15a1 1 0 0 1 2 0v5a1 1 0 0 1-1 1h-5a1 1 0 0 1 0-2h2.586l-3.41-3.41 1.415-1.413zM9.824 15.59L6.414 19H9a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1v-5a1 1 0 0 1 2 0v2.586l3.41-3.41 1.413 1.415zM8.41 9.823L5 6.414V9a1 1 0 1 1-2 0V4a1 1 0 0 1 1-1h5a1 1 0 1 1 0 2H6.414l3.41 3.41-1.415 1.413z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-gamma":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-gamma" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2v14h14V5H5zm6.547 11.82V14L9.25 8.75a5.124 5.124 0 0 0-.219-.516 2.58 2.58 0 0 0-.187-.328.31.31 0 0 0-.172-.164.647.647 0 0 0-.219-.039c-.125 0-.226.008-.305.024A1.06 1.06 0 0 1 8 7.75V6.656a.622.622 0 0 1 .281-.101 3.84 3.84 0 0 0 .313-.055c.25 0 .474.026.672.078.198.052.359.14.484.266.052.052.102.114.148.187.047.073.097.146.149.219.052.104.101.208.148.313.047.104.081.218.102.343l1.906 4.547 2.091-5.172a1 1 0 0 1 .927-.625h.052a.482.482 0 0 1 .445.67L12.906 14v2.82a.68.68 0 0 1-1.36 0z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-help":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-help" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 5.5a6.517 6.517 0 0 0-2.492.492c-.39.162-.763.362-1.117.602-.355.229-.683.5-.985.812-.312.302-.583.63-.812.985-.24.354-.44.726-.602 1.117A6.499 6.499 0 0 0 5.5 12a6.517 6.517 0 0 0 .492 2.492c.162.39.362.763.602 1.117.229.355.5.683.812.985.302.312.63.583.985.812.354.24.726.44 1.117.602A6.499 6.499 0 0 0 12 18.5a6.517 6.517 0 0 0 2.492-.492c.39-.162.763-.362 1.117-.602.355-.229.683-.5.985-.812.312-.302.583-.63.812-.985.24-.354.44-.726.602-1.117A6.499 6.499 0 0 0 18.5 12a6.517 6.517 0 0 0-.492-2.492 6.251 6.251 0 0 0-.602-1.117c-.229-.355-.5-.683-.812-.985a5.592 5.592 0 0 0-.985-.812 6.251 6.251 0 0 0-1.117-.602A6.499 6.499 0 0 0 12 5.5zM12 4c1.104 0 2.14.208 3.11.625.979.417 1.83.987 2.554 1.71a8.005 8.005 0 0 1 1.711 2.556c.417.968.625 2.005.625 3.109s-.208 2.14-.625 3.11a8.005 8.005 0 0 1-1.71 2.554 8.005 8.005 0 0 1-2.556 1.711A7.785 7.785 0 0 1 12 20a7.785 7.785 0 0 1-3.11-.625 8.005 8.005 0 0 1-2.554-1.71 8.005 8.005 0 0 1-1.711-2.556A7.785 7.785 0 0 1 4 12c0-1.104.208-2.14.625-3.11.417-.979.987-1.83 1.71-2.554a8.005 8.005 0 0 1 2.556-1.711A7.785 7.785 0 0 1 12 4z" id="shape"/><path d="M9.622 9.665a.75.75 0 0 1-.75-.75c0-1.155 1.551-1.775 3.23-1.787 1.828-.013 3.24.77 3.24 2.384 0 1.436-.454 2.103-1.524 2.761a12.53 12.53 0 0 0-.358.223c-.377.248-.603.479-.788.852a.75.75 0 0 1-1.344-.667c.317-.638.726-1.056 1.309-1.438.107-.07.21-.135.395-.247.66-.406.81-.626.81-1.484 0-.546-.623-.892-1.73-.884-.522.004-1.053.1-1.435.253-.15.06-.262.122-.325.175 0-.012.02-.061.02-.141a.75.75 0 0 1-.75.75z" id="Path-2" fill-rule="nonzero"/><circle id="Oval" cx="12" cy="16" r="1"/></g></svg>',"icon-highlight-bg-color":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-highlight-bg-color" stroke="none" stroke-width="1" fill-rule="nonzero"><rect id="Rectangle-path" x="3" y="18" width="18" height="3" rx=".6"/><path d="M7.7 16.72H3l3.35-3.34-.79-.79L10.15 8l4.14 4.14-4.14 4.14a.51.51 0 0 1-.71 0l-.65-.66-1.09 1.1zM12.79 9.239L11 7.449l2.93-2.9a1.91 1.91 0 0 1 2.68 0l1.4 1.45a1.9 1.9 0 0 1 0 2.68l-2.9 2.9-1.79-1.8-.53-.54" id="Shape"/></g></svg>',"icon-home":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-home" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Shape" fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></g></svg>',"icon-horizontal-rule":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-horizontal-rule" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="shape" d="M4 11h16v2H4z"/></g></svg>',"icon-image-options":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-image-options" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-image":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-image" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 15.74l3.27-3.27a.75.75 0 0 1 1.06 0l2.57 2.57 4.103-4.104a.75.75 0 0 1 1.06 0L19 12.873V5H5v10.74zm0 2.12V19h2.94l2.9-2.9-2.04-2.04-3.8 3.8zm14-2.866l-2.467-2.467L10.061 19H19v-4.006zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-indent":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-indent" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7 5h12a1 1 0 0 1 0 2H7a1 1 0 1 1 0-2zm5 4h7a1 1 0 0 1 0 2h-7a1 1 0 0 1 0-2zm0 4h7a1 1 0 0 1 0 2h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm-2.555-3.832L6.197 12l-1.752-1.168a1 1 0 0 1 1.11-1.664l3 2a1 1 0 0 1 0 1.664l-3 2a1 1 0 1 1-1.11-1.664z" id="Combined-Shape"/></g></svg>',"icon-indeterminate":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-indeterminate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zM9 11a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2H9z" id="Combined-Shape"/></g></svg>',"icon-info":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-info" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4c1.104 0 2.14.208 3.11.625.979.417 1.83.987 2.554 1.71a8.005 8.005 0 0 1 1.711 2.556c.417.968.625 2.005.625 3.109s-.208 2.14-.625 3.11a8.005 8.005 0 0 1-1.71 2.554 8.005 8.005 0 0 1-2.556 1.711A7.785 7.785 0 0 1 12 20a7.785 7.785 0 0 1-3.11-.625 8.005 8.005 0 0 1-2.554-1.71 8.005 8.005 0 0 1-1.711-2.556A7.785 7.785 0 0 1 4 12c0-1.104.208-2.14.625-3.11.417-.979.987-1.83 1.71-2.554a8.005 8.005 0 0 1 2.556-1.711A7.785 7.785 0 0 1 12 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" id="shape"/></g></svg>',"icon-insert-character":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-insert-character" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 18h4l1-2v4h-6v-3.344c.51-.219.98-.515 1.406-.89a5.96 5.96 0 0 0 1.11-1.305 6.2 6.2 0 0 0 .718-1.617A6.313 6.313 0 0 0 17.5 11c0-.833-.146-1.615-.438-2.344a5.826 5.826 0 0 0-1.171-1.898 5.646 5.646 0 0 0-1.75-1.274A5.126 5.126 0 0 0 12 5.031c-.76 0-1.474.151-2.14.453a5.646 5.646 0 0 0-1.75 1.274c-.5.536-.891 1.17-1.172 1.898A6.252 6.252 0 0 0 6.5 11c0 .646.089 1.26.266 1.844a6.2 6.2 0 0 0 .718 1.617c.313.495.683.93 1.11 1.305.427.375.896.671 1.406.89V20H4v-4l1 2h4v-.516a8.557 8.557 0 0 1-2.016-1.03 7.64 7.64 0 0 1-1.586-1.5 6.54 6.54 0 0 1-1.023-1.845A5.958 5.958 0 0 1 4 11c0-.969.208-1.875.625-2.719a7.074 7.074 0 0 1 1.71-2.234 8.129 8.129 0 0 1 2.556-1.5A8.755 8.755 0 0 1 12 4c1.104 0 2.14.182 3.11.547.979.364 1.83.864 2.554 1.5a7.074 7.074 0 0 1 1.711 2.234c.417.844.625 1.75.625 2.719 0 .74-.125 1.443-.375 2.11a6.54 6.54 0 0 1-1.023 1.843 7.64 7.64 0 0 1-1.586 1.5A8.557 8.557 0 0 1 15 17.484V18z" id="shape"/></g></svg>',"icon-insert-time":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-insert-time" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="clock" transform="translate(2 2)" fill-rule="nonzero"><path d="M17 0H3C1.346 0 0 1.346 0 3v14c0 1.654 1.346 3 3 3h14c1.654 0 3-1.346 3-3V3c0-1.654-1.346-3-3-3zm-7 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z" id="Shape"/><path d="M13 10h-3V5a.5.5 0 0 0-1 0v6h4a.5.5 0 0 0 0-1z" id="Shape"/></g></g></svg>',"icon-invert":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-invert" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.953 19.344l-1.406-1.39a5.802 5.802 0 0 1-1.985 1.483 6.86 6.86 0 0 1-1.203.422c-.427.094-.864.141-1.312.141a5.867 5.867 0 0 1-2.297-.453 6.308 6.308 0 0 1-1.898-1.266 6.087 6.087 0 0 1-1.305-1.86 5.795 5.795 0 0 1-.5-2.327v-.297c.01-.406.062-.818.156-1.235.083-.406.2-.81.352-1.21.15-.401.32-.795.508-1.18.197-.386.411-.76.64-1.125l-3-3 .703-.703 2.844 2.86 8.906 8.89 1.547 1.562-.75.688zM18 13.797v.297c0 .375-.044.747-.133 1.117-.088.37-.195.716-.32 1.039l-1.203-1.203c.052-.177.09-.344.117-.5.026-.156.039-.323.039-.5v-.203a5.474 5.474 0 0 0-.203-1.297 9.109 9.109 0 0 0-.531-1.406c-.23-.49-.506-.995-.829-1.516a21.903 21.903 0 0 0-1.14-1.578 27.372 27.372 0 0 0-1.797-2 27.372 27.372 0 0 0-1.797 2 59.524 59.524 0 0 1-.36.5L8.75 7.453c.385-.51.77-.979 1.156-1.406.396-.427.748-.792 1.055-1.094.307-.302.555-.536.742-.703L12 4l.922.828c.604.563 1.279 1.302 2.023 2.219.745.917 1.43 1.963 2.055 3.14.625 1.167.958 2.37 1 3.61z" id="shape"/></g></svg>',"icon-italic":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-italic" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.746 4.723l-.176.84h-.263c-.638 0-1.097.12-1.377.36-.28.242-.47.6-.567 1.075l-2.07 9.805c-.059.28-.088.465-.088.556 0 .534.482.801 1.445.801h.254l-.175.84h-5.82l.155-.84h.264c1.107 0 1.761-.478 1.963-1.435l2.08-9.805c.052-.247.078-.433.078-.557 0-.534-.482-.8-1.445-.8h-.254l.176-.84h5.82z" id="I"/></g></svg>',"icon-line":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-line" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.547 9.203l-7.844 7.844H4.797v-2.89l7.86-7.86 2.89 2.906zm1-.953l-2.89-2.906 1.046-1.047a.83.83 0 0 1 .602-.266.83.83 0 0 1 .601.266L17.594 6a.83.83 0 0 1 .265.602.83.83 0 0 1-.265.601L16.547 8.25zm-11.89 10h14.687V20H4.656v-1.75z" id="shape"/></g></svg>',"icon-link":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-link" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="link" transform="translate(3 3)" fill-rule="nonzero"><path d="M3.19 9.345a.97.97 0 0 1 1.653.683.966.966 0 0 1-.283.684l-2.055 2.052a1.932 1.932 0 0 0 0 2.735 1.94 1.94 0 0 0 2.74 0l4.794-4.787a.966.966 0 0 0 0-1.367.966.966 0 0 1 0-1.368.97.97 0 0 1 1.37 0 2.898 2.898 0 0 1 0 4.103l-4.795 4.787a3.879 3.879 0 0 1-5.48 0 3.864 3.864 0 0 1 0-5.47L3.19 9.344v.001zm11.62-.69a.97.97 0 0 1-1.653-.683c0-.257.102-.503.283-.684l2.055-2.052a1.932 1.932 0 0 0 0-2.735 1.94 1.94 0 0 0-2.74 0L7.962 7.288a.966.966 0 0 0 0 1.367.966.966 0 0 1 0 1.368.97.97 0 0 1-1.37 0 2.898 2.898 0 0 1 0-4.103l4.795-4.787a3.879 3.879 0 0 1 5.48 0 3.864 3.864 0 0 1 0 5.47L14.81 8.656v-.001z" id="Shape"/></g></g></svg>',"icon-list-bull-circle":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-bull-circle" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval" fill-rule="nonzero"/><path d="M11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval-Copy" fill-rule="nonzero"/><path d="M11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval-Copy-2" fill-rule="nonzero"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-bull-default":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-bull-default" stroke="none" stroke-width="1" fill-rule="evenodd"><circle id="Oval" cx="11" cy="14" r="3"/><circle id="Oval-Copy" cx="11" cy="24" r="3"/><circle id="Oval-Copy-2" cx="11" cy="34" r="3"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-bull-square":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-bull-square" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle" d="M8 11h6v6H8z"/><path id="Rectangle-Copy" d="M8 21h6v6H8z"/><path id="Rectangle-Copy-2" d="M8 31h6v6H8z"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-num-default":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-num-default" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10.054 17v-4.769H9.98l-1.47 1.013v-1.166l1.549-1.067h1.249V17h-1.254zm3.557.112c-.444 0-.734-.303-.734-.722 0-.42.29-.718.734-.718.449 0 .735.299.735.718 0 .42-.286.722-.735.722zm-5.076 5.692c0-1.158.889-1.947 2.184-1.947 1.249 0 2.12.718 2.12 1.748 0 .651-.352 1.212-1.39 2.187l-1.146 1.092v.074h2.624V27H8.606v-.876l1.955-1.913c.842-.822 1.054-1.133 1.054-1.523 0-.482-.39-.822-.938-.822-.581 0-.98.382-.98.934v.025H8.536v-.021zm6.35 4.308c-.444 0-.734-.303-.734-.722 0-.42.29-.718.734-.718.449 0 .735.299.735.718 0 .42-.286.722-.735.722zm-4.818 7.29v-.934h.73c.569 0 .955-.332.955-.822 0-.481-.374-.788-.959-.788-.58 0-.967.328-1 .846H8.635c.042-1.133.884-1.847 2.191-1.847 1.229 0 2.113.673 2.113 1.615 0 .693-.436 1.233-1.104 1.37v.074c.822.092 1.336.64 1.336 1.428 0 1.05-.987 1.81-2.353 1.81-1.336 0-2.241-.74-2.295-1.868h1.2c.037.506.464.826 1.108.826.626 0 1.062-.353 1.062-.863 0-.523-.41-.847-1.083-.847h-.743zm4.765 2.71c-.445 0-.735-.303-.735-.722 0-.42.29-.718.735-.718.448 0 .734.299.734.718 0 .42-.286.722-.734.722z" id="1.-2.-3."/></g></svg>',"icon-list-num-lower-alpha":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-num-lower-alpha" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10.258 15.162c.56 0 .983-.357.983-.822v-.336l-.925.058c-.519.037-.772.224-.772.552 0 .34.295.548.714.548zm-.399.909c-.88 0-1.498-.54-1.498-1.378 0-.83.635-1.312 1.772-1.378l1.108-.067v-.373c0-.382-.273-.598-.772-.598-.435 0-.726.15-.825.423H8.53c.08-.846.855-1.377 2.005-1.377 1.212 0 1.897.572 1.897 1.552V16h-1.17v-.598h-.075c-.237.42-.735.669-1.329.669zm4.632.041c-.444 0-.734-.303-.734-.722 0-.42.29-.718.734-.718.448 0 .735.299.735.718 0 .42-.287.722-.735.722zm-3.187 9.959c-.648 0-1.167-.291-1.411-.789h-.075V26h-1.17v-6.325h1.207v2.478h.075c.232-.503.747-.806 1.374-.806 1.158 0 1.855.884 1.855 2.362 0 1.47-.706 2.362-1.855 2.362zm-.42-3.71c-.634 0-1.037.518-1.041 1.352.004.83.402 1.349 1.042 1.349.643 0 1.033-.515 1.033-1.353 0-.834-.394-1.349-1.033-1.349zm4.006 3.751c-.444 0-.735-.303-.735-.722 0-.42.29-.718.735-.718.448 0 .734.299.734.718 0 .42-.286.722-.734.722zm-2.233 6.925h-1.13c-.082-.436-.393-.723-.908-.723-.652 0-1.017.486-1.017 1.387 0 .913.37 1.407 1.017 1.407.494 0 .818-.241.909-.693h1.129c-.1 1.025-.847 1.685-2.038 1.685-1.428 0-2.237-.864-2.237-2.4 0-1.518.805-2.377 2.237-2.377 1.212 0 1.938.672 2.038 1.714zm1.813 3.075c-.444 0-.734-.303-.734-.722 0-.42.29-.718.734-.718.449 0 .735.299.735.718 0 .42-.286.722-.735.722z" id="a.-b.-c."/></g></svg>',"icon-list-num-lower-greek":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-num-lower-greek" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10.548 15.062c.635 0 1.042-.527 1.042-1.349 0-.813-.394-1.353-.996-1.353s-.992.515-.992 1.349.374 1.353.946 1.353zm-.303 1.009c-1.17 0-1.884-.884-1.884-2.366 0-1.457.718-2.358 1.855-2.358.635 0 1.096.316 1.32.91h.075v-.835h1.174v3.154c0 .39.13.51.378.51.07 0 .158-.012.216-.032v.917c-.12.041-.37.07-.59.07-.589 0-.962-.228-1.091-.722l-.037-.108h-.075c-.2.532-.71.86-1.34.86zm4.902.041c-.444 0-.735-.303-.735-.722 0-.42.29-.718.735-.718.448 0 .735.299.735.718 0 .42-.287.722-.735.722zm-4.823 6.995v-.921h.282c.582 0 .905-.299.905-.801 0-.51-.32-.822-.83-.822-.577 0-.871.382-.871 1.116v2.096c0 .851.419 1.287 1.095 1.287.552 0 .93-.382.93-.942 0-.66-.428-1.013-1.212-1.013h-.299zm-1.718-1.253c0-1.49.726-2.279 2.059-2.279 1.178 0 1.95.623 1.95 1.644a1.38 1.38 0 0 1-.83 1.286v.075c.851.208 1.287.768 1.287 1.664 0 1.109-.722 1.827-1.839 1.827-.63 0-1.137-.3-1.345-.772h-.074v2.22H8.606v-5.665zm6.2 4.258c-.443 0-.734-.303-.734-.722 0-.42.29-.718.735-.718.448 0 .734.299.734.718 0 .42-.286.722-.734.722zm-4.498 8.514L8.05 29.857h1.32l1.693 3.537 1.702-3.537h1.183l-2.22 4.682.049.096c.398.805.598 1.404.598 1.797 0 .41-.122.73-.366.96-.243.231-.578.347-1.004.347-.877 0-1.316-.414-1.316-1.241 0-.476.184-1.058.552-1.747l.067-.125zm.68.884c-.252.41-.377.724-.377.942 0 .313.127.47.381.47.274 0 .411-.149.411-.445 0-.216-.138-.538-.415-.967zm4.487.602c-.444 0-.735-.303-.735-.722 0-.42.29-.718.735-.718.448 0 .734.299.734.718 0 .42-.286.722-.734.722z" id="\u03b1.-\u03b2.-\u0194."/></g></svg>',"icon-list-num-lower-roman":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-num-lower-roman" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M15.146 16v-1.235h1.234V16h-1.234zm0 10v-1.235h1.234V26h-1.234zm0 10v-1.235h1.234V36h-1.234z" id=".-.-."/><path id="Rectangle" fill-rule="nonzero" d="M12 21h1.5v5H12z"/><path id="Rectangle-Copy-6" fill-rule="nonzero" d="M12 31h1.5v5H12z"/><path id="Rectangle-Copy-2" fill-rule="nonzero" d="M9 21h1.5v5H9z"/><path id="Rectangle-Copy-7" fill-rule="nonzero" d="M9 31h1.5v5H9z"/><path id="Rectangle-Copy-10" fill-rule="nonzero" d="M6 31h1.5v5H6z"/><path id="Rectangle-Copy-4" fill-rule="nonzero" d="M12 11h1.5v5H12z"/><path id="Rectangle-Copy" fill-rule="nonzero" d="M12 19h1.5v1H12z"/><path id="Rectangle-Copy-8" fill-rule="nonzero" d="M12 29h1.5v1H12z"/><path id="Rectangle-Copy-3" fill-rule="nonzero" d="M9 19h1.5v1H9z"/><path id="Rectangle-Copy-9" fill-rule="nonzero" d="M9 29h1.5v1H9z"/><path id="Rectangle-Copy-11" fill-rule="nonzero" d="M6 29h1.5v1H6z"/><path id="Rectangle-Copy-5" fill-rule="nonzero" d="M12 9h1.5v1H12z"/></g></svg>',"icon-list-num-upper-alpha":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-num-upper-alpha" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M12.574 17l-.453-1.428h-2.104L9.557 17H8.298l2.08-5.989h1.473L13.93 17h-1.357zm-1.536-4.744l-.751 2.35h1.569l-.743-2.35h-.075zm4.665 4.856c-.444 0-.734-.303-.734-.722 0-.42.29-.718.734-.718.448 0 .735.299.735.718 0 .42-.287.722-.735.722zM11.416 27h-2.69v-5.989h2.62c1.161 0 1.854.569 1.854 1.494 0 .635-.469 1.187-1.083 1.278v.075c.793.058 1.37.656 1.37 1.428 0 1.05-.793 1.714-2.071 1.714zM9.98 21.97v1.523h.942c.676 0 1.046-.278 1.046-.76 0-.477-.345-.763-.942-.763H9.98zm0 4.071h1.116c.722 0 1.112-.303 1.112-.863 0-.548-.402-.838-1.14-.838H9.98v1.701zm5.391 1.071c-.444 0-.735-.303-.735-.722 0-.42.291-.718.735-.718.448 0 .735.299.735.718 0 .42-.287.722-.735.722zm-4.1 10.042c-1.735 0-2.81-1.2-2.81-3.15 0-1.947 1.07-3.147 2.81-3.147 1.419 0 2.506.943 2.598 2.246h-1.22c-.12-.69-.665-1.142-1.378-1.142-.943 0-1.528.78-1.528 2.042 0 1.262.585 2.047 1.532 2.047.718 0 1.257-.424 1.378-1.084h1.22c-.104 1.295-1.158 2.188-2.602 2.188zm4.507-.042c-.444 0-.735-.303-.735-.722 0-.42.29-.718.735-.718.448 0 .734.299.734.718 0 .42-.286.722-.734.722z" id="A.-B.-C."/></g></svg>',"icon-list-num-upper-roman":'<svg width="48" height="48" xmlns="http://www.w3.org/2000/svg"><g id="icon-list-num-upper-roman" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M15.146 17v-1.235h1.234V17h-1.234zm0 10v-1.235h1.234V27h-1.234zm0 10v-1.235h1.234V37h-1.234z" id=".-.-."/><path id="Rectangle" fill-rule="nonzero" d="M12 20h1.5v7H12z"/><path id="Rectangle-Copy-6" fill-rule="nonzero" d="M12 30h1.5v7H12z"/><path id="Rectangle-Copy-2" fill-rule="nonzero" d="M9 20h1.5v7H9z"/><path id="Rectangle-Copy-7" fill-rule="nonzero" d="M9 30h1.5v7H9z"/><path id="Rectangle-Copy-10" fill-rule="nonzero" d="M6 30h1.5v7H6z"/><path id="Rectangle-Copy-4" fill-rule="nonzero" d="M12 10h1.5v7H12z"/></g></svg>',"icon-lock":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-lock" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.25 11c.208 0 .385.073.531.219a.723.723 0 0 1 .219.531v7.5a.723.723 0 0 1-.219.531.723.723 0 0 1-.531.219h-8.5a.723.723 0 0 1-.531-.219A.723.723 0 0 1 7 19.25v-7.5c0-.208.073-.385.219-.531A.723.723 0 0 1 7.75 11H8V8c0-.823.294-1.529.883-2.117A2.888 2.888 0 0 1 11 5h2c.823 0 1.529.294 2.117.883C15.706 6.47 16 7.177 16 8v3h.25zM10 8v3h4V8a.961.961 0 0 0-.297-.703A.961.961 0 0 0 13 7h-2a.961.961 0 0 0-.703.297A.961.961 0 0 0 10 8z" id="shape"/></g></svg>',"icon-ltr":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-ltr" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.48 0-.932-.094-1.36-.281a3.408 3.408 0 0 1-1.117-.742 3.408 3.408 0 0 1-.742-1.118A3.344 3.344 0 0 1 7.5 8.5c0-.48.094-.932.281-1.36.177-.426.425-.799.742-1.117.318-.317.69-.565 1.118-.742C10.068 5.094 10.52 5 11 5zM4.445 16.168L6.197 15l-1.752-1.168a1 1 0 0 1 1.11-1.664l3 2a1 1 0 0 1 0 1.664l-3 2a1 1 0 1 1-1.11-1.664z" id="shape"/></g></svg>',"icon-new-document":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-new-document" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.414 2H6c-1.103 0-2 .898-2 2v16c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V6.586L15.414 2zm2.587 18H6V4h8v4h4l.001 12z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-new-tab":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-new-tab" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2.047-2.047L11.422 14H10v-1.422l5.547-5.531L13.5 5H19z" id="shape"/></g></svg>',"icon-non-breaking":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-non-breaking" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 11H8a1 1 0 1 1 0-2h3V6a1 1 0 0 1 2 0v3h3a1 1 0 0 1 0 2h-3v3a1 1 0 0 1-2 0v-3zm10 4v5H3v-5a1 1 0 0 1 2 0v3h14v-3a1 1 0 0 1 2 0z" id="shape"/></g></svg>',"icon-notice":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-notice" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.75 9.75L15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.25 5.75zm0 0L20 15.5l-2.25-5.75zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" id="shape"/></g></svg>',"icon-ordered-list":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-ordered-list" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 17h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 1 1 0-2zM6 4v3.5a.5.5 0 0 1-1 0V5h-.5a.5.5 0 0 1 0-1H6zm-1 8.787c0 .118.095.213.213.213H6.5a.5.5 0 1 1 0 1H4.912A.913.913 0 0 1 4 13.088v-.22a1 1 0 0 1 .649-.936l1.137-.427A.33.33 0 0 0 6 11.196a.219.219 0 0 0-.228-.218l-1.244.056A.506.506 0 0 1 4 10.529c0-.292.237-.529.529-.529h1.559c.503 0 .912.409.912.912v.22a1 1 0 0 1-.649.936L5.2 12.5a.307.307 0 0 0-.199.287zM7 17v2a1 1 0 0 1-1 1H4.502a.502.502 0 0 1 0-1.005h1.2a.298.298 0 1 0 0-.595H4.4a.4.4 0 1 1 0-.8h1.302a.298.298 0 0 0 0-.596h-1.2a.502.502 0 1 1 0-1.004H6a1 1 0 0 1 1 1z" id="shape"/></g></svg>',"icon-orientation":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-orientation" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.34 6.41L.86 12.9l6.49 6.48 6.49-6.48-6.5-6.49zM3.69 12.9l3.66-3.66L11 12.9l-3.66 3.66-3.65-3.66zM12.019 6l2.764 2.667a.773.773 0 0 1-.02 1.1.843.843 0 0 1-1.14.02L9.24 5.56a.773.773 0 0 1 0-1.12L13.622.213a.843.843 0 0 1 1.141.02.773.773 0 0 1 .02 1.1L12.02 4H13c2.3 0 4.61.88 6.36 2.64a8.98 8.98 0 0 1 0 12.72A8.95 8.95 0 0 1 13 22c-1.49 0-2.98-.38-4.33-1.12l1.49-1.49a6.973 6.973 0 0 0 7.79-1.44 7.007 7.007 0 0 0 0-9.9A6.973 6.973 0 0 0 13 6h-.981z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-outdent":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-outdent" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7 5h12a1 1 0 0 1 0 2H7a1 1 0 1 1 0-2zm5 4h7a1 1 0 0 1 0 2h-7a1 1 0 0 1 0-2zm0 4h7a1 1 0 0 1 0 2h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm1.555-3.832a1 1 0 0 1-1.11 1.664l-3-2a1 1 0 0 1 0-1.664l3-2a1 1 0 0 1 1.11 1.664L6.803 12l1.752 1.168z" id="Combined-Shape"/></g></svg>',"icon-page-break":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-page-break" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 11a1 1 0 0 1 0 2 1 1 0 0 1 0-2zm3 0h1a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zm4 0a1 1 0 0 1 0 2 1 1 0 0 1 0-2zm3 0h1a1 1 0 0 1 0 2h-1a1 1 0 0 1 0-2zm4 0a1 1 0 0 1 0 2 1 1 0 0 1 0-2z" id="shape"/><path d="M7 3v5h10V3a1 1 0 0 1 2 0v7H5V3a1 1 0 1 1 2 0z" id="Combined-Shape"/><path d="M6 22a1 1 0 0 1-1-1v-7h14v7a1 1 0 0 1-2 0v-5H7v5a1 1 0 0 1-1 1z" id="Combined-Shape-Copy"/></g></svg>',"icon-paragraph":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-paragraph" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.48 0-.932-.094-1.36-.281a3.408 3.408 0 0 1-1.117-.742 3.408 3.408 0 0 1-.742-1.118A3.344 3.344 0 0 1 6.5 8.5c0-.48.094-.932.281-1.36.177-.426.425-.799.742-1.117.318-.317.69-.565 1.118-.742C9.068 5.094 9.52 5 10 5z" id="shape"/></g></svg>',"icon-paste-text":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-paste-text" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 9V5h-2v1a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h3.18C9.6 1.84 10.7 1 12 1c1.3 0 2.4.84 2.82 2H18c1.1 0 2 .9 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.75v1h-3.5v-1H14v-4h-1l-.5 1H12v-2z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-paste":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-paste" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 9V5h-2v1a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h3.18C9.6 1.84 10.7 1 12 1c1.3 0 2.4.84 2.82 2H18c1.1 0 2 .9 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-plus":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-plus" stroke="#000" stroke-width="2" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14" id="Shape"/></g></svg>',"icon-preferences":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-preferences" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20.1 13.497l-1.895.19a6.188 6.188 0 0 1-.615 1.494l1.26 1.55a1 1 0 0 1-.07 1.338l-.71.711a1 1 0 0 1-1.338.07l-1.55-1.26a6.188 6.188 0 0 1-1.495.615l-.19 1.895a1 1 0 0 1-.995.9h-1.004a1 1 0 0 1-.995-.9l-.19-1.895a6.188 6.188 0 0 1-1.494-.615l-1.55 1.26a1 1 0 0 1-1.338-.07l-.711-.71a1 1 0 0 1-.07-1.338l1.26-1.55a6.188 6.188 0 0 1-.615-1.495l-1.895-.19a1 1 0 0 1-.9-.995v-1.004a1 1 0 0 1 .9-.995l1.895-.19a6.188 6.188 0 0 1 .615-1.494l-1.26-1.55a1 1 0 0 1 .07-1.338l.71-.711a1 1 0 0 1 1.338-.07l1.55 1.26a6.188 6.188 0 0 1 1.495-.615l.19-1.895a1 1 0 0 1 .995-.9h1.004a1 1 0 0 1 .995.9l.19 1.895a6.188 6.188 0 0 1 1.494.615l1.55-1.26a1 1 0 0 1 1.338.07l.711.71a1 1 0 0 1 .07 1.338l-1.26 1.55a6.188 6.188 0 0 1 .615 1.495l1.895.19a1 1 0 0 1 .9.995v1.004a1 1 0 0 1-.9.995zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" id="Combined-Shape"/></g></svg>',"icon-preview":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-preview" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3.498 12.537a16.178 16.178 0 0 0 1.832 2.265C7.289 16.813 9.523 18 12 18c2.477 0 4.711-1.187 6.67-3.198A16.178 16.178 0 0 0 20.847 12a16.178 16.178 0 0 0-2.177-2.802C16.711 7.187 14.477 6 12 6 9.523 6 7.289 7.187 5.33 9.198A16.178 16.178 0 0 0 3.153 12c.095.155.21.335.345.537zm-2.385-.998c.13-.25.372-.665.724-1.19a18.159 18.159 0 0 1 2.06-2.547C6.2 5.438 8.908 4 12 4c3.092 0 5.8 1.438 8.103 3.802.79.812 1.478 1.68 2.06 2.547.352.525.594.94.724 1.19a1 1 0 0 1 0 .922c-.13.25-.372.665-.724 1.19a18.159 18.159 0 0 1-2.06 2.547C17.8 18.562 15.092 20 12 20c-3.092 0-5.8-1.438-8.103-3.802a18.159 18.159 0 0 1-2.06-2.547c-.352-.525-.594-.94-.724-1.19a1 1 0 0 1 0-.922zm12.065-3.363a2 2 0 1 0 2.646 2.646 4 4 0 1 1-2.646-2.646z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-print":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-print" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19 8H5c-1.66 0-3 1.34-3 3v6h3v4h14v-4h3v-6c0-1.66-1.34-3-3-3zm-2 11H7v-5h10v5zm2-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-quote":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-quote" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.5 17h.882a1 1 0 0 0 .894-.553L11 13V8a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h2l-1.33 2.658A.927.927 0 0 0 7.5 17zm8 0h.882a1 1 0 0 0 .894-.553L19 13V8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h2l-1.33 2.658A.927.927 0 0 0 15.5 17z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-redo":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-redo" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.586 10H12c-2.77 0-4.395 1.365-4.854 3.535-.402 1.897.258 3.953 1.36 4.604a1 1 0 1 1-1.02 1.722c-1.92-1.137-2.862-4.072-2.297-6.74C5.842 10.04 8.27 8 12 8h5.586l-3.293-3.293a1 1 0 1 1 1.414-1.414l4.981 4.981a.997.997 0 0 1 0 1.452l-4.98 4.981a1 1 0 0 1-1.415-1.414L17.586 10z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-reload":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-reload" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="Group" transform="rotate(-45 13.207 13.207)" fill-rule="nonzero"><path d="M19.79 13.725l-2.42-4.186a.95.95 0 0 0-.141-.189.99.99 0 0 0-1.504.027l-3.213 3.832a.999.999 0 1 0 1.53 1.285l1.457-1.735c-.553 2.833-2.817 5.341-5.802 6.041a7.466 7.466 0 0 1-6.994-1.977.999.999 0 1 0-1.406 1.422 9.464 9.464 0 0 0 8.858 2.5c3.605-.845 6.378-3.801 7.214-7.212l.689 1.192a1 1 0 1 0 1.732-1z" id="Shape" transform="matrix(-1 0 0 1 20.924 0)"/><path d="M12.972 9.389a.999.999 0 0 0-1.408.124L9.84 11.568a7.53 7.53 0 0 1 1.085-3.697c1.11-1.854 2.928-3.194 4.983-3.676A7.495 7.495 0 0 1 23.25 6.54a1 1 0 0 0 1.5-1.322 9.486 9.486 0 0 0-9.3-2.969c-2.578.603-4.853 2.277-6.241 4.593a9.634 9.634 0 0 0-1.23 3.312l-.565-.944A1 1 0 1 0 5.7 10.24l2.56 4.262a.998.998 0 0 0 1.624.128l3.212-3.831a1 1 0 0 0-.124-1.41z" id="Shape" transform="matrix(-1 0 0 1 30.557 0)"/></g></g></svg>',"icon-remove-formatting":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-remove-formatting" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.248 6a1.002 1.002 0 0 1-.032.218l-2.615 10.034a1 1 0 0 1-.968.748h-.266a.802.802 0 0 1-.776-1.005L11.204 6H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.752zM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm13.047 1.516L16.5 17.969l-1.547 1.547a.685.685 0 0 1-.969-.97L15.531 17l-1.547-1.547a.685.685 0 0 1 .97-.969l1.546 1.547 1.547-1.547a.685.685 0 0 1 .969.97L17.469 17l1.547 1.547a.685.685 0 0 1-.97.969z" id="shape"/></g></svg>',"icon-remove":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-remove" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 6h3a1 1 0 0 1 0 2h-1v11a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V8H4a1 1 0 1 1 0-2h3V5a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v1zm-2 0V5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v1h6zm2 2H7v11a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V8zm-8 3a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0v-6zm4 0a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0v-6z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-resize-handle":'<svg width="10" height="10" xmlns="http://www.w3.org/2000/svg"><g id="icon-resize-handle" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M8.146 1.146a.5.5 0 1 1 .708.708l-7 7a.5.5 0 1 1-.708-.708l7-7z" id="Line"/><path d="M8.146 5.146a.5.5 0 1 1 .708.708l-3 3a.5.5 0 1 1-.708-.708l3-3z" id="Line-2"/></g></svg>',"icon-resize":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-resize" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5c0-.281.096-.518.29-.71A.966.966 0 0 1 5 4h6c.281 0 .518.096.71.29.194.192.29.429.29.71a.966.966 0 0 1-.29.71A.966.966 0 0 1 11 6H7.422L18 16.578V13c0-.281.096-.518.29-.71A.966.966 0 0 1 19 12c.281 0 .518.096.71.29.194.192.29.429.29.71v6a.966.966 0 0 1-.29.71.966.966 0 0 1-.71.29h-6a.966.966 0 0 1-.71-.29A.966.966 0 0 1 12 19c0-.281.096-.518.29-.71A.966.966 0 0 1 13 18h3.578L6 7.422V11a.966.966 0 0 1-.29.71A.966.966 0 0 1 5 12a.966.966 0 0 1-.71-.29A.966.966 0 0 1 4 11V5z" id="shape"/></g></svg>',"icon-restore-draft":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-restore-draft" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 13a1 1 0 0 1-1 1h-4V8a1 1 0 0 1 2 0v4h2a1 1 0 0 1 1 1z" id="shape"/><path d="M4.71 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1v-.774V5a1 1 0 1 1 2 0v2.931l2.474-2.295c2.868-2.828 7.279-3.44 10.823-1.506 3.55 1.938 5.376 5.966 4.474 9.879-.9 3.91-4.306 6.756-8.35 6.986a9.157 9.157 0 0 1-6.52-2.217 1 1 0 1 1 1.31-1.512 7.158 7.158 0 0 0 5.096 1.732c3.16-.18 5.815-2.399 6.515-5.438.7-3.036-.719-6.165-3.484-7.674A7.186 7.186 0 0 0 7.856 7.08L4.711 10z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rotate-left":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-rotate-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4.71 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1v-.774V5a1 1 0 1 1 2 0v2.931l2.474-2.295c2.868-2.828 7.279-3.44 10.823-1.506 3.55 1.938 5.376 5.966 4.474 9.879-.9 3.91-4.306 6.756-8.35 6.986a9.157 9.157 0 0 1-6.52-2.217 1 1 0 1 1 1.31-1.512 7.158 7.158 0 0 0 5.096 1.732c3.16-.18 5.815-2.399 6.515-5.438.7-3.036-.719-6.165-3.484-7.674A7.186 7.186 0 0 0 7.856 7.08L4.711 10z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rotate-right":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-rotate-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20 7.931V5a1 1 0 0 1 2 0v6a1 1 0 0 1-1 1h-6a1 1 0 0 1 0-2h4.29l-3.146-2.92a7.186 7.186 0 0 0-8.482-1.194c-2.765 1.51-4.184 4.638-3.484 7.674.7 3.04 3.355 5.258 6.515 5.438a7.158 7.158 0 0 0 5.097-1.732 1 1 0 0 1 1.31 1.512 9.157 9.157 0 0 1-6.52 2.217c-4.045-.23-7.45-3.077-8.351-6.986-.902-3.913.925-7.94 4.474-9.879 3.544-1.935 7.956-1.322 10.823 1.506L20 7.93z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rtl":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-rtl" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.48 0-.932-.094-1.36-.281a3.408 3.408 0 0 1-1.117-.742 3.408 3.408 0 0 1-.742-1.118A3.344 3.344 0 0 1 4.5 8.5c0-.48.094-.932.281-1.36.177-.426.425-.799.742-1.117.318-.317.69-.565 1.118-.742C7.068 5.094 7.52 5 8 5zm12.055 11.168a1 1 0 1 1-1.11 1.664l-3-2a1 1 0 0 1 0-1.664l3-2a1 1 0 1 1 1.11 1.664L18.303 15l1.752 1.168z" id="shape"/></g></svg>',"icon-save":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-save" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.414L8.707 9.293a1 1 0 1 0-1.414 1.414l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 1 0-1.414-1.414L13 11.586V4a1 1 0 0 0-2 0v7.586z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-search":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-search" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.907 17.319a8 8 0 1 1 1.412-1.412c.013.011.026.023.038.036l4.35 4.35a1 1 0 0 1-1.414 1.414l-4.35-4.35a1.016 1.016 0 0 1-.036-.038zM11 17a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-select-all":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-select-all" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-selected":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-selected" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm-2.39-6.11l-2.58-2.58a.75.75 0 0 0-1.06 1.06L9.61 17l8.422-8.422a.742.742 0 0 0-.002-1.053.75.75 0 0 0-1.058.003L9.61 14.89z" id="Combined-Shape"/></g></svg>',"icon-settings":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-settings" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 6h8a1 1 0 0 1 0 2h-8v.25a.723.723 0 0 1-.219.531.723.723 0 0 1-.531.219h-2.5a.723.723 0 0 1-.531-.219A.723.723 0 0 1 7 8.25V8H5a1 1 0 1 1 0-2h2v-.25c0-.208.073-.385.219-.531A.723.723 0 0 1 7.75 5h2.5c.208 0 .385.073.531.219A.723.723 0 0 1 11 5.75V6zM8 8h2V6H8v2zm9 2.75V11h2a1 1 0 0 1 0 2h-2v.25a.723.723 0 0 1-.219.531.723.723 0 0 1-.531.219h-2.5a.723.723 0 0 1-.531-.219.723.723 0 0 1-.219-.531V13H5a1 1 0 0 1 0-2h8v-.25c0-.208.073-.385.219-.531A.723.723 0 0 1 13.75 10h2.5c.208 0 .385.073.531.219a.723.723 0 0 1 .219.531zM14 13h2v-2h-2v2zm-3 2.75V16h8a1 1 0 0 1 0 2h-8v.25a.723.723 0 0 1-.219.531.723.723 0 0 1-.531.219h-2.5a.723.723 0 0 1-.531-.219A.723.723 0 0 1 7 18.25V18H5a1 1 0 0 1 0-2h2v-.25c0-.208.073-.385.219-.531A.723.723 0 0 1 7.75 15h2.5c.208 0 .385.073.531.219a.723.723 0 0 1 .219.531zM8 18h2v-2H8v2z" id="shape"/></g></svg>',"icon-sharpen":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-sharpen" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.172L17.484 10l-.125-.125H12v-.25h5.11l-.25-.25H12v-.25h4.61l-.25-.25H12v-.25h4.11l-.25-.25H12v-.25h3.61l-.25-.25H12v-.047H8.687L6.517 10l.109.125H12v.25H6.86l.218.25H12v.25H7.297l.219.25H12v.25H7.734l.235.25H12v.25H8.187l.22.25H12v.25H8.625l.234.25H12v.25H9.078l.219.25H12v.25H9.516l.218.25H12v.25H9.969l.219.25H12v.25h-1.594l.219.25H12v.25h-1.14l.218.25H12v.25h-.703l.219.25H12v.25h-.266l.235.25H12v.047z" id="shape"/></g></svg>',"icon-sourcecode":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-sourcecode" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M10.669 9.218a.773.773 0 0 1 1.1.02c.303.313.311.818.02 1.142l-4.227 4.382c-.31.32-.81.32-1.12 0L2.215 10.38a.843.843 0 0 1 .02-1.141.773.773 0 0 1 1.1-.02l3.667 3.8 3.667-3.8z" id="Shape" transform="rotate(90 7.002 12)"/><path d="M20.669 9.218a.773.773 0 0 1 1.1.02c.303.313.311.818.02 1.142l-4.227 4.382c-.31.32-.81.32-1.12 0l-4.227-4.382a.843.843 0 0 1 .02-1.141.773.773 0 0 1 1.1-.02l3.667 3.8 3.667-3.8z" id="Shape-Copy" transform="matrix(0 1 1 0 5.002 -5.002)"/></g></svg>',"icon-spell-check":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-spell-check" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 8v3H5V5c0-.27.099-.505.297-.703A.961.961 0 0 1 6 4h2c.27 0 .505.099.703.297A.961.961 0 0 1 9 5v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a.961.961 0 0 1-.703-.297A.961.961 0 0 1 15 10V5c0-.27.099-.505.297-.703A.961.961 0 0 1 16 4h3v1zm-5 1.5c0 .27-.047.505-.14.703-.094.198-.277.297-.547.297.27 0 .453.099.546.297.094.198.141.432.141.703V10c0 .27-.099.505-.297.703A.961.961 0 0 1 13 11h-3V4h3c.27 0 .505.099.703.297A.961.961 0 0 1 14 5v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.281-1.094L10.5 16.72 16 12z" id="shape"/></g></svg>',"icon-strike-through":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-strike-through" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.24 9.75c-.26-.48-.39-1.03-.39-1.67 0-.61.13-1.16.4-1.67.26-.5.63-.93 1.11-1.29a5.73 5.73 0 0 1 1.7-.83c.66-.19 1.39-.29 2.18-.29.81 0 1.54.11 2.21.34.66.22 1.23.54 1.69.94.47.4.83.88 1.08 1.43.07.152.132.346.187.58a1 1 0 0 1-.973 1.23h-.992a1 1 0 0 1-.964-.733 1.266 1.266 0 0 0-.038-.117c-.09-.27-.24-.49-.44-.68-.2-.19-.45-.33-.75-.44-.3-.1-.66-.16-1.06-.16-.39 0-.74.04-1.03.13-.29.09-.53.21-.72.36-.19.16-.34.34-.44.55-.1.21-.15.43-.15.66 0 .48.25.88.74 1.21.38.25.77.48 1.41.7H7.39c-.05-.08-.11-.17-.15-.25zM20 11H4a1 1 0 0 0 0 2h8.62c.18.07.4.14.55.2.37.17.66.34.87.51.21.17.35.36.43.57.07.2.11.43.11.69 0 .23-.05.45-.14.66-.09.2-.23.38-.42.53-.19.15-.42.26-.71.35-.29.08-.63.13-1.01.13-.43 0-.83-.04-1.18-.13s-.66-.23-.91-.42c-.25-.19-.45-.44-.59-.75a2.186 2.186 0 0 1-.125-.42 1 1 0 0 0-.977-.79H7.52a1 1 0 0 0-.982 1.19c.03.157.064.287.101.39.16.45.37.85.65 1.21.28.35.6.66.98.92.37.26.78.48 1.22.65.44.17.9.3 1.38.39.48.08.96.13 1.44.13.8 0 1.53-.09 2.18-.28.65-.19 1.21-.45 1.67-.79.46-.34.82-.77 1.07-1.27.25-.5.38-1.07.38-1.71 0-.6-.1-1.14-.31-1.61-.05-.11-.11-.23-.17-.33H20a1 1 0 0 0 1-1V12a1 1 0 0 0-1-1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-subscript":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-subscript" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10.41 10L15 14.59 13.59 16 9 11.41 4.41 16 3 14.59 7.59 10 3 5.41 4.41 4 9 8.59 13.59 4 15 5.41 10.41 10zm10.44 9.03h-4.88v-1l.89-.8c.76-.65 1.32-1.19 1.7-1.63.37-.44.56-.85.57-1.24a.898.898 0 0 0-.27-.7c-.18-.16-.47-.28-.86-.28-.31 0-.58.06-.84.18l-.66.38-.45-1.17c.27-.21.59-.39.98-.53s.82-.24 1.29-.24c.78.04 1.38.25 1.78.66.4.41.62.93.62 1.57-.01.56-.19 1.08-.54 1.55-.34.47-.76.92-1.27 1.36l-.64.52 2.58.02v1.35z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-superscript":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-superscript" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 9.41L10.41 14 15 18.59 13.59 20 9 15.41 4.41 20 3 18.59 7.59 14 3 9.41 4.41 8 9 12.59 13.59 8 15 9.41zM20.85 11h-4.88v-1l.89-.82c.76-.64 1.32-1.18 1.7-1.63.37-.44.56-.85.57-1.23a.884.884 0 0 0-.27-.7c-.18-.19-.47-.28-.86-.29-.31.01-.58.07-.84.17l-.66.39-.45-1.17c.27-.22.59-.39.98-.53S17.85 4 18.32 4c.78 0 1.38.2 1.78.61.4.39.62.93.62 1.57-.01.56-.19 1.08-.54 1.55-.34.48-.76.93-1.27 1.36l-.64.52v.02h2.58V11z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-table-cell-properties":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-cell-properties" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-table-cell-select-all":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-cell-select-all" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12.5 5.5v6h6v-6h-6zm-1 0h-6v6h6v-6zm1 13h6v-6h-6v6zm-1 0v-6h-6v6h6zm-7-14h15v15h-15v-15z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-table-cell-select-inner":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-cell-select-inner" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M5.5 5.5v13h13v-13h-13zm-1-1h15v15h-15v-15z" id="Rectangle-5-Copy" opacity=".2"/><path d="M11.5 11.5v-7h1v7h7v1h-7v7h-1v-7h-7v-1h7z" id="Combined-Shape"/></g></svg>',"icon-table-delete-column":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-delete-column" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9 11.203l1 1v.203l-1 1v-2.203zm5 1.047l1-1v2.156l-1-1v-.156zM20 5v14H4V5h16zm-1 2h-4v.797l-.203-.203-.797.812V7h-4v1.406l-.797-.812L9 7.797V7H5v11h4v-1.844l.547.547.453-.453v1.797h4V16.25l.75.75.25-.25v1.297h4V7zm-3.895 3.441l-1.855 1.856 1.898 1.898a.85.85 0 1 1-1.203 1.203L12.047 13.5l-1.856 1.855A.84.84 0 0 1 9 15.352a.853.853 0 0 1 .002-1.202l1.842-1.853-1.946-1.945a.85.85 0 0 1 1.203-1.203l1.946 1.945L13.9 9.252a.853.853 0 0 1 1.202-.002.84.84 0 0 1 .003 1.191z" id="shape"/></g></svg>',"icon-table-delete-row":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-delete-row" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.703 8.844l1.14 1.203-2.437 2.453 2.5 2.5-1.203 1.203-2.5-2.5-2.453 2.453L10.547 15l2.5-2.5L10.5 9.953l1.203-1.203 2.547 2.547 2.453-2.453zM4 5h16v14H4V5zm15 5V7H5v3h4.797l1 1H5v3h5.844l-1 1H5v3h14v-3h-.406l-1-1H19v-3h-1.344l1-1H19z" id="shape"/></g></svg>',"icon-table-delete-table":'<svg width="24" height="26" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-delete-table" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 6h16v14H4V6zm.953 2v11H19V8H4.953zm11.703 8.703l-1.5 1.5L11.953 15 8.75 18.203l-1.5-1.5 3.203-3.203-3.203-3.203 1.5-1.5L11.953 12l3.203-3.203 1.5 1.5-3.203 3.203 3.203 3.203z" id="shape"/></g></svg>',"icon-table-insert-column-after":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-insert-column-after" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.328 8.953c.371 0 .672.3.672.672v2.172h2.14a.703.703 0 0 1 0 1.406H15v2.172a.672.672 0 1 1-1.344 0v-2.172h-2.203a.703.703 0 0 1 0-1.406h2.203V9.625c0-.371.301-.672.672-.672zM4 5h16v14H4V5zm5 13v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8V7h-9v11h9z" id="shape"/></g></svg>',"icon-table-insert-column-before":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-insert-column-before" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9.672 16.047A.672.672 0 0 1 9 15.375v-2.172H6.86a.703.703 0 0 1 0-1.406H9V9.625a.672.672 0 1 1 1.344 0v2.172h2.203a.703.703 0 0 1 0 1.406h-2.203v2.172c0 .371-.301.672-.672.672zM4 5h16v14H4V5zm10 13V7H5v11h9zm5 0v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V7h-4v3h4z" id="shape"/></g></svg>',"icon-table-insert-row-above":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-insert-row-above" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.797 10.523c0 .29-.234.524-.524.524h-1.726v1.703a.547.547 0 0 1-1.094 0v-1.703H9.727a.523.523 0 0 1 0-1.047h1.726V8.297a.547.547 0 1 1 1.094 0V10h1.726c.29 0 .524.234.524.523zM4 5h16v14H4V5zm5 13v-3H5v3h4zm5 0v-3h-4v3h4zm5 0v-3h-4v3h4zm0-3.953V7H5v7.047h14z" id="shape"/></g></svg>',"icon-table-insert-row-after":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-insert-row-after" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9.203 14.477c0-.29.234-.524.524-.524h1.726V12.25a.547.547 0 1 1 1.094 0v1.703h1.726a.523.523 0 1 1 0 1.047h-1.726v1.703a.547.547 0 0 1-1.094 0V15H9.727a.523.523 0 0 1-.524-.523zM4 5h16v14H4V5zm6 2v3h4V7h-4zM5 7v3h4V7H5zm14 11v-7.047H5V18h14zm0-8V7h-4v3h4z" id="shape"/></g></svg>',"icon-table-left-header":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-left-header" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v13H4V5zm10 12v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4zm5 8v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4z" id="shape"/></g></svg>',"icon-table-merge-cells":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-merge-cells" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 13h9v-7h-9v7zm4-11h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10-1h4V7h-4v3zM5 15v3h4v-3H5z" id="shape"/></g></svg>',"icon-table-row-properties":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-row-properties" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm6 3h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-table-split-cells":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-split-cells" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 2v3h4V7h-4zM9 18v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8v-7h-9v7h9zm0-8V7h-4v3h4zm-3.547 4.5l1.57 1.57a.674.674 0 0 1-.953.953l-1.57-1.57-1.57 1.57a.674.674 0 0 1-.953-.953l1.57-1.57-1.57-1.57a.674.674 0 0 1 .953-.953l1.57 1.57 1.57-1.57a.674.674 0 0 1 .953.953l-1.57 1.57z" id="shape"/></g></svg>',"icon-table-top-header":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table-top-header" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v13H4V5zm5 12v-3H5v3h4zm0-4v-3H5v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4z" id="shape"/></g></svg>',"icon-table":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-table" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 9h4v-3h-4v3zm4 1h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-template":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-template" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="stamp" transform="translate(3 3)" fill-rule="nonzero"><path d="M16 16v-1H2v1h14zM6 13V9a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H0v-3a2 2 0 0 1 2-2h4zm4 0V8.001l.799-.6a3 3 0 1 0-3.598 0l.799.6V13h2z" id="Shape"/></g></g></svg>',"icon-temporary-placeholder":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-temporary-placeholder" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20.499 2.5c-.827 0-1.5.672-1.5 1.5 0 .827-.673 1.5-1.5 1.5s-1.5-.673-1.5-1.5c0-1.653-1.346-3-2.999-3-1.654 0-3 1.347-3 3v2H8.5a.5.5 0 0 0-.5.5v1.091A8.01 8.01 0 0 0 3 15c0 4.411 3.589 8 8 8s7.999-3.589 7.999-8A8.01 8.01 0 0 0 14 7.591V6.5a.5.5 0 0 0-.5-.5H11V4a2 2 0 0 1 3.999 0c0 1.378 1.122 2.5 2.5 2.5 1.379 0 2.5-1.122 2.5-2.5 0-.275.225-.5.5-.5a.5.5 0 0 0 0-1zM8.141 10.898a5.006 5.006 0 0 0-1.242 6.962.5.5 0 0 1-.821.571 5.954 5.954 0 0 1-.984-4.486 5.955 5.955 0 0 1 2.476-3.867.5.5 0 1 1 .571.82z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-text-color":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-text-color" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="color" d="M3 19h18v3H3z"/><path d="M8.66 17h-.738a.5.5 0 0 1-.479-.644l2.7-9A.5.5 0 0 1 10.622 7h2.756a.5.5 0 0 1 .479.356l2.7 9a.5.5 0 0 1-.479.644h-.738a.5.5 0 0 1-.479-.355l-.691-2.29A.5.5 0 0 0 13.69 14H10.31a.5.5 0 0 0-.479.355l-.691 2.29A.5.5 0 0 1 8.66 17zm2.67-7.645l-.604 2a.5.5 0 0 0 .479.645h1.59a.5.5 0 0 0 .479-.645l-.604-2A.5.5 0 0 0 12.19 9h-.382a.5.5 0 0 0-.479.355z" id="shape"/></g></svg>',"icon-toc":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-toc" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5a1 1 0 1 1 0 2 1 1 0 1 1 0-2zm3 0h11a1 1 0 0 1 0 2H8a1 1 0 1 1 0-2zm-3 8a1 1 0 0 1 0 2 1 1 0 0 1 0-2zm3 0h11a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2zm0-4a1 1 0 0 1 0 2 1 1 0 1 1 0-2zm3 0h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zm-3 8a1 1 0 0 1 0 2 1 1 0 0 1 0-2zm3 0h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-translate":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-translate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12.656 14.25l-.281.727c-.188.484-.297.726-.328.726l-2.25-2.25-3.113 3.113a.751.751 0 0 1-1.059.004.734.734 0 0 1 0-1.046l3.172-3.118c-.448-.5-.85-1.026-1.203-1.578a13.229 13.229 0 0 1-.938-1.734h1.438c.229.458.484.888.765 1.289.282.4.594.789.938 1.164a9.894 9.894 0 0 0 1.36-1.852c.374-.661.687-1.34.937-2.039H4.727a.727.727 0 1 1 0-1.453h4.367v-.726a.727.727 0 0 1 1.453 0v.726h4.383a.727.727 0 1 1 0 1.453H13.5c-.135.417-.297.834-.484 1.25-.177.417-.378.826-.602 1.227-.224.4-.471.794-.742 1.18-.271.375-.563.74-.875 1.093l1.86 1.844zm4.347-3.022l2.744 7.388a.505.505 0 0 1-.474.68c-.436 0-.825-.272-.973-.682l-.55-1.52h-3.453l-.55 1.52c-.148.41-.538.683-.974.683a.505.505 0 0 1-.473-.681l2.744-7.388a1.045 1.045 0 1 1 1.96 0zm-2.206 4.428h2.406L16 12.5l-1.203 3.156z" id="shape"/></g></svg>',"icon-underline":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-underline" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 5a1 1 0 0 1 1 1v5.5c0 .625-.13 1.208-.39 1.75a4.476 4.476 0 0 1-1.07 1.438 5.013 5.013 0 0 1-1.587.953A5.33 5.33 0 0 1 12 16a5.33 5.33 0 0 1-1.953-.36 5.013 5.013 0 0 1-1.586-.953 4.476 4.476 0 0 1-1.07-1.437A3.986 3.986 0 0 1 7 11.5V6a1 1 0 1 1 2 0v5.5c0 .313.07.615.21.906.142.292.337.558.587.797A3.418 3.418 0 0 0 12 14a3.418 3.418 0 0 0 2.203-.797c.25-.24.445-.505.586-.797.14-.291.211-.593.211-.906V6a1 1 0 0 1 1-1zM8 17h8a1 1 0 0 1 0 2H8a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-undo":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-undo" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6.414 8H12c3.73 0 6.158 2.04 6.81 5.12.565 2.67-.377 5.604-2.297 6.74a1 1 0 0 1-1.019-1.72c1.101-.652 1.761-2.708 1.36-4.605C16.394 11.365 14.77 10 12 10H6.414l3.293 3.293a1 1 0 1 1-1.414 1.414l-5-5a1 1 0 0 1 0-1.414l5-5a1 1 0 0 1 1.414 1.414L6.414 8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-unlink":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-unlink" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6.19 12.345a.97.97 0 0 1 1.653.683.966.966 0 0 1-.283.684l-2.055 2.052a1.932 1.932 0 0 0 0 2.735 1.94 1.94 0 0 0 2.74 0l4.794-4.787a.966.966 0 0 0 0-1.367.966.966 0 0 1 0-1.368.97.97 0 0 1 1.37 0 2.898 2.898 0 0 1 0 4.103l-4.795 4.787a3.879 3.879 0 0 1-5.48 0 3.864 3.864 0 0 1 0-5.47l2.056-2.053v.001zm11.62-.69a.97.97 0 0 1-1.653-.683c0-.257.102-.503.283-.684l2.055-2.052a1.932 1.932 0 0 0 0-2.735 1.94 1.94 0 0 0-2.74 0l-4.793 4.787a.966.966 0 0 0 0 1.367.966.966 0 0 1 0 1.368.97.97 0 0 1-1.37 0 2.898 2.898 0 0 1 0-4.103l4.795-4.787a3.879 3.879 0 0 1 5.48 0 3.864 3.864 0 0 1 0 5.47l-2.057 2.053v-.001zM7.61 6.342a.75.75 0 0 1-1.06 1.061L3.368 4.221a.75.75 0 1 1 1.06-1.06L7.61 6.341zM5.105 8.598a.75.75 0 0 1 0 1.5H2.984a.75.75 0 0 1 0-1.5h2.121zm4.993-3.493a.75.75 0 0 1-1.5 0V2.984a.75.75 0 0 1 1.5 0v2.121zm5.997 11.844a.75.75 0 0 1 1.061-1.06l3.182 3.181a.75.75 0 0 1-1.06 1.061l-3.183-3.182zm-2.194 1.945a.75.75 0 0 1 1.5 0v2.12a.75.75 0 0 1-1.5 0v-2.12zm4.993-3.493a.75.75 0 1 1 0-1.5h2.12a.75.75 0 0 1 0 1.5h-2.12z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-unlock":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-unlock" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 5c.823 0 1.529.294 2.117.883C18.706 6.47 19 7.177 19 8v3h-2V8a.961.961 0 0 0-.297-.703A.961.961 0 0 0 16 7h-2a.961.961 0 0 0-.703.297A.961.961 0 0 0 13 8v3h.25c.208 0 .385.073.531.219a.723.723 0 0 1 .219.531v7.5a.723.723 0 0 1-.219.531.723.723 0 0 1-.531.219h-8.5a.723.723 0 0 1-.531-.219A.723.723 0 0 1 4 19.25v-7.5c0-.208.073-.385.219-.531A.723.723 0 0 1 4.75 11H11V8c0-.823.294-1.529.883-2.117A2.888 2.888 0 0 1 14 5h2z" id="shape"/></g></svg>',"icon-unordered-list":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-unordered-list" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 5h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zm0 6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zm0 6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2zM4.5 6c0-.414.146-.768.44-1.06.292-.294.646-.44 1.06-.44.414 0 .768.146 1.06.44.294.292.44.646.44 1.06 0 .414-.146.768-.44 1.06-.292.294-.646.44-1.06.44-.414 0-.768-.146-1.06-.44A1.445 1.445 0 0 1 4.5 6zm0 6c0-.414.146-.768.44-1.06.292-.294.646-.44 1.06-.44.414 0 .768.146 1.06.44.294.292.44.646.44 1.06 0 .414-.146.768-.44 1.06-.292.294-.646.44-1.06.44-.414 0-.768-.146-1.06-.44A1.445 1.445 0 0 1 4.5 12zm0 6c0-.414.146-.768.44-1.06.292-.294.646-.44 1.06-.44.414 0 .768.146 1.06.44.294.292.44.646.44 1.06 0 .414-.146.768-.44 1.06-.292.294-.646.44-1.06.44-.414 0-.768-.146-1.06-.44A1.445 1.445 0 0 1 4.5 18z" id="shape"/></g></svg>',"icon-unselected":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-unselected" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1a8 8 0 1 0 0-16 8 8 0 0 0 0 16z" id="Combined-Shape"/></g></svg>',"icon-upload":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-upload" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 19v-2a1 1 0 0 1 2 0v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12zM11 6.414L8.707 8.707a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 1 1-1.414 1.414L13 6.414V16a1 1 0 0 1-2 0V6.414z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-user":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-user" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 24C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm-8.693-5.259A10.981 10.981 0 0 0 12 23c3.535 0 6.68-1.668 8.693-4.259C19.432 16.251 14.591 15 12 15c-2.59 0-7.432 1.25-8.693 3.741zm8.7-5.741C14.224 13 16 10.99 16 8.5S14.224 4 12.007 4C9.79 4 8 6.01 8 8.5S9.79 13 12.007 13z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-warning":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-warning" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19.781 18.313c.26.458.295.854.102 1.187-.193.333-.555.5-1.086.5H5.203c-.531 0-.893-.167-1.086-.5-.193-.333-.159-.73.102-1.188l6.828-13.609c.135-.24.284-.417.445-.531A.864.864 0 0 1 12 4c.177 0 .346.057.508.172.161.114.31.292.445.531l6.828 13.61zM12 18a.966.966 0 0 0 .71-.29A.966.966 0 0 0 13 17a.966.966 0 0 0-.29-.71A.966.966 0 0 0 12 16a.966.966 0 0 0-.71.29.966.966 0 0 0-.29.71c0 .281.096.518.29.71.192.194.429.29.71.29zm.688-3L13 11a.966.966 0 0 0-.29-.71A.966.966 0 0 0 12 10a.966.966 0 0 0-.71.29.966.966 0 0 0-.29.71l.313 4h1.374z" id="shape"/></g></svg>',"icon-zoom-in":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-zoom-in" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.907 17.319a8 8 0 1 1 1.412-1.412c.013.011.026.023.038.036l4.35 4.35a1 1 0 0 1-1.414 1.414l-4.35-4.35a1.016 1.016 0 0 1-.036-.038zM11 17a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-zoom-out":'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g id="icon-zoom-out" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.907 17.319a8 8 0 1 1 1.412-1.412c.013.011.026.023.038.036l4.35 4.35a1 1 0 0 1-1.414 1.414l-4.35-4.35a1.016 1.016 0 0 1-.036-.038zM11 17a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>'},wx=function(e,t){return P.from(bx[e]).getOrThunk(t)},yx=function(e,t){return P.from(t()[e]).getOrThunk(function(){return wx(e,function(){return"!not found!"})})},xx=function(e,t,n){return P.from(t()[e]).getOrThunk(function(){return wx(e,n)})},kx={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Sx=Ol({name:"Notification",factory:function(t){var e,n,o,r=Jd({dom:{tag:"p",innerHtml:t.text()},behaviours:xi([fh.config({})])}),i=function(e){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+e+"%"}}}},a=function(e){return{dom:{tag:"div",classes:["tox-text"],innerHtml:e+"%"}}},u=Jd({dom:{tag:"div",classes:t.progress()?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},a(0)],behaviours:xi([fh.config({})])}),c={updateProgress:function(e,t){e.getSystem().isConnected()&&u.getOpt(e).each(function(e){fh.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(t)]},a(t)])})},updateText:function(e,t){if(e.getSystem().isConnected()){var n=r.get(e);fh.set(n,[Pg(t)])}}},s=E(j([t.icon().toArray(),t.level().toArray(),t.level().bind(function(e){return P.from(kx[e])}).toArray()]),function(e){return"icon-"+e});return{uid:t.uid(),dom:{tag:"div",attributes:{role:"alert"},classes:t.level().map(function(e){return["tox-notification","tox-notification--in","tox-notification--"+e]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(e=s,n=t.iconProvider(),o=function(){return e=function(){return""},Ve(s,function(e){return P.from(bx[e])}).getOrThunk(e);var e},Ve(e,function(e){return P.from(n()[e])}).getOrThunk(o))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:xi([fh.config({})])}].concat(t.progress()?[u.asSpec()]:[]).concat(Ml.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:yx("icon-close",t.iconProvider())}}],action:function(e){t.onAction()(e)}})),apis:c}},configFields:[xr("level"),gr("progress"),gr("icon"),gr("onAction"),gr("text"),gr("iconProvider")],apis:{updateProgress:function(e,t,n){e.updateProgress(t,n)},updateText:function(e,t,n){e.updateText(t,n)}}});function Cx(r,i,a){var u=i.backstage;return{open:function(e,t){var n=function(){t(),px.hide(r)},o=Ug(Sx.sketch({text:e.text,level:M(["success","error","warning","info"],e.type)?e.type:undefined,progress:!0===e.progressBar,icon:P.from(e.icon),onAction:n,iconProvider:u.shared.providers.icons})),r=Ug(px.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.backstage.shared.getSink,fireDismissalEventInstead:{}}));return a.add(r),e.timeout&&setTimeout(function(){n()},e.timeout),{close:n,moveTo:function(e,t){px.showAt(r,{anchor:"makeshift",x:e,y:t},Wg(o))},moveRel:function(e,t){px.showAt(r,i.backstage.shared.anchors.banner(),Wg(o))},text:function(e){Sx.updateText(o,e)},settings:e,getEl:function(){},progressBar:{value:function(e){Sx.updateProgress(o,e)}}}},close:function(e){e.close()},reposition:function(e){V(e,function(e){e.moveTo(0,0)}),function(n){if(0<n.length){var e=n.slice(0,1)[0],t=(o=r).inline?o.getElement():o.getContentAreaContainer();e.moveRel(t,"tc-tc"),V(n,function(e,t){0<t&&e.moveRel(n[t-1].getEl(),"bc-tc")})}var o}(e)},getArgs:function(e){return e.settings}}}var zx,Ox,Tx=/[\u00a0 \t\r\n]/,Mx=function(n,e,t,o,r){return(i=n).collapsed&&3===i.startContainer.nodeType?function(e,t,n,o){var r;for(r=t-1;0<=r;r--){if(Tx.test(e.charAt(r)))return P.none();if(e.charAt(r)===n)break}return-1===r||t-r<o?P.none():P.some(e.substring(r+1,t))}(t,o,e,r).map(function(e){var t=n.cloneRange();return t.setStart(n.startContainer,n.startOffset-e.length-1),t.setEnd(n.startContainer,n.startOffset),{text:e,rng:t}}):P.none();var i},Hx=function(n,e){e.on("keypress",n.onKeypressThrottle);var o=function(e,t){ao(e,Ge(),{raw:t})};e.on("keydown",function(t){var e=function(){return n.getView().bind(Ru.getHighlighted)};n.isActive()&&(8===t.which&&n.onKeypressThrottle(t),27===t.which?n.closeIfNecessary():32===t.which?n.closeIfNecessary():13===t.which?(e().each(uo),t.preventDefault()):40===t.which?(e().fold(function(){n.getView().each(Ru.highlightFirst)},function(e){o(e,t)}),t.preventDefault()):37!==t.which&&38!==t.which&&39!==t.which||e().each(function(e){o(e,t),t.preventDefault()}))})},Ax=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ex=function(e,t){var n,o,r,i=t(),a=e.selection.getRng(),u=a.startContainer.nodeValue;return(n=a,o=u,r=i,Ve(r.triggerChars,function(t){return Mx(n,t,o,n.startOffset,0).map(function(e){return{range:e.rng,text:e.text,triggerChar:t}})})).map(function(e){var t=i.lookupByChar(e.triggerChar);return{lookupData:Ax.all(E(t,function(t){return t.fetch(e.text,t.maxResults).then(function(e){return{items:e,columns:t.columns,onAction:t.onAction}})})),triggerChar:e.triggerChar,range:e.range}})},Vx=Uo([Dr("type",function(){return"autocompleteitem"}),Dr("active",function(){return!1}),Dr("disabled",function(){return!1}),Or("meta",{}),vr("value"),Sr("text"),Sr("icon")]),Dx=Uo([vr("type"),vr("ch"),Or("columns",1),Mr("maxResults",10),pr("fetch"),pr("onAction")]),Bx=function(e){var t,n,o=e.ui.registry.getAll().popups,r=se(o,function(e){return(t=e,nr("Autocompleter",Dx,t)).fold(function(e){throw new Error(ar(e))},function(e){return e});var t}),i=(t=fe(r,function(e){return e.ch}),n={},V(t,function(e){n[e]={}}),ae(n)),a=de(r);return{dataset:r,triggerChars:i,lookupByChar:function(t){return D(a,function(e){return e.ch===t})}}},Rx="tox-menu-nav__js",Fx="tox-collection__item",Ix="tox-swatch",_x={normal:Rx,color:Ix},Lx="tox-collection__item--enabled",Nx="tox-collection__item-icon",Px="tox-collection__item-label",jx="tox-collection__item--active",Ux=function(e){return ze(_x,e).getOr(Rx)},Wx=tinymce.util.Tools.resolve("tinymce.Env"),Gx=function(e){return{dom:{tag:"span",classes:[Nx],innerHtml:e}}},Xx=function(e){return{dom:{tag:"span",classes:[Px]},components:[Pg(e)]}},Yx=function(e){var r=Wx.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},t=e.split("+");return E(t,function(e){var t,n,o=e.toLowerCase();return t=r,n=o,ue.call(t,n)?r[o]:e}).join("+")},$x=function(e){return{dom:{tag:"span",classes:["tox-collection__item-accessory"],innerHtml:Yx(e)}}},qx=function(e){return{dom:{tag:"span",classes:[Nx,"tox-collection__item-checkmark"],innerHtml:yx("icon-checkmark",e)}}},Kx=function(e,t){var n,o,r,i,a,u,c=e.iconContent.map(function(e){return xx("icon-"+e,t.icons,U(e))});return"color"===e.presets?(i=e.value,{dom:(a=Ix,u=c.getOr(""),El("custom"===i?'<button class="'+a+' tox-swatches__picker-btn">'+u+"</button>":"remove"===i?'<div class="'+a+' tox-swatch--remove">'+u+"</div>":'<div class="'+a+'" style="background-color: '+i+'" data-mce-color="'+i+'"></div>')),optComponents:[]}):(o=c,r=(n=e).checkMark.orThunk(function(){return o.or(P.some("")).map(Gx)}),{dom:{tag:"div",classes:[Rx,Fx]},optComponents:[r,n.textContent.map(Xx),n.shortcutContent.map($x),n.caret]})},Jx=function(e){return eg.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},Qx=function(e){return eg.config({disabled:e})},Zx=function(e,t){var n=e.getApi(t);return function(e){e(n)}},ek=function(n,o){return ei(function(e){Zx(n,e)(function(e){var t=n.onSetup(e);null!==t&&t!==undefined&&o.set(t)})})},tk=function(t,n){return ti(function(e){return Zx(t,e)(n.get())})},nk={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},ok=function(e){return W(e,function(e){return e.toArray()})},rk=function(e,t,n){var o,r,i=Ae(N);return{type:"item",dom:t.dom,components:ok(t.optComponents),data:e.data,eventOrder:nk,itemBehaviours:xi([Om("item-events",[(o=e,r=n,oi(function(e,t){Zx(o,e)(o.onAction),o.triggersSubmenu||r!==zx.CLOSE_ON_EXECUTE||(io(e,Rt()),t.stop())})),ek(e,i),tk(e,i)]),Jx(e.disabled),fh.config({})].concat(e.itemBehaviours))}},ik=function(e){return{value:e.value,meta:ne({text:e.text.getOr("")},e.meta)}},ak=U(Ys("item-widget",Zg())),uk=oo("cell-over"),ck=oo("cell-execute"),sk=function(t,n,e){var o,r=function(e){return ao(e,ck,{row:t,col:n})};return Ug({dom:{tag:"div",attributes:(o={role:"button"},o["aria-labelledby"]=e,o)},behaviours:xi([Om("insert-table-picker-cell",[Xr(je(),Ua.focus),Xr(At(),r),Xr(qe(),r)]),Va.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ua.config({onFocus:function(e){return ao(e,uk,{row:t,col:n})}})])})},lk={inserttable:function mD(o){var e,t=oo("size-label"),u=function(e,t,n){for(var o=[],r=0;r<t;r++){for(var i=[],a=0;a<n;a++)i.push(sk(r,a,e));o.push(i)}return o}(t,10,10),c=Jd({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[Pg("0x0")],behaviours:xi([fh.config({})])});return{type:"widget",data:{value:oo("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[ak().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:(e=u,W(e,function(e){return E(e,Wg)})).concat(c.asSpec()),behaviours:xi([Om("insert-table-picker",[Kr(uk,function(e,t,n){var o,r,i=n.event().row(),a=n.event().col();!function(e,t,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)Va.set(e[i][a],i<=t&&a<=n)}(u,i,a,10,10),fh.set(c.get(e),[(o=i,r=a,Pg(o+1+"x"+(r+1)))])}),Kr(ck,function(e,t,n){o.onAction({numRows:n.event().row()+1,numColumns:n.event().col()+1}),io(e,Rt())})]),ds.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}}},fk=function(e,a,t){return{dom:{tag:"div",classes:[Rx,Fx]},optComponents:[P.some(t),e.map(function(e){return t=a.tag,n=a.styleAttr,o="span",r=[Px],i=[{dom:{tag:t,attributes:{style:n}},components:[Pg(e)]}],{dom:{tag:o,classes:r},components:i};var t,n,o,r,i})]}};(Ox=zx||(zx={}))[Ox.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Ox[Ox.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var dk,mk,gk,hk,vk=function(t,e,n,o,r,i,a){var u,c=Kx({presets:n,textContent:e?t.text:P.none(),iconContent:t.icon,shortcutContent:e?t.shortcut:P.none(),checkMark:(u=r,u?P.some(qx(a.icons)):P.none()),caret:P.none(),value:t.value},a);return rk({data:ik(t),disabled:t.disabled,getApi:function(){return 10},onAction:function(e){return o(t.value)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},c,i)},pk=function(t,e,n,o,r,i){var a=Kx({presets:n,textContent:e?t.text:P.none(),iconContent:t.icon,shortcutContent:P.none(),checkMark:P.none(),caret:P.none(),value:t.value},i);return rk({data:ik(t),disabled:t.disabled,getApi:function(){return{}},onAction:function(e){return o(t.value,t.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},a,r)},bk=function(e){return{type:"separator",dom:{tag:"div",classes:["tox-collection__separator"],innerHtml:e.text.getOr("")},components:[]}},wk=function(e,t,n){var o="togglemenuitem"===e.type&&e.active?qx(n.icons):Gx(""),r=fk(e.text,e.meta,o);return te(rk({data:ik(e),disabled:e.disabled,getApi:function(){return 10},onAction:e.onAction,onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},r,t),"togglemenuitem"===e.type?{toggling:{toggleClass:Lx,toggleOnExecute:!1,selected:e.active}}:{})},yk=function(e,t,n){var o,r=e.hasSubmenu?P.some((o=n.icons,{dom:{tag:"span",classes:["tox-collection__item-caret"],innerHtml:yx("icon-chevron-right",o)}})):P.none(),i=Kx({presets:"normal",iconContent:e.icon,textContent:e.text,caret:r,checkMark:P.none(),shortcutContent:e.shortcut},n);return rk({data:ik(e),getApi:function(t){return{isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},disabled:e.disabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:e.hasSubmenu,itemBehaviours:[]},i,t)},xk=function(e,t,n){var o=Kx({iconContent:P.none(),textContent:e.text,checkMark:P.some(qx(n.icons)),caret:P.none(),shortcutContent:e.shortcut,presets:"normal"},n);return te(rk({data:ik(e),disabled:e.disabled,getApi:function(t){return{setActive:function(e){Va.set(t,e)},isActive:function(){return Va.isOn(t)},isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,t),{toggling:{toggleClass:Lx,toggleOnExecute:!1,selected:e.active}})},kk=function(t){return(e=lk,n=t.fancytype,Object.prototype.hasOwnProperty.call(e,n)?P.some(e[n]):P.none()).map(function(e){return e(t)});var e,n},Sk=[Ar("disabled",!1),Sr("text"),Sr("shortcut"),qo("value","value",Ho(function(){return oo("menuitem-value")}),cr()),Or("meta",{})],Ck=Uo([vr("type"),Dr("hasSubmenu",function(e){return He(e,"getSubmenuItems")}),Er("onSetup",function(){return N}),Er("onAction",N),Sr("icon")].concat(Sk)),zk=function(e){return nr("menuitem",Ck,e)},Ok=Uo([vr("type"),Ar("active",!1),Er("onSetup",function(){return N}),pr("onAction")].concat(Sk)),Tk=function(e){return nr("togglemenuitem",Ok,e)},Mk=Uo([vr("type"),Ar("active",!1),Sr("icon")].concat(Sk)),Hk=Uo([vr("type"),Sr("text")]),Ak=Uo([vr("type"),(dk="fancytype",mk=["inserttable"],qo(dk,dk,To(),Zo(function(e){return M(mk,e)?ie.value(e):ie.error('Value was: "'+e+'". Must be one of ['+E(mk,function(e){return'"'+e+'"'}).join(", ")+"]")}))),Er("onAction",N)]),Ek=function(e,o,t){var r=uu(e.element(),"."+t);if(0<r.length){var n=I(r,function(e){var t=e.dom().getBoundingClientRect().top,n=r[0].dom().getBoundingClientRect().top;return Math.abs(t-n)>o}).getOr(r.length);return P.some({numColumns:n,numRows:Math.ceil(r.length/n)})}return P.none()},Vk=function(e,t){return xi([Om(e,t)])},Dk=function(e){return Vk(oo("unnamed-events"),e)},Bk=function(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:(t=e,"color"===t?"tox-swatches":"tox-menu"),tieredMenu:"tox-tiered-menu"};var t},Rk=function(e){var t=Bk(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:Ux(e)}},Fk=function(e,t,n){var o=Bk(n);return{tag:"div",classes:j([[o.menu,"tox-menu-"+t+"-column"],e?[o.hasIcons]:[]])}},Ik=[ih.parts().items({})],_k=function(e,t,n){var o=Bk(n);return{dom:{tag:"div",classes:j([[o.tieredMenu]])},markers:Rk(n)}},Lk=function(e,t){var n=Rk(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},Nk=function(n,o){return function(e){var t=A(e,o);return E(t,function(e){return{dom:n,components:e}})}},Pk=function(t,i){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[ih.parts().items({preprocess:function(e){return"auto"!==t&&1<t?Nk({tag:"div",classes:["tox-collection__group"]},t)(e):(n=function(e,t){return"separator"===i[t].type},o=[],r=[],V(e,function(e,t){n(e,t)?(0<r.length&&o.push(r),r=[]):r.push(e)}),0<r.length&&o.push(r),E(o,function(e){return{dom:{tag:"div",classes:["tox-collection__group"]},components:e}}));var n,o,r}})]}};(hk=gk||(gk={}))[hk.ContentFocus=0]="ContentFocus",hk[hk.UiFocus=1]="UiFocus";var jk,Uk,Wk=function(e){return console.error(ar(e)),console.log(e),P.none()},Gk=function(e){return e.icon!==undefined},Xk=function(e){return H(e,Gk)},Yk=function(e,t,n){switch(e.type){case"menuitem":return zk(e).fold(Wk,function(e){return P.some(yk(e,t,n))});case"styleitem":return"menuitem"===e.item.type?zk(e.item).fold(Wk,function(e){return P.some(wk(e,t,n))}):"togglemenuitem"===e.item.type?Tk(e.item).fold(Wk,function(e){return P.some(wk(e,t,n))}):(console.error("Unsupported style item delegate",e.item),P.none());case"togglemenuitem":return Tk(e).fold(Wk,function(e){return P.some(xk(e,t,n))});case"separator":return(r=e,nr("separatormenuitem",Hk,r)).fold(Wk,function(e){return P.some(bk(e))});case"fancymenuitem":return(o=e,nr("fancymenuitem",Ak,o)).fold(Wk,function(e){return kk(e)});default:return console.error("Unknown item in general menu",e),P.none()}var o,r},$k=function(e,t,n,o,r){var i,a,u;return"color"===r?{value:e,dom:(i=o,u={dom:{tag:"div",classes:["tox-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ih.parts().items({preprocess:"auto"!==i?Nk({tag:"div",classes:["tox-swatches__row"]},i):b})]}]}).dom,components:u.components,items:n}:"normal"===r&&"auto"===o?{value:e,dom:(u=Pk(o,n)).dom,components:u.components,items:n}:"normal"===r&&1===o?{value:e,dom:(u=Pk(1,n)).dom,components:u.components,items:n}:"normal"===r?{value:e,dom:(u=Pk(o,n)).dom,components:u.components,items:n}:"toolbar"!==r||"auto"===o?{value:e,dom:Fk(t,o,r),components:Ik,items:n}:{value:e,dom:(a=o,u={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ih.parts().items({preprocess:Nk({tag:"div",classes:["tox-collection__group"]},a)})]}).dom,components:u.components,items:n}},qk=function(e,n,o,r,i,a,u){return Ee(E(e,function(t){return"choiceitem"===t.type?(e=t,nr("choicemenuitem",Mk,e)).fold(Wk,function(e){return P.some(vk(e,1===o,r,n,a(t.value),i,u))}):P.none();var e}))},Kk=function(e,n,o,r,i){return Ee(E(e,function(e){return(t=e,nr("Autocompleter.Item",Vx,t)).fold(Wk,function(e){return P.some(pk(e,1===o,"normal",n,r,i))});var t}))},Jk=function(e,t,n,o){var r=Xk(t),i=Ee(E(t,function(e){return Yk(e,n,o)}));return $k(e,r,i,1,"normal")},Qk=function(g,h){var v=Ug(px.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],lazySink:h.getSink})),e=function(){return px.isOpen(v)},p=function(){e()&&px.hide(v)},t=Ze(function(){return Bx(g)}),n={onKeypressThrottle:gp(function(e){(" "===e.key?P.none():Ex(g,t)).fold(p,function(m){m.lookupData.then(function(e){var t,n,o,r,i,a,u,c,s,l,f=(t=m.triggerChar,o=Ve(n=e,function(e){return P.from(e.columns)}).getOr(1),W(n,function(i){var e=i.items;return Kk(e,function(o,r){var e=g.selection.getRng();Mx(e,t,e.startContainer.data,e.startOffset,0).fold(function(){return console.error("Lost context. Cursor probably moved")},function(e){var t=e.rng,n={hide:p};i.onAction(n,t,o,r)})},o,zx.BUBBLE_TO_SANDBOX,h.providers)})),d=Ve(e,function(e){return P.from(e.columns)}).getOr(1);px.showAt(v,{anchor:"selection",root:Yt.fromDom(g.getBody()),getSelection:function(){return P.some({start:function(){return Yt.fromDom(m.range.startContainer)},soffset:function(){return m.range.startOffset},finish:function(){return Yt.fromDom(m.range.endContainer)},foffset:function(){return m.range.endOffset}})}},ih.sketch((r=$k("autocompleter-value",!0,f,d,"normal"),i=d,a=gk.ContentFocus,u="normal",c=a===gk.ContentFocus?_u():Iu(),s=Lk(i,u),l=Rk(u),{dom:r.dom,components:r.components,items:r.items,value:r.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:a===gk.ContentFocus,focusManager:c,menuBehaviours:Dk("auto"!==i?[]:[ei(function(o,e){Ek(o,4,l.item).each(function(e){var t=e.numColumns,n=e.numRows;ds.setGridSize(o,n,t)})})])}))),px.getContent(v).each(Ru.highlightFirst)})})},50).throttle,closeIfNecessary:p,isActive:e,getView:function(){return px.getContent(v)}};Hx(n,g)},Zk=oo("form-component-change"),eS=oo("form-close"),tS=oo("form-cancel"),nS=oo("form-action"),oS=oo("form-submit"),rS=oo("form-block"),iS=oo("form-unblock"),aS=oo("form-tabchange"),uS=oo("form-resize"),cS=U([Or("prefix","form-field"),ms("fieldBehaviours",[Hm,af])]),sS=U([js({schema:[gr("dom")],name:"label"}),js({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[gr("text")],name:"aria-descriptor"}),Ns({factory:{sketch:function(e){var t=ke(e,["factory"]);return e.factory.sketch(t)}},schema:[gr("factory")],name:"field"})]),lS=Tl({name:"FormField",configFields:cS(),partFields:sS(),factory:function(r,e,t,n){var o=te(xi([Hm.config({find:function(e){return el(e,r,"field")}}),af.config({store:{mode:"manual",getValue:function(e){return Hm.getCurrent(e).bind(af.getValue)},setValue:function(e,t){Hm.getCurrent(e).each(function(e){af.setValue(e,t)})}}})]),gs(r.fieldBehaviours())),i=Ur([ei(function(e,t){var o=nl(e,r,["label","field","aria-descriptor"]);o.field().each(function(n){var t=oo(r.prefix());o.label().each(function(e){Un.set(e.element(),"for",t),Un.set(n.element(),"id",t)}),o["aria-descriptor"]().each(function(e){var t=oo(r.prefix());Un.set(e.element(),"id",t),Un.set(n.element(),"aria-labelledby",t)})})})]),a={getField:function(e){return el(e,r,"field")},getLabel:function(e){return el(e,r,"label")}};return{uid:r.uid(),dom:r.dom(),components:e,behaviours:o,events:i,apis:a}},apis:{getField:function(e,t){return e.getField(t)},getLabel:function(e,t){return e.getLabel(t)}}}),fS=Object.freeze({getCoupled:function(e,t,n,o){return n.getOrCreate(e,t,o)}}),dS=[hr("others",Go(ie.value,cr()))],mS=Object.freeze({init:function(e){var i={},t=U({});return yi({readState:t,getOrCreate:function(n,o,r){var e=ae(o.others());if(e)return ze(i,r).getOrThunk(function(){var e=ze(o.others(),r).getOrDie("No information found for coupled component: "+r)()(n),t=n.getSystem().build(e);return i[r]=t});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+Bo(e,null,2))}})}}),gS=Si({fields:dS,name:"coupling",apis:fS,state:mS}),hS=Object.freeze({events:function(e,t){var n=e.stream().streams().setup(e,t);return Ur([Xr(e.event(),n),ti(function(){return t.cancel()})].concat(e.cancelEvent().map(function(e){return[Xr(e,function(){return t.cancel()})]}).getOr([])))}}),vS=function(e){var t=Ae(null);return yi({readState:function(){return{timer:null!==t.get()?"set":"unset"}},setTimer:function(e){t.set(e)},cancel:function(){var e=t.get();null!==e&&e.cancel()}})},pS=Object.freeze({throttle:vS,init:function(e){return e.stream().streams().state(e)}}),bS=[hr("stream",ur("mode",{throttle:[gr("delay"),Or("stopEvent",!0),va("streams",{setup:function(e,t){var n=e.stream(),o=gp(e.onStream(),n.delay());return t.setTimer(o),function(e,t){o.throttle(e,t),n.stopEvent()&&t.stop()}},state:vS})]})),Or("event","input"),xr("cancelEvent"),ga("onStream")],wS=Si({fields:bS,name:"streaming",active:hS,state:pS}),yS=U("sink"),xS=U(js({name:yS(),overrides:U({dom:{tag:"div"},behaviours:xi([tx.config({useFixed:!0})]),events:Ur([Jr(Ge()),Jr(_e()),Jr(qe())])})}));(Uk=jk||(jk={}))[Uk.HighlightFirst=0]="HighlightFirst",Uk[Uk.HighlightNone=1]="HighlightNone";var kS=function(e,t){return{anchor:"hotspot",hotspot:e.getHotspot()(t).getOr(t)}},SS=function(e,t,n,o,r,i,a){var u,c,s,l,f,d,m,g,h,v,p=kS(e,n);return(c=p,l=o,f=r,d=a,m=t,g=s=n,h=(u=e).fetch()(g).map(m),v=OS(s,u),h.map(function(e){return vh.sketch(te(f.menu(),{uid:yl(""),data:e,highlightImmediately:d===jk.HighlightFirst,onOpenMenu:function(e,t){var n=v().getOrDie();tx.position(n,c,t),fx.decloak(l)},onOpenSubmenu:function(e,t,n){var o=v().getOrDie();tx.position(o,{anchor:"submenu",item:t},n),fx.decloak(l)},onEscape:function(){return Ua.focus(s),fx.close(l),P.some(!0)}}))})).map(function(e){return fx.cloak(o),fx.open(o,e),i(o),o})},CS=function(e,t,n,o,r,i,a){return fx.close(o),kb.pure(o)},zS=function(e,t,n,o,r,i){var a=gS.getCoupled(n,"sandbox");return(fx.isOpen(a)?CS:SS)(e,t,n,a,o,r,i)},OS=function(e,t){return e.getSystem().getByUid(t.uid()+"-"+yS()).map(function(e){return U(ie.value(e))}).getOrThunk(function(){return t.lazySink().fold(function(){return U(ie.error(new Error("No internal sink is specified, nor could an external sink be found")))},b)})},TS=function(c,s,l){var t,f=(t=oo("aria-owns"),{id:U(t),link:function(e){Un.set(e,"aria-owns",t)},unlink:function(e){Un.remove(e,"aria-owns")}}),e=OS(s,c);return{dom:{tag:"div",classes:c.sandboxClasses(),attributes:{id:f.id()}},behaviours:te(xi([af.config({store:{mode:"memory",initialValue:s}}),fx.config({onOpen:function(e,t){var n,o,r,i,a,u=kS(c,s);f.link(s.element()),c.matchWidth()&&(n=u.hotspot,o=t,r=c.useMinWidth(),i=Hm.getCurrent(o).getOr(o),a=wf(n.element()),r?Ka.set(i.element(),"min-width",a+"px"):bf(i.element(),a)),c.onOpen()(u,e,t),l!==undefined&&l.onOpen!==undefined&&l.onOpen(e,t)},onClose:function(e,t){f.unlink(s.element()),l!==undefined&&l.onClose!==undefined&&l.onClose(e,t)},isPartOf:function(e,t,n){return hw(t,n)||hw(s,n)},getAttachPoint:function(){return e().getOrDie()}}),Hm.config({find:function(e){return fx.getState(e).bind(function(e){return Hm.getCurrent(e)})}}),hx({isExtraPart:U(!1)})]),vs(c.sandboxBehaviours()))}},MS=function(e,t,n){var o=af.getValue(n);af.setValue(t,o),AS(t)},HS=function(e,t){var n=e.element(),o=Dm(n),r=n.dom();"number"!==Un.get(n,"type")&&t(r,o)},AS=function(e){HS(e,function(e,t){return e.setSelectionRange(t.length,t.length)})},ES=function(e,t,o){if(e.selectsOver()){var n=af.getValue(t),r=e.getDisplayText()(n),i=af.getValue(o);return 0===e.getDisplayText()(i).indexOf(r)?P.some(function(){var e,n;MS(0,t,o),e=t,n=r.length,HS(e,function(e,t){return e.setSelectionRange(n,t.length)})}):P.none()}return P.none()},VS=U("alloy.typeahead.itemexecute"),DS=function(){return[Or("sandboxClasses",[]),hs("sandboxBehaviours",[Hm,ya,fx,af])]},BS=U([xr("lazySink"),gr("fetch"),Or("minChars",5),Or("responseTime",1e3),da("onOpen"),Or("getHotspot",P.some),Or("eventOrder",{}),Vr("model",{},[Or("getDisplayText",function(e){return e.meta!==undefined&&e.meta.text!==undefined?e.meta.text:e.value}),Or("selectsOver",!0),Or("populateFromBrowse",!0)]),ma("onExecute"),da("onItemExecute"),Or("inputClasses",[]),Or("inputAttributes",{}),Or("inputStyles",{}),Or("matchWidth",!0),Or("useMinWidth",!1),Or("dismissOnBlur",!0),la(["openClass"]),xr("initialData"),ms("typeaheadBehaviours",[Ua,af,wS,ds,Va,gS]),Dr("previewing",function(){return Ae(!0)})].concat(Bm()).concat(DS())),RS=U([Ps({schema:[sa()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(t,n){o.previewing().get()?t.getSystem().getByUid(o.uid()).each(function(e){ES(o.model(),e,n).fold(function(){return Ru.dehighlight(t,n)},function(e){return e()})}):t.getSystem().getByUid(o.uid()).each(function(e){o.model().populateFromBrowse()&&MS(o.model(),e,n)}),o.previewing().set(!1)},onExecute:function(e,t){return e.getSystem().getByUid(o.uid()).toOption().map(function(e){return ao(e,VS(),{item:t}),!0})},onHover:function(e,t){o.previewing().set(!1),e.getSystem().getByUid(o.uid()).each(function(e){o.model().populateFromBrowse()&&MS(o.model(),e,t)})}}}})]),FS=Tl({name:"Typeahead",configFields:BS(),partFields:RS(),factory:function(r,e,t,i){var n=function(e,t,n){r.previewing().set(!1);var o=gS.getCoupled(e,"sandbox");fx.isOpen(o)?Hm.getCurrent(o).each(function(e){Ru.getHighlighted(e).fold(function(){n(e)},function(){lo(o,e.element(),"keydown",t)})}):SS(r,a(e),e,o,i,function(e){Hm.getCurrent(e).each(n)},jk.HighlightFirst).get(N)},o=Rm(r),a=function(o){return function(e){var t=de(e.menus),n=W(t,function(e){return D(e.items,function(e){return"item"===e.type})});return af.getState(o).update(E(n,function(e){return e.data})),e}},u=xi([Ua.config({}),af.config({store:te({mode:"dataset",getDataKey:function(e){return Dm(e.element())},getFallbackEntry:function(e){return{value:e,meta:{}}},setValue:function(e,t){Vm(e.element(),r.model().getDisplayText()(t))}},r.initialData().map(function(e){return Oe("initialValue",e)}).getOr({}))}),wS.config({stream:{mode:"throttle",delay:r.responseTime(),stopEvent:!1},onStream:function(e,t){var n=gS.getCoupled(e,"sandbox");if(Ua.isFocused(e)&&Dm(e.element()).length>=r.minChars()){var o=Hm.getCurrent(n).bind(function(e){return Ru.getHighlighted(e).map(af.getValue)});r.previewing().set(!0),SS(r,a(e),e,n,i,function(e){Hm.getCurrent(n).each(function(e){o.fold(function(){r.model().selectsOver()&&Ru.highlightFirst(e)},function(t){Ru.highlightBy(e,function(e){return af.getValue(e).value===t.value}),Ru.getHighlighted(e).orThunk(function(){return Ru.highlightFirst(e),P.none()})})})},jk.HighlightFirst).get(N)}},cancelEvent:Ft()}),ds.config({mode:"special",onDown:function(e,t){return n(e,t,Ru.highlightFirst),P.some(!0)},onEscape:function(e){var t=gS.getCoupled(e,"sandbox");return fx.isOpen(t)?(fx.close(t),P.some(!0)):P.none()},onUp:function(e,t){return n(e,t,Ru.highlightLast),P.some(!0)},onEnter:function(t){var e=gS.getCoupled(t,"sandbox"),n=fx.isOpen(e);if(n&&!r.previewing().get())return Hm.getCurrent(e).bind(function(e){return Ru.getHighlighted(e)}).map(function(e){return ao(t,VS(),{item:e}),!0});var o=af.getValue(t);return io(t,Ft()),r.onExecute()(e,t,o),n&&fx.close(e),P.some(!0)}}),Va.config({toggleClass:r.markers().openClass(),aria:{mode:"pressed",syncWithExpanded:!0}}),gS.config({others:{sandbox:function(e){return TS(r,e,{onOpen:b,onClose:b})}}}),Om("typeaheadevents",[oi(function(e){var t=N;zS(r,a(e),e,i,t,jk.HighlightFirst).get(N)}),Xr(VS(),function(e,t){var n=gS.getCoupled(e,"sandbox");MS(r.model(),e,t.event().item()),io(e,Ft()),r.onItemExecute()(e,n,t.event().item(),af.getValue(e)),fx.close(n),AS(e)})].concat(r.dismissOnBlur()?[Xr(Mt(),function(e){var t=gS.getCoupled(e,"sandbox");Zi(t.element()).isNone()&&fx.close(t)})]:[]))]);return{uid:r.uid(),dom:Fm(r),behaviours:te(o,u,gs(r.typeaheadBehaviours())),eventOrder:r.eventOrder()}}}),IS=function(e,t,n){var o=LS(e,t,n);return lS.sketch(o)},_S=function(e,t){return IS(e,t,[])},LS=function(e,t,n){return{dom:NS(n),components:e.toArray().concat([t])}},NS=function(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},PS=function(e){return lS.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e}})},jS=function(e){return He(e,"getSubmenuItems")?(n=(t=e).getSubmenuItems(),o=US(n),{item:t,menus:te(o.menus,Oe(t.value,o.items)),expansions:te(o.expansions,Oe(t.value,t.value))}):{item:e,menus:{},expansions:{}};var t,n,o},US=function(e){return B(e,function(e,t){var n=ze(t,"value").getOrThunk(function(){return oo("generated-menu-item")}),o=te({value:n},t),r=jS(o);return{menus:te(e.menus,r.menus),items:[r.item].concat(e.items),expansions:te(e.expansions,r.expansions)}},{menus:{},expansions:{},items:[]})},WS=function(e,n,o){var t=oo("primary-menu"),r=US(e),i=Jk(t,r.items,n,o),a=se(r.menus,function(e,t){return Jk(t,e,n,o)}),u=te(a,Oe(t,i));return vh.tieredData(t,u,r.expansions)},GS=zt.detect().browser.isFirefox(),XS={position:"absolute",left:"-9999px"},YS=function(e,t,n){var o,r,i,a=function(e,t){var n=Yt.fromTag("span",e.dom());Un.set(n,"role","presentation");var o=Yt.fromText(t,e.dom());return Sn.append(n,o),n}(wn.owner(t),n);GS&&(o=t,r=a,i=oo("ephox-alloy-aria-voice"),Un.set(r,"id",i),Un.set(o,"aria-describedby",i)),Un.setAll(a,e(n)),Ka.setAll(a,XS),Sn.append(t,a),setTimeout(function(){Un.remove(a,"aria-live"),Tn.remove(a)},1e3)},$S=function(e){return{"aria-live":"assertive","aria-atomic":"true",role:"alert"}},qS=["input","textarea"],KS=function(e){var t=_n.name(e);return M(qS,t)},JS=function(e,t){var n=t.getRoot()(e).getOr(e.element());Pi.remove(n,t.invalidClass()),t.notify().each(function(t){KS(e.element())&&Un.remove(n,"title"),t.getContainer()(e).each(function(e){An(e,t.validHtml())}),t.onValid()(e)})},QS=function(n,e,t,o){var r=e.getRoot()(n).getOr(n.element());Pi.add(r,e.invalidClass()),e.notify().each(function(e){var t;KS(n.element())&&Un.set(n.element(),"title",o),t=go.body(),YS($S,t,o),e.getContainer()(n).each(function(e){An(e,o)}),e.onInvalid()(n,o)})},ZS=function(t,e,n){return e.validator().fold(function(){return kb.pure(ie.value(!0))},function(e){return e.validate()(t)})},eC=function(t,n,e){return n.notify().each(function(e){e.onValidate()(t)}),ZS(t,n).map(function(e){return t.getSystem().isConnected()?e.fold(function(e){return QS(t,n,0,e),ie.error(e)},function(e){return JS(t,n),ie.value(e)}):ie.error("No longer in system")})},tC=Object.freeze({markValid:JS,markInvalid:QS,query:ZS,run:eC,isInvalid:function(e,t){var n=t.getRoot()(e).getOr(e.element());return Pi.has(n,t.invalidClass())}}),nC=Object.freeze({events:function(t,e){return t.validator().map(function(e){return Ur([Xr(e.onEvent(),function(e){eC(e,t).get(b)})].concat(e.validateOnLoad()?[ei(function(e){eC(e,t).get(N)})]:[]))}).getOr({})}}),oC=[gr("invalidClass"),Or("getRoot",P.none),Cr("notify",[Or("aria","alert"),Or("getContainer",P.none),Or("validHtml",""),da("onValid"),da("onInvalid"),da("onValidate")]),Cr("validator",[gr("validate"),Or("onEvent","input"),Or("validateOnLoad",!0)])],rC=Si({fields:oC,name:"invalidating",active:nC,apis:tC,extra:{validation:function(n){return function(e){var t=af.getValue(e);return kb.pure(n(t))}}}}),iC=U([gr("dom"),gr("fetch"),da("onOpen"),ma("onExecute"),Or("getHotspot",P.some),ms("dropdownBehaviours",[Va,gS,ds,Ua]),gr("toggleClass"),Or("eventOrder",{}),xr("lazySink"),Or("matchWidth",!1),Or("useMinWidth",!1),xr("role")].concat(DS())),aC=U([Ps({schema:[sa()],name:"menu",defaults:function(e){return{onExecute:e.onExecute()}}}),xS()]),uC=Tl({name:"Dropdown",configFields:iC(),partFields:aC(),factory:function(t,e,n,o){var r=function(e){fx.getState(e).each(function(e){vh.highlightPrimary(e)})},i={expand:function(e){Va.isOn(e)||zS(t,function(e){return e},e,o,N,jk.HighlightNone).get(N)},open:function(e){Va.isOn(e)||zS(t,function(e){return e},e,o,N,jk.HighlightFirst).get(N)},isOpen:Va.isOn,close:function(e){Va.isOn(e)&&zS(t,function(e){return e},e,o,N,jk.HighlightFirst).get(N)}},a=function(e,t){return uo(e),P.some(!0)};return te({events:_a(P.some(function(e){zS(t,function(e){return e},e,o,r,jk.HighlightFirst).get(N)}))},{uid:t.uid(),dom:t.dom(),components:e,behaviours:te(xi([Va.config({toggleClass:t.toggleClass(),aria:{mode:"pressed",syncWithExpanded:!0}}),gS.config({others:{sandbox:function(e){return TS(t,e,{onOpen:function(){Va.on(e)},onClose:function(){Va.off(e)}})}}}),ds.config({mode:"special",onSpace:a,onEnter:a,onDown:function(e,t){if(uC.isOpen(e)){var n=gS.getCoupled(e,"sandbox");r(n)}else uC.open(e);return P.some(!0)},onEscape:function(e,t){return uC.isOpen(e)?(uC.close(e),P.some(!0)):P.none()}}),Ua.config({})]),gs(t.dropdownBehaviours())),eventOrder:te(t.eventOrder(),{"alloy.execute":["toggling","alloy.base.behaviour"]}),apis:i},{dom:{attributes:{role:t.role().getOr("button"),"aria-haspopup":"true"}}})},apis:{open:function(e,t){return e.open(t)},expand:function(e,t){return e.expand(t)},close:function(e,t){return e.close(t)},isOpen:function(e,t){return e.isOpen(t)}}}),cC=function(e,t){return uC.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:xi([Al.config({}),Nm.config({})]),getHotspot:e.getHotspot,sandboxClasses:["tox-dialog__popups"],sandboxBehaviours:xi([Om("sandbox-behaviours-dropdown",[Xr(nS,e.onChange)])]),lazySink:t.getSink,fetch:function(){var r=oo("menu");return kb.nu(function(o){e.fetch(function(e){var t,n;o(vh.singleData(r,(n=Jd((t={value:r,widget:e}).widget),{value:t.value,items:[{type:"widget",data:{value:oo("widget-id")},autofocus:!0,dom:{tag:"div"},components:[ak().widget({dom:{tag:"div",classes:["tox-menu-widget-js"]},components:[n.asSpec()],behaviours:xi([ds.config({mode:"special",focusIn:function(e){return n.getOpt(e).each(ds.focusIn),P.some(!0)}})])})]}],dom:Fk(!1,1,"normal"),components:[ih.parts().items({})]})))})})},parts:{menu:_k(0,0,"normal")}})},sC=function(e){return{value:U(e)}},lC=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,fC=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,dC=function(e){return lC.test(e)||fC.test(e)},mC=function(e){var t,n=(t=e.value().replace(lC,function(e,t,n,o){return t+t+n+n+o+o}),{value:U(t)});return fC.exec(n.value())},gC=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},hC=function(e){var t=gC(e.red())+gC(e.green())+gC(e.blue());return sC(t)},vC=Math.min,pC=Math.max,bC=Math.round,wC=function(e,t,n,o){return{red:U(e),green:U(t),blue:U(n),alpha:U(o)}},yC=function(e){var t=parseInt(e,10);return t.toString()===e&&0<=t&&t<=255},xC=function(e){var t,n,o,r,i,a,u,c,s,l;if(i=(e.hue()||0)%360,a=e.saturation()/100,u=e.value()/100,a=pC(0,vC(a,1)),u=pC(0,vC(u,1)),0===a)return c=s=l=bC(255*u),wC(c,s,l,1);switch(t=i/60,o=(n=u*a)*(1-Math.abs(t%2-1)),r=u-n,Math.floor(t)){case 0:c=n,s=o,l=0;break;case 1:c=o,s=n,l=0;break;case 2:c=0,s=n,l=o;break;case 3:c=0,s=o,l=n;break;case 4:c=o,s=0,l=n;break;case 5:c=n,s=0,l=o;break;default:c=s=l=0}return c=bC(255*(c+r)),s=bC(255*(s+r)),l=bC(255*(l+r)),wC(c,s,l,1)},kC=function(e){var t=mC(e),n=parseInt(t[1],16),o=parseInt(t[2],16),r=parseInt(t[3],16);return wC(n,o,r,1)},SC=function(e){return"rgba("+e.red()+","+e.green()+","+e.blue()+","+e.alpha()+")"},CC=U(wC(255,0,0,1)),zC=U(oo("rgb-hex-update")),OC=U(oo("slider-update")),TC=U(oo("palette-update")),MC=function(e,o){var r=Nd.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[o("sv-palette-spectrum")]}}),i=Nd.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette-thumb")],innerHtml:"<div class="+o("sv-palette-inner-thumb")+' role="presentation"></div>'}}),a=function(e,t){var n=e.width,o=e.height,r=e.getContext("2d");r.fillStyle=t,r.fillRect(0,0,n,o);var i=r.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,n,o);var a=r.createLinearGradient(0,0,0,o);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=a,r.fillRect(0,0,n,o)};return Ol({factory:function(e){var t=U({x:U(0),y:U(0)}),n=xi([Hm.config({find:P.some}),Ua.config({})]);return Nd.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette")]},model:{mode:"xy",getInitialValue:t},rounded:!1,components:[r,i],onChange:function(e,t,n){ao(e,TC(),{value:n})},onInit:function(e,t,n,o){a(n.element().dom(),SC(CC()))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(e,t,n){var o,r;o=n,r=t.components()[0].element().dom(),a(r,SC(o))}},extraApis:{}})},HC=function(e,t){var n=Nd.parts().spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=Nd.parts().thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:U({y:U(0)})},components:[n,o],sliderBehaviours:xi([Ua.config({})]),onChange:function(e,t,n){ao(e,OC(),{value:n})}})},AC=oo("valid-input"),EC=oo("invalid-input"),VC=oo("validating-input"),DC="colorcustom.rgb.",BC=function(m,g,h,v){var p=function(e,t,n,o,r){var i,a,u=m(DC+"range"),c=[lS.parts().label({dom:{tag:"label",innerHtml:n,attributes:{"aria-label":o}}}),lS.parts().field({data:r,factory:Im,inputAttributes:{type:"text"},inputClasses:[g("textfield")],inputBehaviours:xi([(i=t,a=e,rC.config({invalidClass:g("invalid"),notify:{onValidate:function(e){ao(e,VC,{type:i})},onValid:function(e){ao(e,AC,{type:i,value:af.getValue(e)})},onInvalid:function(e){ao(e,EC,{type:i,value:af.getValue(e)})}},validator:{validate:function(e){var t=af.getValue(e),n=a(t)?ie.value(!0):ie.error(m("aria.input.invalid"));return kb.pure(n)},validateOnLoad:!1}})),Nm.config({})]),onSetValue:function(e){rC.isInvalid(e)&&rC.run(e).get(N)}})],s="hex"!==t?[lS.parts()["aria-descriptor"]({text:u})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(s)}},b=function(e,t){var n=t.red(),o=t.green(),r=t.blue();af.setValue(e,{red:n,green:o,blue:r})},w=Jd({dom:{tag:"div",classes:[g("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),y=function(e,t){w.getOpt(e).each(function(e){Ka.set(e.element(),"background-color","#"+t.value())})};return Ol({factory:function(e){var n={red:U(Ae(P.some(255))),green:U(Ae(P.some(255))),blue:U(Ae(P.some(255))),hex:U(Ae(P.some("ffffff")))},o=function(e){return n[e]().get()},i=function(e,t){n[e]().set(t)},r=function(e){var t=e.red(),n=e.green(),o=e.blue();i("red",P.some(t)),i("green",P.some(n)),i("blue",P.some(o))},t=function(e,t){var n=t.event();"hex"!==n.type()?i(n.type(),P.none()):v(e)},a=function(r,e,t){var n=parseInt(t,10);i(e,P.some(n)),o("red").bind(function(n){return o("green").bind(function(t){return o("blue").map(function(e){return wC(n,t,e,1)})})}).each(function(e){var t,n,o=(t=r,n=hC(e),rg.getField(t,"hex").each(function(e){Ua.isFocused(e)||af.setValue(t,{hex:n.value()})}),n);y(r,o)})},u=function(e,t){var n=t.event();"hex"===n.type()?function(e,t){h(e);var n=sC(t);i("hex",P.some(t));var o=kC(n);b(e,o),r(o),ao(e,zC(),{hex:n}),y(e,n)}(e,n.value()):a(e,n.type(),n.value())},c=function(e){return{label:m(DC+e+".label"),description:m(DC+e+".description")}},s=c("red"),l=c("green"),f=c("blue"),d=c("hex");return te(rg.sketch(function(e){return{dom:{tag:"form",classes:[g("rgb-form")],attributes:{"aria-label":m("aria.color.picker")}},components:[e.field("red",lS.sketch(p(yC,"red",s.label,s.description,255))),e.field("green",lS.sketch(p(yC,"green",l.label,l.description,255))),e.field("blue",lS.sketch(p(yC,"blue",f.label,f.description,255))),e.field("hex",lS.sketch(p(dC,"hex",d.label,d.description,"ffffff"))),w.asSpec()],formBehaviours:xi([rC.config({invalidClass:g("form-invalid")}),Om("rgb-form-events",[Xr(AC,u),Xr(EC,t),Xr(VC,t)])])}}),{apis:{updateHex:function(e,t){var n,o;af.setValue(e,{hex:t.value()}),n=e,o=kC(t),b(n,o),r(o),y(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(e,t,n){e.updateHex(t,n)}},extraApis:{}})},RC=function(e,t,n){return{hue:U(e),saturation:U(t),value:U(n)}},FC=function(c,s){return Ol({name:"ColourPicker",configFields:[Or("onValidHex",N),Or("onInvalidHex",N),Sr("formChangeEvent")],factory:function(e){var u,p,n=BC(c,s,e.onValidHex(),e.onInvalidHex()),o=MC(c,s),b={paletteRgba:U(Ae(CC()))},t=Jd(o.sketch({})),r=Jd(n.sketch({})),i=function(e,n){t.getOpt(e).each(function(e){var t=kC(n);b.paletteRgba().set(t),o.setRgba(e,t)})},a=function(e,t){r.getOpt(e).each(function(e){n.updateHex(e,t)})},w=function(t,n,e){V(e,function(e){e(t,n)})};return{uid:e.uid(),dom:e.dom(),components:[t.asSpec(),HC(c,s),r.asSpec()],behaviours:xi([Om("colour-picker-events",[Xr(TC(),(p=[a],function(e,t){var n,o,r,i,a,u,c,s,l,f=t.event().value(),d=b.paletteRgba().get(),m=(c=a=0,o=(n=d).red()/255,r=n.green()/255,i=n.blue()/255,(s=Math.min(o,Math.min(r,i)))===(l=Math.max(o,Math.max(r,i)))?RC(0,0,100*(c=s)):(a=60*((a=o===s?3:i===s?1:5)-(o===s?r-i:i===s?o-r:i-o)/(l-s)),u=(l-s)/l,c=l,RC(Math.round(a),Math.round(100*u),Math.round(100*c)))),g=RC(m.hue(),f.x(),100-f.y()),h=xC(g),v=hC(h);w(e,v,p)})),Xr(OC(),(u=[i,a],function(e,t){var n,o,r,i=t.event().value(),a=(n=i.y(),o=RC(360*(100-n/100),100,100),r=xC(o),hC(r));w(e,a,u)}))]),Hm.config({find:function(e){return r.getOpt(e)}}),ds.config({mode:"acyclic"})])}}})},IC=function(){return Hm.config({find:P.some})},_C=function(e){return Hm.config({find:e.getOpt})},LC=function(e){return Hm.config({find:function(t){return wn.child(t.element(),e).bind(function(e){return t.getSystem().getByDom(e).toOption()})}})},NC={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},PC=function(e){return NC[e]},jC=function(e){var t=function(e){return"tox-"+e},n=FC(PC,t),r=Jd(n.sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(e){ao(e,nS,{name:"hex-valid",value:!0})},onInvalidHex:function(e){ao(e,nS,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:xi([af.config({store:{mode:"manual",getValue:function(e){var t=r.get(e);return Hm.getCurrent(t).bind(function(e){return af.getValue(e).hex}).map(function(e){return"#"+e}).getOr("")},setValue:function(e,t){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),o=r.get(e);Hm.getCurrent(o).fold(function(){console.log("Can not find form")},function(e){af.setValue(e,{hex:P.from(n[1]).getOr("")}),rg.getField(e,"hex").each(function(e){io(e,Ye())})})}}}),IC()])}},UC=Uo([Or("preprocess",b),Or("postprocess",b)]),WC=function(e,t,n){return af.config(te({store:{mode:"manual",getValue:t,setValue:n}},e.map(function(e){return{store:{initialValue:e}}}).getOr({})))},GC=function(e,t,n){return WC(e,function(e){return t(e.element())},function(e,t){return n(e.element(),t)})},XC=function(r,e){var i=rr("RepresentingConfigs.memento processors",UC,e);return af.config({store:{mode:"manual",getValue:function(e){var t=r.get(e),n=af.getValue(t);return i.postprocess(n)},setValue:function(e,t){var n=i.preprocess(t),o=r.get(e);af.setValue(o,n)}}})},YC=WC,$C=function(e){return GC(e,Hn,An)},qC=function(e){return af.config({store:{mode:"memory",initialValue:e}})},KC=function(e,t){return{dom:{tag:"span",innerHtml:xx("icon-"+e,t,U(e))}}},JC=function(e,t){return{dom:{tag:"span",innerHtml:e,classes:[t+"__select-label"]},behaviours:xi([fh.config({})])}},QC=function(e,t,n,o,r){void 0===n&&(n=[]);var i={buttonBehaviours:xi([Qx(e.disabled),Nm.config({}),Om("button press",[Gr("click"),Gr("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},action:t},a=te(i,{dom:o}),u=te(a,{components:r});return Ml.sketch(u)},ZC=function(e,t,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(function(e){return{"aria-label":e,title:e}}).getOr({})},i=e.icon.map(function(e){return KC(e,n)}),a=ok([i]);return QC(e,t,o,r,a)},ez=function(e,t,n){void 0===n&&(n=[]);var o={tag:"button",classes:e.primary?["tox-button"]:["tox-button","tox-button--secondary"],innerHtml:e.text};return QC(e,t,n,o,[])},tz=function(t,n){return function(e){"custom"===n?ao(e,nS,{name:t,value:{}}):"submit"===n?io(e,oS):"cancel"===n?io(e,tS):console.error("Unknown button type: ",n)}},nz=function(e,t){var n=tz(e.name,t);return ez(e,n,[])},oz=oo("color-change"),rz=oo("hex-change"),iz=function(e,t,n){return du(e,t,n).isSome()},az=oo("alloy-fake-before-tabstop"),uz=oo("alloy-fake-after-tabstop"),cz=function(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:xi([Nm.config({})])}},sz=function(e,t){ao(e,Ge(),{raw:{which:9,shiftKey:t}})},lz=function(e){return iz(e,["."+az,"."+uz].join(","),U(!1))},fz=function(e,t){var n=t.element();Pi.has(n,az)?sz(e,!0):Pi.has(n,uz)&&sz(e,!1)},dz=function(e){return{dom:{tag:"div",classes:["tox-navobj"]},components:[cz([az]),e,cz([uz])],behaviours:xi([LC(1)])}},mz=!zt.detect().browser.isIE(),gz=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),hz=tinymce.util.Tools.resolve("tinymce.geom.Rect"),vz=tinymce.util.Tools.resolve("tinymce.util.Observable"),pz=tinymce.util.Tools.resolve("tinymce.util.Tools"),bz=tinymce.util.Tools.resolve("tinymce.util.VK");function wz(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function yz(e,r){var i,a,t,u,c,l,f,d=r.document||document;r=r||{};var m=d.getElementById(r.handle||e);t=function(e){var t,n,o=function s(e){var t,n,o,r,i,a,u,c=Math.max;return t=e.documentElement,n=e.body,o=c(t.scrollWidth,n.scrollWidth),r=c(t.clientWidth,n.clientWidth),i=c(t.offsetWidth,n.offsetWidth),a=c(t.scrollHeight,n.scrollHeight),u=c(t.clientHeight,n.clientHeight),{width:o<i?r:o,height:a<c(t.offsetHeight,n.offsetHeight)?u:a}}(d);wz(e),e.preventDefault(),a=e.button,t=m,l=e.screenX,f=e.screenY,n=window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue("cursor"):t.runtimeStyle.cursor,i=gz("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:n}).appendTo(d.body),gz(d).on("mousemove touchmove",c).on("mouseup touchend",u),r.start(e)},c=function(e){if(wz(e),e.button!==a)return u(e);e.deltaX=e.screenX-l,e.deltaY=e.screenY-f,e.preventDefault(),r.drag(e)},u=function(e){wz(e),gz(d).off("mousemove touchmove",c).off("mouseup touchend",u),i.remove(),r.stop&&r.stop(e)},this.destroy=function(){gz(m).off()},gz(m).on("mousedown touchstart",t)}var xz=0,kz=function(t){var l=Jd({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=Ae(1),d=Ae(P.none()),m=Ae({x:0,y:0,w:1,h:1}),c=Ae({x:0,y:0,w:1,h:1}),s=function(e,s){g.getOpt(e).each(function(e){var n=f.get(),o=wf(e.element()),r=Za(e.element()),i=s.dom().naturalWidth*n,a=s.dom().naturalHeight*n,u=Math.max(0,o/2-i/2),c=Math.max(0,r/2-a/2),t={left:u.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:a.toString()+"px",position:"absolute"};Ka.setAll(s,t),l.getOpt(e).each(function(e){Ka.setAll(e.element(),t)}),d.get().each(function(e){var t=m.get();e.setRect({x:t.x*n+u,y:t.y*n+c,w:t.w*n,h:t.h*n}),e.setClampRect({x:u,y:c,w:i,h:a}),e.setViewPortRect({x:0,y:0,w:o,h:r})})})},n=function(e,t){var n,u=Yt.fromTag("img");return Un.set(u,"src",t),(n=u.dom(),new Ax(function(e){var t=function(){n.removeEventListener("load",t),e(n)};n.complete?e(n):n.addEventListener("load",t)})).then(function(){return g.getOpt(e).map(function(e){var t=jg({element:u});fh.replaceAt(e,1,P.some(t));var n=c.get(),o={x:0,y:0,w:u.dom().naturalWidth,h:u.dom().naturalHeight};c.set(o);var r,a,i=hz.inflate(o,-20,-20);return m.set(i),n.w===o.w&&n.h===o.h||(r=e,a=u,g.getOpt(r).each(function(e){var t=wf(e.element()),n=Za(e.element()),o=a.dom().naturalWidth,r=a.dom().naturalHeight,i=Math.min(t/o,n/r);1<=i?f.set(1):f.set(i)})),s(e,u),u})})},e=Am.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:xi([Om("image-panel-crop-events",[ei(function(e){g.getOpt(e).each(function(e){var t=function k(s,n,l,o,r){var f,a,t,i,u="tox-",c="tox-crid-"+xz++;function d(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function m(e,t,n,o){var r,i,a,u,c;r=t.x,i=t.y,a=t.w,u=t.h,r+=n*e.deltaX,i+=o*e.deltaY,(a+=n*e.deltaW)<20&&(a=20),(u+=o*e.deltaH)<20&&(u=20),c=s=hz.clamp({x:r,y:i,w:a,h:u},l,"move"===e.name),c=d(l,c),f.fire("updateRect",{rect:c}),v(c)}function g(t){function e(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),gz("#"+c+"-"+e,o).css({left:t.x,top:t.y,width:t.w,height:t.h})}pz.each(a,function(e){gz("#"+c+"-"+e.name,o).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})}),e("top",{x:n.x,y:n.y,w:n.w,h:t.y-n.y}),e("right",{x:t.x+t.w,y:t.y,w:n.w-t.x-t.w+n.x,h:t.h}),e("bottom",{x:n.x,y:t.y+t.h,w:n.w,h:n.h-t.y-t.h+n.y}),e("left",{x:n.x,y:t.y,w:t.x-n.x,h:t.h}),e("move",t)}function h(e){g(s=e)}function v(e){h(function n(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}(l,e))}return a=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],i=["top","right","bottom","left"],function p(){gz('<div id="'+c+'" class="'+u+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),pz.each(i,function(e){gz("#"+c,o).append('<div id="'+c+"-"+e+'"class="'+u+'croprect-block" style="display: none" data-mce-bogus="all">')}),pz.each(a,function(e){gz("#"+c,o).append('<div id="'+c+"-"+e.name+'" class="'+u+"croprect-handle "+u+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),t=pz.map(a,function e(t){var n;return new yz(c,{document:o.ownerDocument,handle:c+"-"+t.name,start:function(){n=s},drag:function(e){m(t,n,e.deltaX,e.deltaY)}})}),g(s),gz(o).on("focusin focusout",function(e){gz(e.target).attr("aria-grabbed","focus"===e.type)}),gz(o).on("keydown",function(t){var i;function e(e,t,n,o,r){e.stopPropagation(),e.preventDefault(),m(i,n,o,r)}switch(pz.each(a,function(e){if(t.target.id===c+"-"+e.name)return i=e,!1}),t.keyCode){case bz.LEFT:e(t,0,s,-10,0);break;case bz.RIGHT:e(t,0,s,10,0);break;case bz.UP:e(t,0,s,0,-10);break;case bz.DOWN:e(t,0,s,0,10);break;case bz.ENTER:case bz.SPACEBAR:t.preventDefault(),r()}})}(),f=pz.extend({toggleVisibility:function b(e){var t;t=pz.map(a,function(e){return"#"+c+"-"+e.name}).concat(pz.map(i,function(e){return"#"+c+"-"+e})).join(","),e?gz(t,o).show():gz(t,o).hide()},setClampRect:function w(e){l=e,g(s)},setRect:h,getInnerRect:function e(){return d(l,s)},setInnerRect:v,setViewPortRect:function y(e){n=e,g(s)},destroy:function x(){pz.each(t,function(e){e.destroy()}),t=[]}},vz)}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e.element().dom(),function(){});t.toggleVisibility(!1),t.on("updateRect",function(e){var t=e.rect,n=f.get(),o={x:Math.round(t.x/n),y:Math.round(t.y/n),w:Math.round(t.w/n),h:Math.round(t.h/n)};m.set(o)}),d.set(P.some(t))})})])])}],containerBehaviours:xi([fh.config({}),Om("image-panel-events",[ei(function(e){n(e,t)})])])}),g=Jd(e);return{memContainer:g,updateSrc:n,zoom:function(e,t){var n=f.get(),o=0<t?Math.min(2,n+.1):Math.max(.1,n-.1);f.set(o),g.getOpt(e).each(function(e){var t=e.components()[1].element();s(e,t)})},showCrop:function(){d.get().each(function(e){e.toggleVisibility(!0)})},hideCrop:function(){d.get().each(function(e){e.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var e=c.get();return{width:e.w,height:e.h}}}},Sz={undo:U(oo("undo")),redo:U(oo("redo")),zoom:U(oo("zoom")),back:U(oo("back")),apply:U(oo("apply")),swap:U(oo("swap")),transform:U(oo("transform")),tempTransform:U(oo("temp-transform")),transformApply:U(oo("transform-apply"))},Cz=U("save-state"),zz=U("disable"),Oz=U("enable"),Tz={formActionEvent:nS,saveState:Cz,disable:zz,enable:Oz},Mz=function(e,t,n,o){return ZC({name:e,icon:P.some(e),disabled:t,tooltip:P.some(e)},n,o)},Hz=function(e,t){t?eg.enable(e):eg.disable(e)};function Az(e,t,n){var o=t.type;function r(t,n){return e.then(function(e){return mm.canvasToDataURL(e,t,n)})}return{getType:U(o),toBlob:function i(){return om.resolve(t)},toDataURL:function a(){return n},toBase64:function u(){return n.split(",")[1]},toAdjustedBlob:function c(t,n){return e.then(function(e){return mm.canvasToBlob(e,t,n)})},toAdjustedDataURL:r,toAdjustedBase64:function s(e,t){return r(e,t).then(function(e){return e.split(",")[1]})},toCanvas:function l(){return e.then(tm.clone)}}}function Ez(t){return mm.blobToDataUri(t).then(function(e){return Az(mm.blobToCanvas(t),t,e)})}var Vz={fromBlob:Ez,fromCanvas:function gD(t,e){return mm.canvasToBlob(t,e).then(function(e){return Az(om.resolve(t),e,t.toDataURL())})},fromImage:function hD(e){return mm.imageToBlob(e).then(function(e){return Ez(e)})},fromBlobAndUrlSync:function(e,t){return Az(mm.blobToCanvas(e),e,t)}};function Dz(e,t,n){return n<(e=parseFloat(e))?e=n:e<t&&(e=t),e}var Bz=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function Rz(e,t){var n,o,r,i,a=[],u=new Array(10);for(n=0;n<5;n++){for(o=0;o<5;o++)a[o]=t[o+5*n];for(o=0;o<5;o++){for(r=i=0;r<5;r++)i+=e[o+5*r]*a[r];u[o+5*n]=i}}return u}function Fz(e,n){return n=Dz(n,0,1),e.map(function(e,t){return t%6==0?e=1-(1-e)*n:e*=n,Dz(e,0,1)})}var Iz={identity:function vD(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:Fz,multiply:Rz,adjustContrast:function pD(e,t){var n;return t=Dz(t,-1,1),Rz(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0==(n=t%1)?Bz[t]:Bz[Math.floor(t)]*(1-n)+Bz[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function bD(e,t){return Rz(e,[1,0,0,0,t=Dz(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function wD(e,t){var n;return Rz(e,[.3086*(1-(n=1+(0<(t=Dz(t,-1,1))?3*t:t)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function yD(e,t){var n,o;return t=Dz(t,-180,180)/180*Math.PI,Rz(e,[.213+.787*(n=Math.cos(t))+-.213*(o=Math.sin(t)),.715+-.715*n+-.715*o,.072+-.072*n+.928*o,0,0,.213+-.213*n+.143*o,.715+n*(1-.715)+.14*o,.072+-.072*n+-.283*o,0,0,.213+-.213*n+-.787*o,.715+-.715*n+.715*o,.072+.928*n+.072*o,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function xD(e,t,n,o){return Rz(e,[t=Dz(t,0,2),0,0,0,0,0,n=Dz(n,0,2),0,0,0,0,0,o=Dz(o,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function kD(e,t){return Rz(e,Fz([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=Dz(t,0,1)))},adjustGrayscale:function SD(e,t){return Rz(e,Fz([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=Dz(t,0,1)))}};function _z(t,n){return t.toCanvas().then(function(e){return function i(e,t,n){var o,r=tm.get2dContext(e);return o=function M(e,t){var n,o,r,i,a,u=e.data,c=t[0],s=t[1],l=t[2],f=t[3],d=t[4],m=t[5],g=t[6],h=t[7],v=t[8],p=t[9],b=t[10],w=t[11],y=t[12],x=t[13],k=t[14],S=t[15],C=t[16],z=t[17],O=t[18],T=t[19];for(a=0;a<u.length;a+=4)n=u[a],o=u[a+1],r=u[a+2],i=u[a+3],u[a]=n*c+o*s+r*l+i*f+d,u[a+1]=n*m+o*g+r*h+i*v+p,u[a+2]=n*b+o*w+r*y+i*x+k,u[a+3]=n*S+o*C+r*z+i*O+T;return e}(r.getImageData(0,0,e.width,e.height),n),r.putImageData(o,0,0),Vz.fromCanvas(e,t)}(e,t.getType(),n)})}function Lz(t,n){return t.toCanvas().then(function(e){return function a(e,t,n){var o,r,i=tm.get2dContext(e);return o=i.getImageData(0,0,e.width,e.height),r=i.getImageData(0,0,e.width,e.height),r=function x(e,t,n){var o,r,i,a,u,c,s,l,f,d,m,g,h,v,p,b,w;function y(e,t,n){return n<e?e=n:e<t&&(e=t),e}for(i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),o=e.data,r=t.data,b=e.width,w=e.height,c=0;c<w;c++)for(u=0;u<b;u++){for(s=l=f=0,m=0;m<i;m++)for(d=0;d<i;d++)g=y(u+d-a,0,b-1),h=y(c+m-a,0,w-1),v=4*(h*b+g),p=n[m*i+d],s+=o[v]*p,l+=o[v+1]*p,f+=o[v+2]*p;r[v=4*(c*b+u)]=y(s,0,255),r[v+1]=y(l,0,255),r[v+2]=y(f,0,255)}return t}(o,r,n),i.putImageData(r,0,0),Vz.fromCanvas(e,t)}(e,t.getType(),n)})}function Nz(c){return function(t,n){return t.toCanvas().then(function(e){return function(e,t,n){var o,r,i=tm.get2dContext(e),a=new Array(256);for(r=0;r<a.length;r++)a[r]=c(r,n);return o=function u(e,t){var n,o=e.data;for(n=0;n<o.length;n+=4)o[n]=t[o[n]],o[n+1]=t[o[n+1]],o[n+2]=t[o[n+2]];return e}(i.getImageData(0,0,e.width,e.height),a),i.putImageData(o,0,0),Vz.fromCanvas(e,t)}(e,t.getType(),n)})}}function Pz(n){return function(e,t){return _z(e,n(Iz.identity(),t))}}function jz(t){return function(e){return Lz(e,t)}}var Uz,Wz,Gz,Xz={invert:function CD(t){return function(e){return _z(e,t)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:Pz(Iz.adjustBrightness),hue:Pz(Iz.adjustHue),saturate:Pz(Iz.adjustSaturation),contrast:Pz(Iz.adjustContrast),grayscale:Pz(Iz.adjustGrayscale),sepia:Pz(Iz.adjustSepia),colorize:function(e,t,n,o){return _z(e,Iz.adjustColors(Iz.identity(),t,n,o))},sharpen:jz([0,-1,0,-1,5,-1,0,-1,0]),emboss:jz([-2,-1,0,-1,1,1,0,1,2]),gamma:Nz(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:Nz(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:_z,convoluteFilter:Lz},Yz={scale:function zD(e,t,n){var o=nm.getWidth(e),r=nm.getHeight(e),i=t/o,a=n/r,u=!1;(i<.5||2<i)&&(i=i<.5?.5:2,u=!0),(a<.5||2<a)&&(a=a<.5?.5:2,u=!0);var c=function l(u,c,s){return new om(function(e){var t=nm.getWidth(u),n=nm.getHeight(u),o=Math.floor(t*c),r=Math.floor(n*s),i=tm.create(o,r),a=tm.get2dContext(i);a.drawImage(u,0,0,t,n,0,0,o,r),e(i)})}(e,i,a);return u?c.then(function(e){return zD(e,t,n)}):c}},$z={rotate:function OD(t,n){return t.toCanvas().then(function(e){return function u(e,t,n){var o=tm.create(e.width,e.height),r=tm.get2dContext(o),i=0,a=0;return 90!=(n=n<0?360+n:n)&&270!=n||tm.resize(o,o.height,o.width),90!=n&&180!=n||(i=o.width),270!=n&&180!=n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(e,0,0),Vz.fromCanvas(o,t)}(e,t.getType(),n)})},flip:function TD(t,n){return t.toCanvas().then(function(e){return function i(e,t,n){var o=tm.create(e.width,e.height),r=tm.get2dContext(o);return"v"==n?(r.scale(1,-1),r.drawImage(e,0,-o.height)):(r.scale(-1,1),r.drawImage(e,-o.width,0)),Vz.fromCanvas(o,t)}(e,t.getType(),n)})},crop:function MD(t,n,o,r,i){return t.toCanvas().then(function(e){return function u(e,t,n,o,r,i){var a=tm.create(r,i);return tm.get2dContext(a).drawImage(e,-n,-o),Vz.fromCanvas(a,t)}(e,t.getType(),n,o,r,i)})},resize:function HD(t,n,o){return t.toCanvas().then(function(e){return Yz.scale(e,n,o).then(function(e){return Vz.fromCanvas(e,t.getType())})})}},qz=(function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),o=0,r=0;o<t;o++)r|=this.readByteAt(e+o)<<Math.abs(n+8*o);return r},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return 2147483647<t?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var o=[],r=0;r<n;r++)o[r]=this[e](t+r);return o},e.prototype.length=function(){return this._dv?this._dv.byteLength:0}}(),function(e,t){return $z.rotate(e,t)}),Kz=function(e){return Xz.invert(e)},Jz=function(e){return Xz.sharpen(e)},Qz=function(e,t){return Xz.brightness(e,t)},Zz=function(e,t){return Xz.contrast(e,t)},eO=function(e,t,n,o){return Xz.colorize(e,t,n,o)},tO=function(e,t){return Xz.gamma(e,t)},nO=function(e,t){return $z.flip(e,t)},oO=function(e,t,n,o,r){return $z.crop(e,t,n,o,r)},rO=function(e,t,n){return $z.resize(e,t,n)},iO=qz,aO=U([Or("field1Name","field1"),Or("field2Name","field2"),ga("onLockedChange"),la(["lockClass"]),Or("locked",!1),hs("coupledFieldBehaviours",[Hm,af])]),uO=function(e,i){return Ns({factory:lS,name:e,overrides:function(r){return{fieldBehaviours:xi([Om("coupled-input-behaviour",[Xr(Ye(),function(n){var e,t,o;(e=n,t=r,o=i,el(e,t,o).bind(Hm.getCurrent)).each(function(t){el(n,r,"lock").each(function(e){Va.isOn(e)&&r.onLockedChange()(n,t,e)})})})])])}}})},cO=U([uO("field1","field2"),uO("field2","field1"),Ns({factory:Ml,schema:[gr("dom")],name:"lock",overrides:function(e){return{buttonBehaviours:xi([Va.config({selected:e.locked(),toggleClass:e.markers().lockClass(),aria:{mode:"pressed"}})])}}})]),sO=Tl({name:"FormCoupledInputs",configFields:aO(),partFields:cO(),factory:function(o,e,t,n){return{uid:o.uid(),dom:o.dom(),components:e,behaviours:te(xi([Hm.config({find:P.some}),af.config({store:{mode:"manual",getValue:function(e){var t,n=il(e,o,["field1","field2"]);return(t={})[o.field1Name()]=af.getValue(n.field1()),t[o.field2Name()]=af.getValue(n.field2()),t},setValue:function(e,t){var n=il(e,o,["field1","field2"]);He(t,o.field1Name())&&af.setValue(n.field1(),t[o.field1Name()]),He(t,o.field2Name())&&af.setValue(n.field2(),t[o.field2Name()])}}})]),vs(o.coupledFieldBehaviours())),apis:{getField1:function(e){return el(e,o,"field1")},getField2:function(e){return el(e,o,"field2")},getLock:function(e){return el(e,o,"lock")}}}},apis:{getField1:function(e,t){return e.getField1(t)},getField2:function(e,t){return e.getField2(t)},getLock:function(e,t){return e.getLock(t)}}}),lO=function(e){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null===t)return ie.error(e);var n=parseFloat(t[1]),o=t[2];return ie.value({value:n,unit:o})},fO=function(e,t){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1},o=function(e){return Object.prototype.hasOwnProperty.call(n,e)};return e.unit===t?P.some(e.value):o(e.unit)&&o(t)?n[e.unit]===n[t]?P.some(e.value):P.some(e.value/n[e.unit]*n[t]):P.none()},dO=function(e){return P.none()},mO=function(e,t){return function(e,t){for(var n=[],o=0;o<e.length;o++){var r=e[o];if(!r.isSome())return P.none();n.push(r.getOrDie())}return P.some(t.apply(null,n))}([lO(e).toOption(),lO(t).toOption()],function(e,o){return fO(e,o.unit).map(function(e){return o.value/e}).map(function(e){return t=e,n=o.unit,function(e){return fO(e,n).map(function(e){return{value:e*t,unit:n}})};var t,n}).getOr(dO)}).getOr(dO)},gO=function(o,e){var u=dO,r=oo("ratio-event"),t=function(n){var e=lS.parts().field({factory:Im,inputClasses:["tox-textfield"],inputBehaviours:xi([Nm.config({}),Om("size-input-events",[Xr(Ue(),function(e,t){ao(e,r,{isField1:n.isField1})}),Xr($e(),function(e,t){ao(e,Zk,{name:o.name})})])])}),t=lS.parts()["aria-descriptor"]({text:n.label});return{dom:{tag:"div"},components:[t,e]}},n=sO.parts().field1(t({label:"Width",isField1:!0})),i=sO.parts().field2(t({label:"Height",isField1:!1})),a=sO.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:yx("icon-lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:yx("icon-unlock",e.icons)}}],buttonBehaviours:xi([Nm.config({})])});return sO.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:["tox-label"],innerHtml:"Dimensions"}},{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[n,{dom:{tag:"span",innerHtml:"\xd7"}},i,a]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(e,i,t){lO(af.getValue(e)).each(function(e){u(e).each(function(e){var t,n,o,r;af.setValue(i,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4},-1!==(r=(t=e).value.toFixed((n=t.unit)in o?o[n]:1)).indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+t.unit))})})},coupledFieldBehaviours:xi([Om("size-input-events2",[Xr(r,function(e,t){var n=t.event().isField1(),o=n?sO.getField1(e):sO.getField2(e),r=n?sO.getField2(e):sO.getField1(e),i=o.map(af.getValue).getOr(""),a=r.map(af.getValue).getOr("");u=mO(i,a)})])])})},hO=function(r,i){var e=function(e,t,n,o){return ez({name:e,text:e,disabled:n,primary:o},t)},t=function(e,t,n,o){return ZC({name:e,icon:P.some(e),tooltip:P.some(t),disabled:o},n,i.icons)},c={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},n=P.none(),o=N,a=function(e,t,n){ao(e,t,n)},f=function(e,t){a(e,Sz.transform(),{transform:t})},u=function(e,t){a(e,Sz.tempTransform(),{transform:t})},s=function(e){return function(){L.getOpt(e).each(function(e){fh.set(e,[I])})}},l=function(e,t){a(e,Sz.transformApply(),{transform:t,swap:s(e)})},d=function(){return e("Back",function(e){return a(e,Sz.back(),{swap:s(e)})},!1,!1)},m=function(){return e("Apply",function(e){return a(e,Sz.apply(),{swap:s(e)})},!0,!0)},g=Am.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},e("Apply",function(e){l(e,function(e){var t=r.getRect();return oO(e,t.x,t.y,t.w,t.h)}),r.hideCrop()},!1,!0)]}),h=Jd(gO({name:"size",label:n,colspan:n,type:"sizeinput",constrain:!0},i)),v=Am.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},h.asSpec(),{dom:{tag:"div",classes:["tox-spacer"]}},e("Apply",function(u){h.getOpt(u).each(function(e){var t,n,o=af.getValue(e),r=parseInt(o.width,10),i=parseInt(o.height,10),a=(t=r,n=i,function(e){return rO(e,t,n)});l(u,a)})},!1,!0)]}),p=function(t,n){return function(e){return t(e,n)}},b=p(nO,"h"),w=p(nO,"v"),y=p(iO,-90),x=p(iO,90),k=Am.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},t("flip-horizontally","Flip horizontally",function(e){u(e,b)},!1),t("flip-vertically","Flip vertically",function(e){u(e,w)},!1),t("rotate-left","Rotate counterclockwise",function(e){u(e,y)},!1),t("rotate-right","Rotate clockwise",function(e){u(e,x)},!1),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),S=function(e,t,n,o){var r=Nd.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),i=Nd.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t,maxX:o,getInitialValue:U({x:U(n)})},components:[r,i],sliderBehaviours:xi([Ua.config({})]),onChoose:e})},C=function(e,t,n,o){return Am.sketch({dom:c,components:[d(),(r=e,i=t,a=n,u=o,S(function(e,t,n){var o=p(r,n.x()/100);f(e,o)},i,a,u)),m()]});var r,i,a,u},z=Am.sketch({dom:c,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),O=C(Qz,-100,0,100),T=C(Zz,-100,0,100),M=C(tO,-100,0,100),H=function(){return S(function(l,e,t){var n=A.getOpt(l),o=V.getOpt(l),r=E.getOpt(l);n.each(function(s){o.each(function(c){r.each(function(e){var t,n,o,r=af.getValue(s).x()/100,i=af.getValue(e).x()/100,a=af.getValue(c).x()/100,u=(t=r,n=i,o=a,function(e){return eO(e,t,n,o)});f(l,u)})})})},0,100,200)},A=Jd(H()),E=Jd(H()),V=Jd(H()),D=Am.sketch({dom:c,components:[d(),A.asSpec(),E.asSpec(),V.asSpec(),m()]}),B=function(t,n,o){return function(e){a(e,Sz.swap(),{transform:n,swap:function(){L.getOpt(e).each(function(e){fh.set(e,[t]),o(e)})}})}},R=P.some(Jz),F=P.some(Kz),I=Am.sketch({dom:c,components:[t("crop","Crop",B(g,n,function(e){r.showCrop()}),!1),t("resize","Resize",B(v,n,function(e){h.getOpt(e).each(function(e){var t=r.getMeasurements(),n=t.width,o=t.height;af.setValue(e,{width:n,height:o})})}),!1),t("orientation","Orientation",B(k,n,o),!1),t("brightness","Brightness",B(O,n,o),!1),t("sharpen","Sharpen",B(z,R,o),!1),t("contrast","Contrast",B(T,n,o),!1),t("color-levels","Color levels",B(D,n,o),!1),t("gamma","Gamma",B(M,n,o),!1),t("invert","Invert",B(z,F,o),!1)]}),_=Am.sketch({dom:{tag:"div"},components:[I],containerBehaviours:xi([fh.config({})])}),L=Jd(_);return{memContainer:L,getApplyButton:function(e){return L.getOpt(e).map(function(e){var t=e.components()[0];return t.components()[t.components().length-1]})}}},vO=function(){return rn.getOrDie("URL")},pO=function(e){return vO().createObjectURL(e)},bO=function(e){vO().revokeObjectURL(e)},wO=function(e){var t=Ae(e),n=Ae(P.none()),r=function s(){var n=[],o=-1;function e(){return 0<o}function t(){return-1!==o&&o<n.length-1}return{data:n,add:function r(e){var t;return t=n.splice(++o),n.push(e),{state:e,removed:t}},undo:function i(){if(e())return n[--o]},redo:function a(){if(t())return n[++o]},canUndo:e,canRedo:t}}();r.add(e);var i=function(e){t.set(e)},a=function(e){return{blob:e,url:pO(e)}},u=function(e){bO(e.url)},o=function(){n.get().each(u),n.set(P.none())},c=function(e){var t=a(e);i(t);var n,o=r.add(t).removed;return n=o,pz.each(n,u),t.url};return{getBlobState:function(){return t.get()},setBlobState:i,addBlobState:c,getTempState:function(){return n.get().fold(function(){return t.get()},function(e){return e})},updateTempState:function(e){var t=a(e);return o(),n.set(P.some(t)),t.url},addTempState:function(e){var t=a(e);return n.set(P.some(t)),t.url},applyTempState:function(t){return n.get().fold(function(){},function(e){c(e.blob),t()})},destroyTempState:o,undo:function(){var e=r.undo();return i(e),e.url},redo:function(){var e=r.redo();return i(e),e.url},getHistoryStates:function(){return{undoEnabled:r.canUndo(),redoEnabled:r.canRedo()}}}},yO=function(e){return Vz.fromBlob(e)},xO=function(e,t){var n,o,r,a=wO(e.currentState),i=function(e){var t=a.getHistoryStates();h.updateButtonUndoStates(e,t.undoEnabled,t.redoEnabled),ao(e,Tz.formActionEvent,{name:Tz.saveState(),value:t.undoEnabled})},u=function(e){return e.toBlob()},c=function(e){ao(e,Tz.formActionEvent,{name:Tz.disable(),value:{}})},s=function(e){v.getApplyButton(e).each(function(e){eg.enable(e)}),ao(e,Tz.formActionEvent,{name:Tz.enable(),value:{}})},l=function(e,t){return c(e),g.updateSrc(e,t)},f=function(t,e,n,o,r){return c(t),yO(e).then(n).then(u).then(o).then(function(e){return l(t,e).then(function(e){return i(t),r(),s(t),e})})["catch"](function(e){console.log(e),s(t)})},d=function(e,t,n){var o=a.getBlobState().blob;f(e,o,t,function(e){return a.updateTempState(e)},n)},m=function(e){var t=a.getBlobState().url;return a.destroyTempState(),i(e),t},g=kz(e.currentState.url),h=(o=Jd(Mz("undo",!0,function(e){ao(e,Sz.undo(),{direction:1})},(n=t).icons)),r=Jd(Mz("redo",!0,function(e){ao(e,Sz.redo(),{direction:1})},n.icons)),{container:Am.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar"]},components:[o.asSpec(),r.asSpec(),Mz("zoom-in",!1,function(e){ao(e,Sz.zoom(),{direction:1})},n.icons),Mz("zoom-out",!1,function(e){ao(e,Sz.zoom(),{direction:-1})},n.icons)]}),updateButtonUndoStates:function(e,t,n){o.getOpt(e).each(function(e){Hz(e,t)}),r.getOpt(e).each(function(e){Hz(e,n)})}}),v=hO(g,t);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[v.memContainer.asSpec(),g.memContainer.asSpec(),h.container],behaviours:xi([af.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),Om("image-tools-events",[Xr(Sz.undo(),function(t,e){var n=a.undo();l(t,n).then(function(e){s(t),i(t)})}),Xr(Sz.redo(),function(t,e){var n=a.redo();l(t,n).then(function(e){s(t),i(t)})}),Xr(Sz.zoom(),function(e,t){var n=t.event().direction();g.zoom(e,n)}),Xr(Sz.back(),function(e,t){var n,o;o=m(n=e),l(n,o).then(function(e){s(n)}),t.event().swap()(),g.hideCrop()}),Xr(Sz.apply(),function(e,t){a.applyTempState(function(){m(e),t.event().swap()()})}),Xr(Sz.transform(),function(e,t){return d(e,t.event().transform(),N)}),Xr(Sz.tempTransform(),function(e,t){return n=e,o=t.event().transform(),r=a.getTempState().blob,void f(n,r,o,function(e){return a.addTempState(e)},N);var n,o,r}),Xr(Sz.transformApply(),function(e,t){return n=e,o=t.event().transform(),r=t.event().swap(),i=a.getBlobState().blob,void f(n,i,o,function(e){var t=a.addBlobState(e);return m(n),t},r);var n,o,r,i}),Xr(Sz.swap(),function(t,e){var n;n=t,h.updateButtonUndoStates(n,!1,!1);var o=e.event().transform(),r=e.event().swap();o.fold(function(){r()},function(e){d(t,e,r)})})]),IC()])}},kO=Ol({name:"HtmlSelect",configFields:[gr("options"),ms("selectBehaviours",[Ua,af]),Or("selectClasses",[]),Or("selectAttributes",{}),xr("data")],factory:function(n,e){var t=E(n.options(),function(e){return{dom:{tag:"option",value:e.value,innerHtml:e.text}}}),o=n.data().map(function(e){return Oe("initialValue",e)}).getOr({});return te({uid:n.uid(),dom:{tag:"select",classes:n.selectClasses(),attributes:n.selectAttributes()},components:t,behaviours:te(xi([Ua.config({}),af.config({store:te({mode:"manual",getValue:function(e){return Dm(e.element())},setValue:function(e,t){F(n.options(),function(e){return e.value===t}).isSome()&&Vm(e.element(),t)}},o)})]),gs(n.selectBehaviours()))})}}),SO=function(n){var e=n.label.map(PS),t=[ds.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(e){return io(e,oS),P.some(!0)}}),Om("textfield-change",[Xr(Ye(),function(e,t){ao(e,Zk,{name:n.name})}),Xr(Qe(),function(e,t){ao(e,Zk,{name:n.name})})]),Nm.config({})],o=n.validation.map(function(o){return rC.config({getRoot:function(e){return wn.parent(e.element())},invalidClass:"tox-invalid",validator:{validate:function(e){var t=af.getValue(e),n=o.validator(t);return kb.pure(!0===n?ie.value(t):ie.error(n))},validateOnLoad:o.validateOnLoad}})}).toArray(),r=lS.parts().field({tag:!0===n.multiline?"textarea":"input",inputAttributes:{},inputClasses:[n.classname],inputBehaviours:xi(j([t,o])),factory:Im}),i=n.flex?["tox-form__group--stretched"]:[];return IS(e,r,i)},CO=undefined&&undefined.__assign||function(){return(CO=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},zO=function(i){return CO({},i,{toCached:function(){return zO(i.toCached())},bindFuture:function(t){return zO(i.bind(function(e){return e.fold(function(e){return kb.pure(ie.error(e))},function(e){return t(e)})}))},bindResult:function(t){return zO(i.map(function(e){return e.bind(t)}))},mapResult:function(t){return zO(i.map(function(e){return e.map(t)}))},foldResult:function(t,n){return i.map(function(e){return e.fold(t,n)})},withTimeout:function(e,r){return zO(kb.nu(function(t){var n=!1,o=window.setTimeout(function(){n=!0,t(ie.error(r()))},e);i.get(function(e){n||(window.clearTimeout(o),t(e))})}))}})},OO=function(e){return zO(kb.nu(e))},TO=OO,MO={type:"separator"},HO=function(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:function(){}}},AO=function(e,t){return{type:"menuitem",value:t,text:e,meta:{attach:N},onAction:function(){}}},EO=function(e,t){return o=e,n=D(t,function(e){return e.type===o}),E(n,HO);var n,o},VO=function(e,t){var n=e.toLowerCase();return D(t,function(e){return-1!==(e.meta!==undefined&&e.meta.text!==undefined?e.meta.text:e.value).toLowerCase().indexOf(n)})},DO=function(c,e,s){var t=af.getValue(e),l=t.meta.text!==undefined?t.meta.text:t.value;return s.getLinkInformation().fold(function(){return[]},function(e){var t,n,o,r,i,a,u=VO(l,(t=s.getHistory(c),E(t,function(e){return AO(e,e)})));return"file"===c?(n=[u,VO(l,(a=e,EO("header",a.targets))),j([(i=e,i.anchorTop.map(function(e){return AO("<top>",e)}).toArray()),VO(l,(r=e,EO("anchor",r.targets))),(o=e,o.anchorBottom.map(function(e){return AO("<bottom>",e)}).toArray())])],R(n,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(MO,t)},[])):u})},BO=function(r,i,o){var e,a=function(e){var t=af.getValue(e);o.addToHistory(t.value,r.filetype)},t=lS.parts().field({factory:FS,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],minChars:0,responseTime:0,fetch:function(e){var t=DO(r.filetype,e,o),n=WS(t,zx.BUBBLE_TO_SANDBOX,i.providers);return kb.pure(n)},getHotspot:function(e){return f.getOpt(e)},typeaheadBehaviours:xi(j([o.getValidationHandler().map(function(o){return rC.config({getRoot:function(e){return wn.parent(e.element())},invalidClass:"tox-status-invalid",notify:{},validator:{validate:function(t){var n=af.getValue(t);return TO(function(e){o({type:r.filetype,url:n.value},function(n){f.getOpt(t).each(function(e){var t=function(e,t,n){(n?Pi.add:Pi.remove)(e.element(),t)};t(e,"tox-status-valid","valid"===n.status),t(e,"tox-status-unknown","unknown"===n.status)}),e(("invalid"===n.status?ie.error:ie.value)(n.message))})})}}})}).toArray(),[Nm.config({}),Om("urlinput-events",j(["file"===r.filetype?[Xr(Ye(),function(e){ao(e,Zk,{name:r.name})})]:[],[Xr($e(),function(e){ao(e,Zk,{name:r.name}),a(e)})]]))]])),eventOrder:(e={},e[Ye()]=["streaming","urlinput-events","invalidating"],e),model:{getDisplayText:function(e){return e.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"dog"},lazySink:i.getSink,parts:{menu:_k(0,0,"normal")},onExecute:function(e,t,n){ao(t,oS,{})},onItemExecute:function(e,t,n,o){a(e),ao(e,Zk,{name:r.name})}}),n=r.label.map(PS),u=function(e,t){return void 0===t&&(t=e),{dom:{tag:"span",classes:["tox-icon","tox-status-icon__"+e],innerHtml:yx("icon-"+t,i.providers.icons)}}},c=Jd({dom:{tag:"span",classes:["tox-status"]},components:[u("checkmark"),u("warning"),u("error","warning")]}),s=o.getUrlPicker(r.filetype),l=oo("browser.url.event"),f=Jd({dom:{tag:"div",classes:["tox-input-wrap"]},components:[t,c.asSpec()]});return lS.sketch({dom:NS([]),components:n.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:j([[f.asSpec()],s.map(function(){return t=l,e="tox-browse-url",n="icon-browse",o=i.providers,Ml.sketch({dom:{tag:"button",classes:["tox-tbtn",e],innerHtml:yx(n,o.icons)},action:function(e){io(e,t)}});var t,e,n,o}).toArray()])}]),fieldBehaviours:xi([Om("url-input-events",[Xr(l,function(o){Hm.getCurrent(o).each(function(t){var n=af.getValue(t);s.each(function(e){e(n).get(function(e){af.setValue(t,e),ao(o,Zk,{name:r.name})})})})})])])})},RO=function(r){return function(t,n,o){return ze(n,"name").fold(function(){return r(n,o)},function(e){return t.field(e,r(n,o))})}},FO={collection:RO(function(a){var e,t,n=a.label.map(PS),o=function(n){return function(t,e){du(e.event().target(),"[data-collection-item-value]").each(function(e){n(t,e,Un.get(e,"data-collection-item-value"))})}},r=[Xr(je(),o(function(e,t){Ki(t)})),Xr(qe(),o(function(e,t,n){ao(e,nS,{name:a.name,value:n})})),Xr(Ue(),o(function(e,t,n){fu(e.element(),"."+jx).each(function(e){Pi.remove(e,jx)}),Pi.add(t,jx)})),Xr(We(),o(function(e,t,n){fu(e.element(),"."+jx).each(function(e){Pi.remove(e,jx)})})),oi(o(function(e,t,n){ao(e,nS,{name:a.name,value:n})}))],i=lS.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==a.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:b},behaviours:xi([fh.config({}),af.config({store:{mode:"memory",initialValue:[]},onSetValue:function(o,e){var t,n,r,i;t=o,n=E(e,function(e){var t,n=1===a.columns?e.text.map(function(e){return'<span class="tox-collection__item-label">'+e+"</span>"}).getOr(""):"",o=e.icon.map(function(e){return'<span class="tox-collection__item-icon">'+e+"</span>"}).getOr("");return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+('"'===(t=e.value)?"&quot;":t)+'">'+o+n+"</div>"}),r=1<a.columns&&"auto"!==a.columns?A(n,a.columns):[n],i=E(r,function(e){return'<div class="tox-collection__group">'+e.join("")+"</div>"}),An(t.element(),i.join("")),"auto"===a.columns&&Ek(o,5,"tox-collection__item").each(function(e){var t=e.numRows,n=e.numColumns;ds.setGridSize(o,t,n)}),io(o,uS)}}),Nm.config({}),ds.config((e=a.columns,t="normal",1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===t?".tox-swatches__row":".tox-collection__group",cell:"color"===t?"."+Ix:"."+Fx}})),Om("collection-events",r)])});return IS(n,i,["tox-form__group--collection"])}),alloy:RO(b),alertbanner:RO(function(e,t){return n=e,o=t.shared.providers,Am.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:yx("icon-"+n.icon,o.icons)}},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:n.text}},Ml.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],innerHtml:yx("icon-close",o.icons)},action:function(e){ao(e,nS,{name:"alert-banner",value:n.url})}})]});var n,o}),input:RO(function(e){return SO({name:e.name,multiline:!1,label:e.label,flex:!1,classname:"tox-textfield",validation:P.none()})}),textarea:RO(function(e){return SO({name:e.name,multiline:!0,label:e.label,flex:e.flex,classname:"tox-textarea",validation:P.none()})}),listbox:RO(function(e){var t=PS(e.label),n=lS.parts().field({factory:kO,dom:{classes:["mce-select-field"]},selectBehaviours:xi([Nm.config({})]),options:e.values,data:e.initialValue.getOr(undefined)});return _S(P.some(t),n)}),label:RO(function(e){return{dom:{tag:"label",innerHtml:e.html},behaviours:xi([IC(),fh.config({}),$C(P.some(e.html))])}}),iframe:(Uz=function(e){var o,r,t=mz&&e.sandboxed,n=t?{sandbox:"allow-scripts"}:{},i=(o=t,r=Ae(""),{getValue:function(e){return r.get()},setValue:function(e,t){if(o)Un.set(e.element(),"src","data:text/html;charset=utf-8,"+encodeURIComponent(t));else{Un.set(e.element(),"src","javascript:''");var n=e.element().dom().contentWindow.document;n.open(),n.write(t),n.close()}r.set(t)}}),a=e.label.map(PS),u=lS.parts().field({factory:{sketch:function(e){return dz({uid:e.uid,dom:{tag:"iframe",attributes:te(n)},behaviours:xi([Nm.config({}),Ua.config({}),YC(P.none(),i.getValue,i.setValue)])})}}});return _S(a,u)},function(e,t,n){var o=te(t,{source:"dynamic"});return RO(Uz)(e,o,n)}),autocomplete:RO(function(e,t){return r=e,i=t.shared,n=PS(r.label.getOr("?")),o=lS.parts().field({factory:FS,dismissOnBlur:!1,inputClasses:["tox-textfield"],minChars:1,fetch:function(e){var t=af.getValue(e),n=r.getItems(t),o=WS(n,zx.BUBBLE_TO_SANDBOX,i.providers);return kb.pure(o)},markers:{openClass:"dog"},lazySink:i.getSink,parts:{menu:_k(0,0,"normal")}}),_S(P.some(n),o);var r,i,n,o}),button:RO(function(e){var t=tz(e.name,"custom");return ez(e,t,[qC(""),IC()])}),checkbox:RO(function(e,t){return n=e,o=t.shared.providers,r=af.config({store:{mode:"manual",getValue:function(e){var t=e.element().dom();return t.indeterminate?"indeterminate":t.checked?"checked":"unchecked"},setValue:function(e,t){var n=e.element().dom();switch(t){case"indeterminate":n.indeterminate=!0;break;case"checked":n.checked=!0,n.indeterminate=!1;break;default:n.checked=!1,n.indeterminate=!1}}}}),i=function(e){return e.element().dom().click(),P.some(!0)},a=lS.parts().field({factory:{sketch:b},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:xi([IC(),Nm.config({}),Ua.config({}),r,ds.config({mode:"special",onEnter:i,onSpace:i}),Om("checkbox-events",[Xr($e(),function(e,t){ao(e,Zk,{name:n.name})})])])}),u=lS.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:n.label},behaviours:xi([Al.config({})])}),s=Jd({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(c=function(e){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e],innerHtml:yx("icon-"+("checked"===e?"selected":"unchecked"===e?"unselected":"indeterminate"),o.icons)}}})("checked"),c("unchecked"),c("indeterminate")]}),lS.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,s.asSpec(),u]});var n,o,r,i,a,u,c,s}),colorinput:RO(function(e,t){return n=e,o=t.shared,r=lS.parts().field({factory:Im,inputClasses:["tox-textfield"],onSetValue:function(e){return rC.run(e).get(function(){})},inputBehaviours:xi([Nm.config({}),rC.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(e){return wn.parent(e.element())},notify:{onValid:function(e){var t=af.getValue(e);ao(e,oz,{color:t})}},validator:{validateOnLoad:!1,validate:function(e){var t=af.getValue(e);if(0===t.length)return kb.pure(ie.value(!0));var n=Yt.fromTag("span");Ka.set(n,"background-color",t);var o=Ka.getRaw(n,"background-color").fold(function(){return ie.error("blah")},function(e){return ie.value(t)});return kb.pure(o)}}})])}),i=n.label.map(PS),a=Jd(jC((n.name,P.none(),P.none()))),u=Jd(ez({name:"ok",text:"Ok",primary:!0,disabled:!1},function(n){a.getOpt(n).fold(function(){console.error("could not find color picker")},function(e){Hm.getCurrent(e).each(function(e){var t=af.getValue(e);c.getOpt(e).each(function(e){ao(e,rz,{hex:t})}),io(n,Rt())})})})),c=Jd(cC({dom:{tag:"span"},getHotspot:function(t){return wn.prevSibling(t.element()).bind(function(e){return t.getSystem().getByDom(e).toOption()})},components:[],fetch:function(e){e({dom:{tag:"div"},components:[a.asSpec(),u.asSpec()],behaviours:xi([ds.config({mode:"cyclic"}),Om("redirect-enter-to-submit",[oi(function(e,t){u.getOpt(e).each(function(e){uo(e),t.stop()})})])])})},onChange:function(e,t){"hex-valid"===t.event().name()&&u.getOpt(e).each(function(e){t.event().value()?eg.enable(e):eg.disable(e)})}},o)),lS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:i.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,c.asSpec()]}]),fieldBehaviours:xi([Om("form-field-events",[Xr(oz,function(e,t){c.getOpt(e).each(function(e){Ka.set(e.element(),"background-color",t.event().color())})}),Xr(rz,function(t,n){lS.getField(t).each(function(e){af.setValue(e,n.event().hex()),Hm.getCurrent(t).each(Ua.focus)})})])])});var n,o,r,i,a,u,c}),colorpicker:RO(jC),dropzone:RO(function(r){var t=function(e,t){t.stop()},n=function(e){return function(t,n){V(e,function(e){e(t,n)})}},o=function(e,t){if(!eg.isDisabled(e)){var n=t.event().raw();a(e,n.dataTransfer.files)}},i=function(e,t){var n=t.event().raw().target.files;a(e,n)},a=function(e,t){var n,o;af.setValue(e,(n=t,o=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i"),D(Q(n),function(e){return o.test(e.name)}))),ao(e,Zk,{name:r.name})},u=Jd({dom:{tag:"input",attributes:{type:"file",multiple:"multiple"},styles:{display:"none"}},behaviours:xi([Om("input-file-events",[Jr(qe())])])}),e=r.label.map(PS),c=lS.parts().field({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:xi([qC([]),IC(),eg.config({}),Va.config({toggleClass:"dragenter",toggleOnExecute:!1}),Om("dropzone-events",[Xr("dragenter",n([t,Va.toggle])),Xr("dragleave",n([t,Va.toggle])),Xr("dragover",t),Xr("drop",n([t,o])),Xr($e(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:"Drop Image Here"}},Ml.sketch({dom:{tag:"button",innerHtml:"Browse",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(e){u.get(e).element().dom().click()},buttonBehaviours:xi([Nm.config({})])})]}]}}}}),s=r.flex?["tox-form__group--stretched"]:[];return IS(e,c,s)}),grid:RO(function(e,t){return n=e,o=t.shared,{dom:{tag:"div",classes:["tox-form","tox-form--"+n.columns+"col"]},components:E(n.items,o.interpreter)};var n,o}),selectbox:RO(function(e,t){return n=e,o=t.shared.providers,r=n.label.map(PS),i=lS.parts().field({dom:{},selectAttributes:{size:n.size},options:n.items,factory:kO,selectBehaviours:xi([Nm.config({}),Om("selectbox-change",[Xr($e(),function(e,t){ao(e,Zk,{name:n.name})})])])}),a=1<n.size?P.none():P.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:yx("icon-chevron-down",o.icons)}}),u={dom:{tag:"div",classes:["tox-selectfield"]},components:j([[i],a.toArray()])},lS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:j([r.toArray(),[u]])});var n,o,r,i,a,u}),sizeinput:RO(function(e,t){return gO(e,t.shared.providers)}),urlinput:RO(function(e,t){return BO(e,t.shared,t.urlinput)}),customeditor:RO(function(t){var n=Ae(P.none()),o=Jd({dom:{tag:t.tag}}),r=Ae(P.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:xi([Om("editor-foo-events",[ei(function(e){o.getOpt(e).each(function(e){t.init(e.element().dom()).then(function(t){r.get().each(function(e){t.setValue(e)}),r.set(P.none()),n.set(P.some(t))})})})]),af.config({store:{mode:"manual",getValue:function(){return n.get().fold(function(){return r.get().getOr("")},function(e){return e.getValue()})},setValue:function(e,t){n.get().fold(function(){r.set(P.some(t))},function(e){return e.setValue(t)})}}}),IC()]),components:[o.asSpec()]}}),htmlpanel:RO(function(e){return Am.sketch({dom:{tag:"div",innerHtml:e.html}})}),imagetools:RO(function(e,t){return xO(e,t.shared.providers)})},IO={field:function(e,t){return t}},_O=function(t,e,n){var o=te(n,{shared:{interpreter:function(e){return LO(t,e,o)}}});return LO(t,e,o)},LO=function(t,n,o){return ze(FO,n.type).fold(function(){return console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(e){return e(t,n,o)})},NO=cl,PO=Gs,jO=oo("toolbar.button.execute"),UO={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},WO=oo("update-menu-text"),GO=function(e,t,n){var o=e.text.map(function(e){return Jd(JC(e,t))}),r=function(e,t){var n=af.getValue(e);return Ua.focus(n),ao(n,"keydown",{raw:t.event().raw()}),P.some(!0)};return Jd(uC.sketch({role:e.role,dom:{tag:"button",classes:[t,t+"--select"].concat(E(e.classes,function(e){return t+"--"+e}))},components:ok([e.icon.map(function(e){return KC(e,n.providers.icons)}),o.map(function(e){return e.asSpec()}),P.some({dom:{tag:"div",classes:[t+"__select-chevron"],innerHtml:yx("icon-chevron-down",n.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:xi([Al.config({}),fh.config({}),Om("menubutton-update-display-text",[ei(e.onAttach),ti(e.onDetach),Xr(WO,function(t,n){o.bind(function(e){return e.getOpt(t)}).each(function(e){fh.set(e,[Pg(n.event().text())])})})])]),eventOrder:te(UO,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:xi([ds.config({mode:"special",onLeft:r,onRight:r})]),lazySink:n.getSink,toggleClass:t+"--active",parts:{menu:_k(0,e.columns,e.presets)},fetch:function(){return kb.nu(e.fetch)}})).asSpec()},XO=function(e,t,n){var o={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return te(e,o)},YO=function(s,e,l,f){var d=function(e){return E(e,function(e){var t,n,o,r,i,a,u=ae(e);if(He(e,"items")){var c=d(e.items);return te((i=e,a={type:"submenu",isSelected:U(!1),getStylePreview:function(){return P.none()}},te(i,a)),{getStyleItems:function(){return c}})}return He(e,"format")?XO(e,l,f):1===u.length&&M(u,"title")?te(e,{type:"separator"}):(n=oo((t=e).title),o={type:"formatter",format:n,isSelected:l(n),getStylePreview:f(n)},r=te(t,o),s.formatter.register(n,r),r)})};return d(e)},$O=function(e,t,n,o){var r,i,a,u,c,s="basic"===n.type?function(){return E(n.data,function(e){return XO(e,o.isSelectedFor,o.getPreviewFor)})}:n.getData;return{items:(r=e,i=o,a=function(t,n,e){return"separator"===t.type?{type:"separator",text:t.title}:"submenu"===t.type?{type:"menuitem",text:t.title,disabled:e,getSubmenuItems:function(){return W(t.getStyleItems(),function(e){return u(e,n)})}}:t.getStylePreview().fold(function(){return{type:"togglemenuitem",text:t.title,active:t.isSelected(),disabled:!1,onAction:i.onAction(t)}},function(e){return{type:"styleitem",item:{type:"togglemenuitem",text:t.title,disabled:!1,active:t.isSelected(),onAction:i.onAction(t),meta:e}}})},u=function(e,t){var n="formatter"===e.type&&!r.formatter.canApply(e.format);return 0===t?n?[]:[a(e,t,!1)]:[a(e,t,n)]},c=function(e){return W(e,function(e){return u(e,1)})},{validateItems:c,getFetch:function(o,r){return function(e){var t=r(),n=c(t);e(WS(n,zx.CLOSE_ON_EXECUTE,o.shared.providers))}}}),getStyleItems:s}},qO=function(n,e,t,o){var r=$O(n,0,t,o),i=r.items,a=r.getStyleItems;return GO({text:P.some(""),icon:P.none(),role:"button",fetch:i.getFetch(e,a),onAttach:o.nodeChangeHandler.map(function(t){return function(e){return n.on("nodeChange",t(e))}}).getOr(function(){}),onDetach:o.nodeChangeHandler.map(function(t){return function(e){return n.off("nodeChange",t(e))}}).getOr(function(){}),columns:1,presets:"normal",classes:["bespoke"]},"tox-tbtn",e.shared)},KO=function(n,e,t){var o=t.parents,r=e();return Ve(o,function(t){return F(r,function(e){return n.formatter.matchNode(t,e.format)})}).orThunk(function(){return n.formatter.match("p")?P.some({title:"Paragraph",format:"p"}):P.none()})};(Gz=Wz||(Wz={}))[Gz.SemiColon=0]="SemiColon",Gz[Gz.Space=1]="Space";var JO,QO,ZO,eT,tT,nT,oT=function(e,t,n,o){var r,i,a=ze(e.settings,t).getOr(n);return{type:"basic",data:(i=a,r=o===Wz.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),E(r,function(e){var t=e,n=e,o=e.split("=");return 1<o.length&&(t=o[0],n=o[1]),{title:t,format:n}}))}},rT=function(n){var e=P.some(function(t){return function(e){KO(n,function(){return o.data},e).map(function(e){return e.title}).each(function(e){ao(t,WO,{text:e})})}}),o=oT(n,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",Wz.SemiColon);return{isSelectedFor:function(e){return function(){return n.formatter.match(e)}},getPreviewFor:function(t){return function(){var e=n.formatter.get(t);return P.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styleAttr:n.formatter.getCssText(t)})}},onAction:function(e){return function(){n.undoManager.transact(function(){n.focus(),n.formatter.match(e.format)?n.formatter.remove(e.format):n.formatter.apply(e.format)})}},nodeChangeHandler:e,dataset:o}},iT=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],aT=function(r){return{isSelectedFor:function(e){return function(){return r.formatter.match(e)}},getPreviewFor:function(t){return function(){var e=r.formatter.get(t);return e!==undefined?P.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styleAttr:r.formatter.getCssText(t)}):P.none()}},onAction:function(e){return function(){r.undoManager.transact(function(){r.focus(),r.formatter.match(e.format)?r.formatter.remove(e.format):r.formatter.apply(e.format)})}},nodeChangeHandler:P.some(function(t){var n=function(e){var t=e.items;return t!==undefined&&0<t.length?W(t,n):[{title:e.title,format:e.format}]},o=W(ze(r.settings,"style_formats").getOr(iT),n);return function(e){KO(r,function(){return o},e).map(function(e){return e.title}).each(function(e){ao(t,WO,{text:e})})}})}},uT={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table",items:"inserttable tableprops deletetable row column cell"},help:{title:"Help",items:"help"}},cT=function(e,t,n,o){return GO({text:e.text,icon:e.icon,role:o,fetch:function(t){e.fetch(function(e){t(WS(e,zx.CLOSE_ON_EXECUTE,n.providers))})},onAttach:function(){},onDetach:function(){},columns:1,presets:"normal",classes:[]},t,n)},sT={formats:function(e,t){var n=t.styleselect,o=$O(e,0,n,aT(e));return{type:"menuitem",text:"Formats",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}},blockformats:function(e,t){var n=rT(e),o=$O(e,0,n.dataset,n);return{type:"menuitem",text:"Blocks",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}}},lT=function(e){return"string"==typeof e?e.split(" "):e},fT=function(a,u,c){var s=ne(uT,u.menus),t=0<ae(u.menus).length,e=u.menubar===undefined||!0===u.menubar?lT("file edit view insert format tools table"):lT(!1===u.menubar?"":u.menubar),n=D(e,function(e){return t&&u.menus.hasOwnProperty(e)&&u.menus[e].hasOwnProperty("items")||uT.hasOwnProperty(e)}),o=E(n,function(e){var t,n,o,r,i=s[e];return t={title:i.title,items:lT(i.items)},n=u,o=a,r=c,{text:t.title,getItems:function(){return W(t.items,function(e){return 0===e.trim().length?[]:"separator"===e||"|"===e?[{type:"separator"}]:n.menuItems[e]?[n.menuItems[e]]:sT[e]?[sT[e](o,r)]:[]})}}});return D(o,function(e){return 0<e.getItems().length})},dT=Ol({factory:function(o,e){var t={focus:ds.focusIn,setMenus:function(e,t){var n=E(t,function(t){var e={text:P.some(t.text),icon:P.none(),fetch:function(e){e(t.getItems())}};return cT(e,"tox-mbtn",{getSink:o.getSink(),providers:o.providers()},"menuitem")});fh.set(e,n)}};return{uid:o.uid(),dom:o.dom(),components:[],behaviours:xi([fh.config({}),Om("menubar-events",[ei(function(e){o.onSetup()(e)}),Xr(je(),function(n,e){fu(n.element(),".tox-mbtn--active").each(function(t){du(e.event().target(),".tox-mbtn").each(function(e){dn(t,e)||n.getSystem().getByDom(t).each(function(t){n.getSystem().getByDom(e).each(function(e){uC.expand(e),uC.close(t),Ua.focus(e)})})})})}),Xr(jt(),function(n,e){e.event().prevFocus().bind(function(e){return n.getSystem().getByDom(e).toOption()}).each(function(t){e.event().newFocus().bind(function(e){return n.getSystem().getByDom(e).toOption()}).each(function(e){uC.isOpen(t)&&(uC.expand(e),uC.close(t))})})})]),ds.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return o.onEscape()(e),P.some(!0)}})]),apis:t,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[gr("dom"),gr("uid"),gr("onEscape"),gr("getSink"),gr("providers"),Or("onSetup",N)],apis:{focus:function(e,t){e.focus(t)},setMenus:function(e,t,n){e.setMenus(t,n)}}}),mT=function(n,t){return wn.offsetParent(n).orThunk(function(){var e=Yt.fromTag("span");Sn.before(n,e);var t=wn.offsetParent(e);return Tn.remove(e),t}).map(function(e){return xw.absolute(e).translate(-t.left(),-t.top())}).getOrThunk(function(){return cf(0,0)})},gT=me([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),hT=function(t){return function(e){return e.translate(-t.left(),-t.top())}},vT=function(t){return function(e){return e.translate(t.left(),t.top())}},pT=function(n){return function(e,t){return R(n,function(e,t){return t(e)},cf(e,t))}},bT=function(e,t,n){return e.fold(pT([vT(n),hT(t)]),pT([hT(t)]),pT([]))},wT=function(e,t,n){return e.fold(pT([vT(n)]),pT([]),pT([vT(t)]))},yT=function(e,t,n){return e.fold(pT([]),pT([hT(n)]),pT([vT(t),hT(n)]))},xT=function(e,t,n){return e.fold(function(e,t){return{position:"absolute",left:e+"px",top:t+"px"}},function(e,t){return{position:"absolute",left:e-n.left()+"px",top:t-n.top()+"px"}},function(e,t){return{position:"fixed",left:e+"px",top:t+"px"}})},kT=gT.offset,ST=gT.absolute,CT=gT.fixed,zT=function(e,t){Pi.add(e.element(),t.transitionClass()),Pi.remove(e.element(),t.fadeOutClass()),Pi.add(e.element(),t.fadeInClass())},OT=function(e,t){Pi.add(e.element(),t.transitionClass()),Pi.remove(e.element(),t.fadeInClass()),Pi.add(e.element(),t.fadeOutClass())},TT=function(e,t){return e.y()>=t.y()&&e.bottom()<=t.bottom()},MT=function(e,t){return Un.has(e,t)?P.some(parseInt(Un.get(e,t),10)):P.none()},HT=function(o,r,i){return(a=o,e=r,t=a.element(),MT(t,e.leftAttr()).bind(function(o){return MT(t,e.topAttr()).map(function(e){var t=wf(a.element()),n=Za(a.element());return Iw(o,e,t,n)})})).bind(function(e){return TT(e,i)?(t=r,n=o.element(),Un.remove(n,t.leftAttr()),Un.remove(n,t.topAttr()),P.some(ST(e.x(),e.y()))):P.none();var t,n});var a,e,t},AT=function(e,t,n,o,r){var i=xw.absolute(e.element()),a=Iw(i.left(),i.top(),wf(e.element()),Za(e.element()));if(TT(a,n))return P.none();u=e,c=t,s=i.left(),l=i.top(),f=u.element(),Un.set(f,c.leftAttr(),s),Un.set(f,c.topAttr(),l);var u,c,s,l,f,d=ST(i.left(),i.top()),m=bT(d,o,r),g=ST(n.x(),n.y()),h=bT(g,o,r),v=a.y()<=n.y()?h.top():h.top()+n.height()-a.height();return P.some(CT(m.left(),v))},ET=function(s,e,t){var l=e.lazyViewport()(s);e.contextual().each(function(c){c.lazyContext()(s).each(function(e){var t,n,o,r,i,a,u=(t=e,n=xw.absolute(t),o=yf(t),r=eu(t),Iw(n.left(),n.top(),o,r));a=l,((i=u).y()<a.bottom()&&i.bottom()>a.y()?zT:OT)(s,c)})});var n,o,r,i,a,u=wn.owner(s.element()),c=Sw(u),f=mT(s.element(),c);(n=s,o=e,r=l,i=c,a=f,Ka.getRaw(n.element(),"position").is("fixed")?HT(n,o,r):AT(n,o,r,i,a)).each(function(e){var t=xT(e,0,f);Ka.setAll(s.element(),t)})},VT=Object.freeze({refresh:ET}),DT=Object.freeze({events:function(o,e){return Ur([Xr(Ke(),function(t,n){o.contextual().each(function(e){dn(t.element(),n.event().target())&&(Pi.remove(t.element(),e.transitionClass()),n.stop())})}),Xr(_t(),function(e,t){ET(e,o)})])}}),BT=[Cr("contextual",[gr("fadeInClass"),gr("fadeOutClass"),gr("transitionClass"),gr("lazyContext")]),Or("lazyViewport",function(e){var t=Sw();return Iw(t.left(),t.top(),window.innerWidth,window.innerHeight)}),gr("leftAttr"),gr("topAttr")],RT=Si({fields:BT,name:"docking",active:DT,apis:VT}),FT="data-initial-z-index",IT=function(e,t){var n;e.getSystem().addToGui(t),n=t,wn.parent(n.element()).each(function(t){Ka.getRaw(t,"z-index").each(function(e){Un.set(t,FT,e)}),Ka.set(t,"z-index",Ka.get(n.element(),"z-index"))})},_T=function(e){var t;t=e,wn.parent(t.element()).each(function(e){var t=Un.get(e,FT);Un.has(e,FT)?Ka.set(e,"z-index",t):Ka.remove(e,"z-index"),Un.remove(e,FT)}),e.getSystem().removeFromGui(e)},LT=function(e,t,n,o){return(r=e,i=t,a=r.element(),u=parseInt(Un.get(a,i.leftAttr()),10),c=parseInt(Un.get(a,i.topAttr()),10),isNaN(u)||isNaN(c)?P.none():P.some(cf(u,c))).fold(function(){return n},function(e){return CT(e.left()+o.left(),e.top()+o.top())});var r,i,a,u,c},NT=function(e,t,n,o,r,i){var a,u,c,s=LT(e,t,n,o),l=jT(e,t,s,r,i),f=bT(s,r,i);return a=t,u=f,c=e.element(),Un.set(c,a.leftAttr(),u.left()+"px"),Un.set(c,a.topAttr(),u.top()+"px"),l.fold(function(){return{coord:CT(f.left(),f.top()),extra:P.none()}},function(e){return{coord:e.output(),extra:e.extra()}})},PT=function(e,t){var n,o;n=t,o=e.element(),Un.remove(o,n.leftAttr()),Un.remove(o,n.topAttr())},jT=function(e,t,h,v,p){var n=t.getSnapPoints()(e);return Ve(n,function(e){var t,n,o,r,i,a,u,c,s,l,f,d,m,g=e.sensor();return t=h,n=g,o=e.range().left(),r=e.range().top(),u=wT(t,i=v,a=p),c=wT(n,i,a),Math.abs(u.left()-c.left())<=o&&Math.abs(u.top()-c.top())<=r?P.some({output:U((s=e.output(),l=h,f=v,d=p,m=function(o,r){return function(e,t){var n=o(l,f,d);return r(e.getOr(n.left()),t.getOr(n.top()))}},s.fold(m(yT,gT.offset),m(wT,gT.absolute),m(bT,gT.fixed)))),extra:e.extra}):P.none()})},UT=function(n,e,i,a,u,c){return e.fold(function(){var e,n,o,t=(e=i,n=c.left(),o=c.top(),e.fold(function(e,t){return gT.offset(e+n,t+o)},function(e,t){return gT.absolute(e+n,t+o)},function(e,t){return gT.fixed(e+n,t+o)})),r=bT(t,a,u);return CT(r.left(),r.top())},function(t){var e=NT(n,t,i,c,a,u);return e.extra.each(function(e){t.onSensor()(n,e)}),e.coord})},WT=function(e,t,n){var o,r=t.getTarget()(e.element());if(t.repositionTarget()){var i=wn.owner(e.element()),a=Sw(i),u=mT(r,a),c=(o=r,Ka.getRaw(o,"left").bind(function(n){return Ka.getRaw(o,"top").bind(function(t){return Ka.getRaw(o,"position").map(function(e){return("fixed"===e?CT:kT)(parseInt(n,10),parseInt(t,10))})})}).getOrThunk(function(){var e=xw.absolute(o);return ST(e.left(),e.top())})),s=UT(e,t.snaps(),c,a,u,n),l=xT(s,0,u);Ka.setAll(r,l)}t.onDrag()(e,r,n)},GT=Cr("snaps",[gr("getSnapPoints"),da("onSensor"),gr("leftAttr"),gr("topAttr"),Or("lazyViewport",function(){var e=Sw();return{x:e.left,y:e.top,width:U(window.innerWidth),height:U(window.innerHeight),bottom:U(e.top()+window.innerHeight),right:U(e.left()+window.innerWidth)}})]),XT=Object.freeze({getData:function(e){return P.from(cf(e.x(),e.y()))},getDelta:function(e,t){return cf(t.left()-e.left(),t.top()-e.top())}}),YT=[Or("useFixed",!1),gr("blockerClass"),Or("getTarget",b),Or("onDrag",N),Or("repositionTarget",!0),da("onDrop"),GT,va("dragger",{handlers:function(u,c){return Ur([Xr(_e(),function(t,e){if(0===e.event().raw().button){e.stop();var n,o={drop:function(){i()},delayDrop:function(){a.schedule()},forceDrop:function(){i()},move:function(e){a.cancel(),c.update(XT,e).each(function(e){WT(t,u,e)})}},r=t.getSystem().build(Am.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[u.blockerClass()]},events:(n=o,Ur([Xr(_e(),n.forceDrop),Xr(Pe(),n.drop),Xr(Le(),function(e,t){n.move(t.event())}),Xr(Ne(),n.delayDrop)]))})),i=function(){_T(r),u.snaps().each(function(e){PT(t,e)});var e=u.getTarget()(t.element());u.onDrop()(t,e)},a=tv(i,200);c.reset(),IT(t,r)}})])}})],$T=Object.freeze({getData:function(e){var t,n=e.raw().touches;return 1===n.length?(t=n[0],P.some(cf(t.clientX,t.clientY))):P.none()},getDelta:function(e,t){return cf(t.left()-e.left(),t.top()-e.top())}}),qT=YT,KT=[Or("useFixed",!1),Or("getTarget",b),Or("onDrag",N),Or("repositionTarget",!0),Or("onDrop",N),GT,va("dragger",{handlers:function(o,r){return Ur([Qr(Be()),Xr(Re(),function(t,e){e.stop(),r.update($T,e.event()).each(function(e){WT(t,o,e)})}),Xr(Fe(),function(t,e){o.snaps().each(function(e){PT(t,e)});var n=o.getTarget()(t.element());r.reset(),o.onDrop()(t,n)})])}})],JT=Object.freeze({mouse:qT,touch:KT}),QT=Object.freeze({init:function(){var i=P.none(),e=U({});return yi({readState:e,reset:function(){i=P.none()},update:function(r,e){return r.getData(e).bind(function(e){return t=r,n=e,o=i.map(function(e){return t.getDelta(e,n)}),i=P.some(n),o;var t,n,o})}})}}),ZT=zi({branchKey:"mode",branches:JT,name:"dragging",active:{events:function(e,t){return e.dragger().handlers(e,t)}},extra:{snap:en(["sensor","range","output"],["extra"])},state:QT}),eM={getData:function(e){var t=e.raw().touches;if(t.length<2)return P.none();var n=Math.abs(t[0].clientX-t[1].clientX),o=Math.abs(t[0].clientY-t[1].clientY),r=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));return P.some({deltaX:U(n),deltaY:U(o),deltaDistance:U(r)})},getDelta:function(e,t){var n=t.deltaX()-e.deltaX(),o=t.deltaY()-e.deltaY(),r=t.deltaDistance()-e.deltaDistance();return{deltaX:U(n),deltaY:U(o),deltaDistance:U(r)}}},tM=Object.freeze({events:function(i,t){return Ur([Gr(Ie()),Xr(Re(),function(r,e){e.stop(),t.update(eM,e.event()).each(function(e){var t=0<e.deltaDistance()?1:-1,n=t*Math.abs(e.deltaX()),o=t*Math.abs(e.deltaY());(1===t?i.onPunch():i.onPinch())(r.element(),n,o)})}),Xr(Fe(),t.reset)])}}),nM=[gr("onPinch"),gr("onPunch")],oM=(Si({fields:nM,name:"pinching",active:tM,state:QT}),Object.freeze({getState:function(e,t,n){return n}})),rM=Object.freeze({events:function(r,i){var o=function(n,o){r.updateState().each(function(e){var t=e(n,o);i.set(t)}),r.renderComponents().each(function(e){var t=e(o,i.get());xo(n),V(t,function(e){po(n,n.getSystem().build(e))})})};return Ur([Xr(Ht(),function(e,t){var n=r.channel();M(t.channels(),n)&&o(e,t.data())}),ei(function(t,e){r.initialData().each(function(e){o(t,e)})})])}}),iM=Object.freeze({init:function(e){var t=Ae(P.none());return{readState:function(){return t.get().getOr("none")},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(P.none())}}}}),aM=[gr("channel"),xr("renderComponents"),xr("updateState"),xr("initialData")],uM=Si({fields:aM,name:"reflecting",active:rM,apis:oM,state:iM}),cM=[gr("lazySink"),gr("tooltipDom"),Or("exclusive",!0),Or("tooltipComponents",[]),Or("delay",300)],sM=Object.freeze({init:function(){var n=Ae(P.none()),t=Ae(P.none()),o=function(){n.get().each(function(e){clearTimeout(e)})},e=U("not-implemented");return yi({getTooltip:function(){return t.get()},isShowing:function(){return t.get().isSome()},setTooltip:function(e){t.set(P.some(e))},clearTooltip:function(){t.set(P.none())},clearTimer:o,resetTimer:function(e,t){o(),n.set(P.some(setTimeout(function(){e()},t)))},readState:e})}}),lM=oo("tooltip.exclusive"),fM=oo("tooltip.show"),dM=oo("tooltip.hide"),mM=function(e,t,n){e.getSystem().broadcastOn([lM],{})},gM=Object.freeze({hideAllExclusive:mM}),hM=Object.freeze({events:function(o,r){var n=function(){r.getTooltip().each(function(e){yo(e),r.clearTooltip()}),r.clearTimer()};return Ur([Xr(Ht(),function(e,t){M(t.channels(),lM)&&n()}),Xr(Ue(),function(e){io(e,fM)}),Xr(Mt(),function(e){io(e,dM)}),Xr(fM,function(e){r.resetTimer(function(){!function(t){if(!r.isShowing()){mM(t);var e=o.lazySink()(t).getOrDie(),n=t.getSystem().build({dom:o.tooltipDom(),components:o.tooltipComponents(),events:Ur([Xr(je(),function(e){io(t,fM)}),Xr(Ne(),function(e){io(t,dM)})])});r.setTooltip(n),po(e,n),tx.position(e,{anchor:"hotspot",hotspot:t,layouts:{onLtr:U([wy,by,gy,vy,hy,py]),onRtl:U([wy,by,gy,vy,hy,py])}},n)}}(e)},o.delay())}),Xr(dM,function(e){r.resetTimer(function(){n()},o.delay())}),Xr(je(),function(e){io(e,fM)}),Xr(Ne(),function(e){io(e,dM)}),ti(function(e){n()})])}}),vM=(Si({fields:cM,name:"tooltipping",active:hM,state:sM,apis:gM}),oo("dom-data"),jo([gr("root"),wr("dispatchers",[gr("getTarget"),gr("alloyConfig")]),Or("insertion",function(e,t){Sn.append(e,t.element())})]),U([la(["closedClass","openClass","shrinkingClass","growingClass","expandedClass","collapsedClass"]),da("onShrunk"),da("onGrown"),ms("expandableBehaviours",[af])])),pM=U([Ns({schema:[gr("dom")],name:"minimal"}),Ns({schema:[gr("dom")],name:"extra",overrides:function(o){return{behaviours:xi([qp.config({dimension:{property:"height"},closedClass:o.markers().closedClass(),openClass:o.markers().openClass(),shrinkingClass:o.markers().shrinkingClass(),growingClass:o.markers().growingClass(),expanded:!0,onStartShrink:function(n){Zi(n.element()).each(function(e){var t=n.getSystem().getByUid(o.uid()).getOrDie();ds.focusIn(t)}),n.getSystem().getByUid(o.uid()).each(function(e){Pi.remove(e.element(),o.markers().expandedClass()),Pi.add(e.element(),o.markers().collapsedClass())})},onStartGrow:function(e){e.getSystem().getByUid(o.uid()).each(function(e){Pi.add(e.element(),o.markers().expandedClass()),Pi.remove(e.element(),o.markers().collapsedClass())})},onShrunk:function(e){o.onShrunk()(e)},onGrown:function(e){o.onGrown()(e)},getAnimationRoot:function(e){return e.getSystem().getByUid(o.uid()).getOrDie().element()}})])}}}),Ns({factory:Ml,schema:[gr("dom")],name:"expander",overrides:function(e){return{action:(t=e,n=qp.toggleGrow,function(e){el(e,t,"extra").each(n)})};var t,n}}),Ns({schema:[gr("dom")],name:"controls"})]),bM=function(t,n){return function(e){el(e,t,"extra").each(n)}},wM=(Tl({name:"ExpandableForm",configFields:vM(),partFields:pM(),factory:function(n,e,t,o){var r=function(e){return il(e,n,["minimal","extra"])};return{uid:n.uid(),dom:n.dom(),components:e,behaviours:te(xi([af.config({store:{mode:"manual",getValue:function(e){var t=r(e),n=af.getValue(t.minimal()),o=af.getValue(t.extra());return te(n,o)},setValue:function(e,t){var n=r(e);af.setValue(n.minimal(),t),af.setValue(n.extra(),t)}}})]),gs(n.expandableBehaviours())),apis:{toggleForm:bM(n,qp.toggleGrow),collapseForm:bM(n,qp.shrink),collapseFormImmediately:bM(n,qp.immediateShrink),expandForm:bM(n,qp.grow),getField:function(e,t){return el(e,n,"minimal").bind(function(e){return rg.getField(e,t)}).orThunk(function(){return el(e,n,"extra").bind(function(e){return rg.getField(e,t)})})}}}},apis:{getField:function(e,t,n){return e.getField(t,n)},toggleForm:function(e,t){e.toggleForm(t)},collapseForm:function(e,t){e.collapseForm(t)},collapseFormImmediately:function(e,t){e.collapseFormImmediately(t)},expandForm:function(e,t){e.expandForm(t)}}}),U([gr("choices"),ms("chooserBehaviours",[ds,Ru,Hm,af]),la(["choiceClass","selectedClass"])])),yM=U([Ns({name:"legend",defaults:function(e){return{dom:{tag:"legend"}}}}),Us({factory:{sketch:function(e){return ke(e,["value"])}},name:"choices",unit:"choice",overrides:function(e,t){return{dom:{attributes:{role:"radio"}},behaviours:xi([af.config({store:{mode:"memory",initialValue:t.value}}),Ua.config({})]),domModification:{classes:[e.markers().choiceClass()]},events:_a(P.none())}}})]),xM=(Tl({name:"FormChooser",configFields:wM(),partFields:yM(),factory:function(a,e,t,n){return{uid:a.uid(),dom:a.dom(),components:e,behaviours:te(xi([ds.config({mode:"flow",selector:"."+a.markers().choiceClass(),executeOnMove:!0,getInitial:function(e){return Ru.getHighlighted(e).map(function(e){return e.element()})},execute:function(t,e,n){return t.getSystem().getByDom(n).map(function(e){return Ru.highlight(t,e),!0}).toOption().map(function(e){return!0})}}),Ru.config({itemClass:a.markers().choiceClass(),highlightClass:a.markers().selectedClass(),onHighlight:function(e,t){Un.set(t.element(),"aria-checked","true")},onDehighlight:function(e,t){Un.set(t.element(),"aria-checked","false")}}),Hm.config({find:P.some}),af.config({store:{mode:"manual",setValue:function(t,e){var n,o,r,i;(n=t,o=e,r=uu(n.element(),"."+a.markers().choiceClass()),i=E(r,function(e){return n.getSystem().getByDom(e).getOrDie()}),F(i,function(e){return af.getValue(e)===o})).each(function(e){Ru.highlight(t,e)})},getValue:function(e){return Ru.getHighlighted(e).map(af.getValue)}}})]),gs(a.chooserBehaviours())),events:Ur([Kr(At(),Ru.highlight),ei(Ru.highlightFirst)])}}}),function(e,t){var n=P.from(Un.get(e,"id")).fold(function(){var e=oo("dialog-label");return Un.set(t,"id",e),e},b);Un.set(e,"aria-labelledby",n)}),kM=U([gr("lazySink"),xr("dragBlockClass"),Or("useTabstopAt",U(!0)),Or("eventOrder",{}),ms("modalBehaviours",[ds]),ma("onExecute"),ha("onEscape")]),SM={sketch:b},CM=U([js({name:"draghandle",overrides:function(e,t){return{behaviours:xi([ZT.config({mode:"mouse",getTarget:function(e){return lu(e,'[role="dialog"]').getOr(e)},blockerClass:e.dragBlockClass().getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+Bo(t,null,2)).message)})])}}}),Ns({schema:[gr("dom")],name:"title"}),Ns({factory:SM,schema:[gr("dom")],name:"close"}),Ns({factory:SM,schema:[gr("dom")],name:"body"}),Ns({factory:SM,schema:[gr("dom")],name:"footer"}),Ps({factory:{sketch:function(e,t){return ne(e,{dom:t.dom(),components:t.components()})}},schema:[Or("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Or("components",[])],name:"blocker"})]),zM=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},OM=Tl({name:"ModalDialog",configFields:kM(),partFields:CM(),factory:function(o,e,t,r){var u=oo("alloy.dialog.busy"),c=oo("alloy.dialog.idle"),s=xi([ds.config({mode:"special",focusIn:P.some,onTab:function(){return P.some(!0)},onShiftTab:function(){return P.some(!0)}}),Ua.config({})]),n=oo("modal-events"),i=zM({},o.eventOrder(),{"alloy.system.attached":[n].concat(o.eventOrder()["alloy.system.attached"]||[])});return{uid:o.uid(),dom:te({attributes:{role:"dialog"}},o.dom()),components:e,apis:{show:function(i){var e=o.lazySink()().getOrDie(),a=Ae(P.none()),t=r.blocker(),n=e.getSystem().build(te(t,{components:t.components.concat([Wg(i)]),behaviours:xi([Om("dialog-blocker-events",[Xr(c,function(e,t){Un.has(i.element(),"aria-busy")&&(Un.remove(i.element(),"aria-busy"),a.get().each(function(e){return fh.remove(i,e)}))}),Xr(u,function(e,t){Un.set(i.element(),"aria-busy","true");var n=t.event().getBusySpec();a.get().each(function(e){fh.remove(i,e)});var o=n(i,s),r=e.getSystem().build(o);a.set(P.some(r)),fh.append(i,Wg(r)),r.hasConfigured(ds)&&ds.focusIn(r)})])])}));po(e,n),ds.focusIn(i)},hide:function(t){wn.parent(t.element()).each(function(e){t.getSystem().getByDom(e).each(function(e){yo(e)})})},getBody:function(e){return tl(e,o,"body")},getFooter:function(e){return tl(e,o,"footer")},setIdle:function(e){io(e,c)},setBusy:function(e,t){ao(e,u,{getBusySpec:t})}},eventOrder:i,behaviours:te(xi([fh.config({}),ds.config({mode:"cyclic",onEnter:o.onExecute(),onEscape:o.onEscape(),useTabstopAt:o.useTabstopAt()}),Om(n,[ei(function(e){xM(e.element(),tl(e,o,"title").element())})])]),gs(o.modalBehaviours()))}},apis:{show:function(e,t){e.show(t)},hide:function(e,t){e.hide(t)},getBody:function(e,t){return e.getBody(t)},getFooter:function(e,t){return e.getFooter(t)},setBusy:function(e,t,n){e.setBusy(t,n)},setIdle:function(e,t){e.setIdle(t)}}}),TM=U([gr("toggleClass"),gr("fetch"),ga("onExecute"),Or("getHotspot",P.some),ga("onItemExecute"),xr("lazySink"),gr("dom"),da("onOpen"),ms("splitDropdownBehaviours",[gS,ds,Ua]),Or("matchWidth",!1),Or("useMinWidth",!1)].concat(DS())),MM=Ns({factory:Ml,schema:[gr("dom")],name:"arrow",defaults:function(e){return{dom:{attributes:{role:"button","aria-haspopup":!0}},buttonBehaviours:xi([Ua.revoke()])}},overrides:function(t){return{action:function(e){e.getSystem().getByUid(t.uid()).each(uo)},buttonBehaviours:xi([Va.config({toggleOnExecute:!1,toggleClass:t.toggleClass(),aria:{mode:"pressed"}})])}}}),HM=Ns({factory:Ml,schema:[gr("dom")],name:"button",defaults:function(e){return{dom:{attributes:{role:"button"}},buttonBehaviours:xi([Ua.revoke()])}},overrides:function(n){return{action:function(t){t.getSystem().getByUid(n.uid()).each(function(e){n.onExecute()(e,t)})}}}}),AM=U([MM,HM,Ps({schema:[sa()],name:"menu",defaults:function(o){return{onExecute:function(t,n){t.getSystem().getByUid(o.uid()).each(function(e){o.onItemExecute()(e,t,n)})}}}}),xS()]),EM=Tl({name:"SplitDropdown",configFields:TM(),partFields:AM(),factory:function(n,e,t,o){var r=function(e){Hm.getCurrent(e).each(function(e){Ru.highlightFirst(e),ds.focusIn(e)})},i=function(e){zS(n,function(e){return e},e,o,r,jk.HighlightFirst).get(N)},a=function(e){var t=tl(e,n,"button");return uo(t),P.some(!0)},u=_a(P.some(i));return te({uid:n.uid(),dom:n.dom(),components:e,eventOrder:{"alloy.execute":["toggling","alloy.base.behaviour"]},events:u,behaviours:te(xi([gS.config({others:{sandbox:function(e){var t=tl(e,n,"arrow");return TS(n,e,{onOpen:function(){Va.on(t)},onClose:function(){Va.off(t)}})}}}),ds.config({mode:"special",onSpace:a,onEnter:a,onDown:function(e){return i(e),P.some(!0)}}),Ua.config({})]),gs(n.splitDropdownBehaviours()))},{dom:{attributes:{role:"presentation"}}})}}),VM=$t("within","extra","withinWidth"),DM=function(e,t,o){var n,r=(n=function(e,t){var n=o(e);return P.some({element:U(e),start:U(t),finish:U(t+n),width:U(n)})},R(e,function(t,e){return n(e,t.len).fold(U(t),function(e){return{len:e.finish(),list:t.list.concat([e])}})},{len:0,list:[]}).list),i=D(r,function(e){return e.finish()<=t}),a=B(i,function(e,t){return e+t.width()},0),u=r.slice(i.length);return{within:U(i),extra:U(u),withinWidth:U(a)}},BM=function(e){return E(e,function(e){return e.element()})},RM=function(e,t,n,o){var r,i,a,u,c,s,l,f,d,m,g,h,v=(r=e,i=t,a=n,u=DM(i,r,a),0===u.extra().length?P.some(u):P.none()).getOrThunk(function(){return DM(t,e-n(o),n)}),p=v.within(),b=v.extra(),w=v.withinWidth();return 1===b.length&&b[0].width()<=n(o)?(m=b,g=w,h=BM(p.concat(m)),VM(h,[],g)):1<=b.length?(s=b,l=o,f=w,d=BM(p).concat([l]),VM(d,BM(s),f)):(c=w,VM(BM(p),[],c))},FM=U([la(["closedClass","openClass","shrinkingClass","growingClass"]),ms("splitToolbarBehaviours",[]),Dr("builtGroups",function(){return Ae([])})]),IM=[gr("dom")],_M=U([Ns({factory:yp,schema:IM,name:"primary"}),Ns({factory:yp,schema:IM,name:"overflow",overrides:function(e){return{toolbarBehaviours:xi([qp.config({dimension:{property:"height"},closedClass:e.markers().closedClass(),openClass:e.markers().openClass(),shrinkingClass:e.markers().shrinkingClass(),growingClass:e.markers().growingClass()})])}}}),Ps({name:"overflow-button"}),Ps({name:"overflow-group"})]),LM=function(e,t){var n=E(t,function(e){return Wg(e)});yp.setGroups(e,n)},NM=function(e,t,n){var o=il(e,t,["primary","overflow"]),r=o.primary(),i=o.overflow();Ka.set(r.element(),"visibility","hidden"),yp.setGroups(i,[]);var a=t.builtGroups().get(),u=Sp.sketch(te(n["overflow-group"](),{items:[Ml.sketch(te(n["overflow-button"](),{action:function(e){qp.toggleGrow(o.overflow())}}))]})),c=e.getSystem().build(u);LM(r,a.concat([c]));var s=wf(r.element()),l=RM(s,a,function(e){return wf(e.element())},c);0===l.extra().length?(fh.remove(r,c),yp.setGroups(i,[])):(LM(r,l.within()),LM(i,l.extra())),Ka.remove(r.element(),"visibility"),Ka.reflow(r.element())},PM=(Tl({name:"SplitToolbar",configFields:FM(),partFields:_M(),factory:function(o,e,t,r){return te({dom:{attributes:{role:"group"}}},{uid:o.uid(),dom:o.dom(),components:e,behaviours:gs(o.splitToolbarBehaviours()),apis:{setGroups:function(e,t){var n;n=E(t,e.getSystem().build),o.builtGroups().set(n),NM(e,o,r)},refresh:function(e){NM(e,o,r)}}})},apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)}}}),Ol({name:"TabButton",configFields:[Or("uid",undefined),gr("value"),qo("dom","dom",Ao(function(e){return{attributes:{role:"tab",id:oo("aria"),"aria-selected":"false"}}}),cr()),xr("action"),Or("domModification",{}),ms("tabButtonBehaviours",[Ua,ds,af]),gr("view")],factory:function(e,t){return{uid:e.uid(),dom:e.dom(),components:e.components(),events:_a(e.action()),behaviours:te(xi([Ua.config({}),ds.config({mode:"execution",useSpace:!0,useEnter:!0}),af.config({store:{mode:"memory",initialValue:e.value()}})]),gs(e.tabButtonBehaviours())),domModification:e.domModification()}}})),jM=U([gr("tabs"),gr("dom"),Or("clickToDismiss",!1),ms("tabbarBehaviours",[Ru,ds]),la(["tabClass","selectedClass"])]),UM=Us({factory:PM,name:"tabs",unit:"tab",overrides:function(o,e){var r=function(e,t){Ru.dehighlight(e,t),ao(e,Gt(),{tabbar:e,button:t})},i=function(e,t){Ru.highlight(e,t),ao(e,Wt(),{tabbar:e,button:t})};return{action:function(e){var t=e.getSystem().getByUid(o.uid()).getOrDie(),n=Ru.isHighlighted(t,e);(n&&o.clickToDismiss()?r:n?N:i)(t,e)},domModification:{classes:[o.markers().tabClass()]}}}}),WM=U([UM]),GM=Tl({name:"Tabbar",configFields:jM(),partFields:WM(),factory:function(e,t,n,o){return{uid:e.uid(),dom:te({tag:"div",attributes:{role:"tablist"}},e.dom()),components:t,"debug.sketcher":"Tabbar",behaviours:te(xi([Ru.config({highlightClass:e.markers().selectedClass(),itemClass:e.markers().tabClass(),onHighlight:function(e,t){Un.set(t.element(),"aria-selected","true")},onDehighlight:function(e,t){Un.set(t.element(),"aria-selected","false")}}),ds.config({mode:"flow",getInitial:function(e){return Ru.getHighlighted(e).map(function(e){return e.element()})},selector:"."+e.markers().tabClass(),executeOnMove:!0})]),gs(e.tabbarBehaviours()))}}}),XM=Ol({name:"Tabview",configFields:[ms("tabviewBehaviours",[fh])],factory:function(e,t){return{uid:e.uid(),dom:te({tag:"div",attributes:{role:"tabpanel"}},e.dom()),behaviours:te(xi([fh.config({})]),gs(e.tabviewBehaviours()))}}}),YM=U([Or("selectFirst",!0),da("onChangeTab"),da("onDismissTab"),Or("tabs",[]),ms("tabSectionBehaviours",[])]),$M=Ns({factory:GM,schema:[gr("dom"),br("markers",[gr("tabClass"),gr("selectedClass")])],name:"tabbar",defaults:function(e){return{tabs:e.tabs()}}}),qM=Ns({factory:XM,name:"tabview"}),KM=U([$M,qM]),JM=Tl({name:"TabSection",configFields:YM(),partFields:KM(),factory:function(i,e,t,n){var o=function(e,t){el(e,i,"tabbar").each(function(e){t(e).each(uo)})};return{uid:i.uid(),dom:i.dom(),components:e,behaviours:gs(i.tabSectionBehaviours()),events:Ur(j([i.selectFirst()?[ei(function(e,t){o(e,Ru.getFirst)})]:[],[Xr(Wt(),function(e,t){var o,r,n=t.event().button();o=n,r=af.getValue(o),el(o,i,"tabview").each(function(n){F(i.tabs(),function(e){return e.value===r}).each(function(e){var t=e.view();Un.set(n.element(),"aria-labelledby",Un.get(o.element(),"id")),fh.set(n,t),i.onChangeTab()(n,o,t)})})}),Xr(Gt(),function(e,t){var n=t.event().button();i.onDismissTab()(e,n)})]])),apis:{getViewItems:function(e){return el(e,i,"tabview").map(function(e){return fh.contents(e)}).getOr([])},showTab:function(e,n){o(e,function(t){var e=Ru.getCandidates(t);return F(e,function(e){return af.getValue(e)===n}).filter(function(e){return!Ru.isHighlighted(t,e)})})}}}},apis:{getViewItems:function(e,t){return e.getViewItems(t)},showTab:function(e,t,n){e.showTab(t,n)}}}),QM=function(t,n,o){var e,r,i,a=wn.owner(t.element());return(e=a,r=n,i=o,P.from(e.dom().elementFromPoint(r,i)).map(Yt.fromDom)).filter(function(e){return t.element().dom().contains(e.dom())}).filter(function(e){return(_n.isText(e)?wn.parent(e):P.some(e)).exists(function(e){var t=e.dom().getBoundingClientRect();return n>=t.left&&n<=t.right&&o>=t.top&&o<=t.bottom})})},ZM=U([gr("dom"),gr("fetch"),da("onOpen"),ma("onExecute"),da("onTap"),da("onHoverOn"),da("onHoverOff"),da("onMiss"),ms("touchmenuBehaviours",[Va,Al,gS]),gr("toggleClass"),xr("lazySink"),xr("role"),Or("eventOrder",{}),Or("matchWidth",!0),Or("useMinWidth",!1),da("onClosed"),xr("menuTransition"),Or("getAnchor",function(e){var t=xw.absolute(e.element()),n=wf(e.element()),o=Za(e.element());return{anchor:"makeshift",x:t.left()+n/2,y:t.top()+o/2,layouts:{onLtr:function(){return[wy,by]},onRtl:function(){return[wy,by]}}}})].concat(DS())),eH=U([Ps({schema:[ca()],name:"menu"}),Ps({schema:[gr("dom")],name:"view"}),xS()]),tH=(Tl({name:"TouchMenu",configFields:ZM(),partFields:eH(),factory:function(i,e,t,a){var r=function(e){var t=gS.getCoupled(e,"sandbox");return fx.getState(t)},n=Ae(!1),u=function(e){!1===n.get()&&c(e)},c=function(e){i.onHoverOn()(e),n.set(!0)},s=function(e){!0===n.get()&&(i.onHoverOff()(e),n.set(!1))};return te({uid:i.uid(),dom:i.dom(),components:e,behaviours:te(xi([Va.config({toggleClass:i.toggleClass(),aria:{mode:"pressed",syncWithExpanded:!0}}),Al.config({}),gS.config({others:{sandbox:function(o){return px.sketch(te(a.view(),{lazySink:OS(o,i),inlineBehaviours:xi([Om("execute-for-menu",[oi(function(t,e){var n=e.event().target();t.getSystem().getByDom(n).each(function(e){i.onExecute()(o,t,e,af.getValue(e))})})]),zh.config({initialState:"closed",destinationAttr:"data-longpress-destination",stateAttr:"data-longpress-state",routes:zh.createBistate("open","closed",i.menuTransition().map(function(e){return Oe("transition",e)}).getOr({})),onFinish:function(e,t){"closed"===t&&(px.hide(e),i.onClosed()(o,e))}})]),onShow:function(e){zh.progressTo(e,"open")}}))}}})]),gs(i.touchmenuBehaviours())),events:Ur([Wr(De(),U(!0)),Xr(Be(),function(e,t){Va.on(e)}),Xr(Vt(),function(e,t){i.onTap()(e)}),Xr(Bt(),function(r,e){i.fetch()(r).get(function(e){c(r);var t=ih.sketch(te(a.menu(),{items:e})),n=gS.getCoupled(r,"sandbox"),o=i.getAnchor()(r);px.showAt(n,o,t)})}),Xr(Re(),function(t,n){var o=n.event().raw().touches[0];r(t).each(function(e){QM(e,o.clientX,o.clientY).fold(function(){Ru.dehighlightAll(e),Qi().each(Ji),QM(t,o.clientX,o.clientY).fold(U(s),U(u))(t)},function(e){so(t,e,je(),{x:o.clientX,y:o.clientY}),s(t)}),n.stop()})}),Xr(Fe(),function(e,t){r(e).each(function(e){Ru.getHighlighted(e).each(uo)});var n=gS.getCoupled(e,"sandbox");zh.progressTo(n,"closed"),Va.off(e)}),ti(function(e,t){var n=gS.getCoupled(e,"sandbox");px.hide(n)})]),eventOrder:te(i.eventOrder(),{"alloy.execute":["toggling","alloy.base.behaviour"]})},{dom:{attributes:{role:i.role().getOr("button")}}})}}),"container"),nH=[ms("slotBehaviours",[])],oH=function(e){return"<alloy.field."+e+">"},rH=function(r,e,t){var n,o=function(e){return rl(r)},i=function(n,o){return void 0===o&&(o=undefined),function(e,t){return el(e,r,t).map(function(e){return n(e,t)}).getOr(o)}},a=function(e,t){return"true"!==Un.get(e.element(),"aria-hidden")},u=i(a,!1),c=i(function(e,t){if(a(e)){var n=e.element();Ka.set(n,"display","none"),Un.set(n,"aria-hidden","true"),ao(e,Ut(),{name:t,visible:!1})}}),s=(n=c,function(t,e){V(e,function(e){return n(t,e)})}),l=i(function(e,t){if(!a(e)){var n=e.element();Ka.remove(n,"display"),Un.remove(n,"aria-hidden"),ao(e,Ut(),{name:t,visible:!0})}}),f={getSlotNames:o,getSlot:function(e,t){return el(e,r,t)},isShowing:u,hideSlot:c,hideAllSlots:function(e){return s(e,o())},showSlot:l};return{"debug.sketcher":{SlotContainer:t},uid:r.uid(),dom:r.dom(),components:e,behaviours:gs(r.slotBehaviours()),apis:f}},iH=se({getSlotNames:function(e,t){return e.getSlotNames(t)},getSlot:function(e,t,n){return e.getSlot(t,n)},isShowing:function(e,t,n){return e.isShowing(t,n)},hideSlot:function(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function(e,t){return e.hideAllSlots(t)},showSlot:function(e,t,n){return e.showSlot(t,n)}},dl),aH=te(iH,{sketch:function(e){var n,t=(n=[],{slot:function(e,t){return n.push(e),qs(tH,oH(e),t)},record:function(){return n}}),o=e(t),r=t.record(),i=E(r,function(e){return Ns({name:e,pname:oH(e)})});return kl(tH,nH,i,rH,o)}}),uH=function(e){return{element:function(){return e.element().dom()}}},cH=function(t){return aH.sketch(function(e){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(o=e,i=t,E(i,function(e){var t=e.name,n=e.settings;return o.slot(t,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Dk([ei(function(e){n.onrender&&n.onrender(uH(e))}),Xr(Ut(),function(o,e){var r=e.event();F(i,function(e){return e.name===r.name()}).each(function(e){var t=e.settings,n=r.visible()?t.onshow:t.onhide;n&&n(uH(o))})})])})})),slotBehaviours:Dk([ei(function(e){return aH.hideAllSlots(e)})])};var o,i})},sH=oo("FixSizeEvent"),lH=oo("AutoSizeEvent"),fH={setSidebar:function(e,t){Hm.getCurrent(e).each(function(e){return fh.set(e,[cH(t)])})},toggleSidebar:function(e,n){Hm.getCurrent(e).each(function(t){Hm.getCurrent(t).each(function(e){qp.hasGrown(t)?aH.isShowing(e,n)?qp.shrink(t):(aH.hideAllSlots(e),aH.showSlot(e,n)):(aH.hideAllSlots(e),aH.showSlot(e,n),qp.grow(t))})})},whichSidebar:function(e){return Hm.getCurrent(e).bind(function(e){return qp.isGrowing(e)||qp.hasGrown(e)?Hm.getCurrent(e).bind(function(t){return F(aH.getSlotNames(t),function(e){return aH.isShowing(t,e)})}):P.none()})},renderSidebar:function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"]},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:xi([qp.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(e){Hm.getCurrent(e).each(aH.hideAllSlots),io(e,lH)},onGrown:function(e){io(e,lH)},onStartGrow:function(e){ao(e,sH,{width:Ka.getRaw(e.element(),"width").getOr("")})},onStartShrink:function(e){ao(e,sH,{width:wf(e.element())+"px"})}}),fh.config({}),Hm.config({find:function(e){var t=fh.contents(e);return K(t)}})])}],behaviours:xi([LC(0),Om("sidebar-sliding-events",[Xr(sH,function(e,t){Ka.set(e.element(),"width",t.event().width())}),Xr(lH,function(e,t){Ka.remove(e.element(),"width")})])])}}},dH=function(e){return Sp.sketch({dom:{tag:"div",classes:["tox-toolbar__group"]},components:[Sp.parts().items({})],items:e.items,markers:{itemSelector:".tox-tbtn, .tox-split-button, .tox-toolbar-nav-js"},tgroupBehaviours:xi([Nm.config({})])})},mH=function(n){return yp.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"]},components:[yp.parts().groups({})],toolbarBehaviours:xi([ds.config({mode:"cyclic",onEscape:n.onEscape}),Om("toolbar-events",[ei(function(e){var t=E(n.initGroups,dH);yp.setGroups(e,t)})])])})},gH=PO.optional({factory:dT,name:"menubar",schema:[gr("dom"),gr("getSink")]}),hH=PO.optional({factory:{sketch:function(e){return mH({uid:e.uid,onEscape:function(){return e.onEscape(),P.some(!0)},initGroups:[]})}},name:"toolbar",schema:[gr("dom"),gr("onEscape")]}),vH=PO.optional({name:"socket",schema:[gr("dom")]}),pH=PO.optional({factory:{sketch:fH.renderSidebar},name:"sidebar",schema:[gr("dom")]}),bH=Tl({name:"OuterContainer",factory:function(n,e,t){var o={getSocket:function(e){return NO.getPart(e,n,"socket")},setSidebar:function(e,t){NO.getPart(e,n,"sidebar").each(function(e){return fH.setSidebar(e,t)})},toggleSidebar:function(e,t){NO.getPart(e,n,"sidebar").each(function(e){return fH.toggleSidebar(e,t)})},whichSidebar:function(e){return NO.getPart(e,n,"sidebar").bind(fH.whichSidebar).getOrNull()},getToolbar:function(e){return NO.getPart(e,n,"toolbar")},setToolbar:function(e,t){NO.getPart(e,n,"toolbar").each(function(e){yp.setGroups(e,t)})},focusToolbar:function(e){NO.getPart(e,n,"toolbar").each(function(e){ds.focusIn(e)})},setMenubar:function(e,t){NO.getPart(e,n,"menubar").each(function(e){dT.setMenus(e,t)})},focusMenubar:function(e){NO.getPart(e,n,"menubar").each(function(e){dT.focus(e)})}};return{uid:n.uid(),dom:n.dom(),components:e,apis:o,behaviours:n.behaviours()}},configFields:[gr("dom"),gr("behaviours")],partFields:[gH,hH,vH,pH],apis:{getSocket:function(e,t){return e.getSocket(t)},setSidebar:function(e,t,n){e.setSidebar(t,n)},toggleSidebar:function(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function(e,t){return e.whichSidebar(t)},getToolbar:function(e,t){return e.getToolbar(t)},setToolbar:function(e,t,n){var o=E(n,function(e){return dH({items:e})});e.setToolbar(t,o)},setMenubar:function(e,t,n){e.setMenubar(t,n)},focusMenubar:function(e,t){e.focusMenubar(t)},focusToolbar:function(e,t){e.focusToolbar(t)}}}),wH=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],yH=navigator,xH=yH.userAgent,kH=function(e){return"matchMedia"in window&&matchMedia(e).matches};/Android/.test(xH),QO=(QO=!(JO=/WebKit/.test(xH))&&/MSIE/gi.test(xH)&&/Explorer/gi.test(yH.appName))&&/MSIE (\w+)\./.exec(xH)[1],ZO=-1!==xH.indexOf("Trident/")&&(-1!==xH.indexOf("rv:")||-1!==yH.appName.indexOf("Netscape"))&&11,eT=-1!==xH.indexOf("Edge/")&&!QO&&!ZO&&12,QO=QO||ZO||eT,!JO&&!ZO&&/Gecko/.test(xH),xH.indexOf("Mac"),tT=/(iPad|iPhone)/.test(xH),nT="FormData"in window&&"FileReader"in window&&"URL"in window&&!!pO,kH("only screen and (max-device-width: 480px)"),kH("only screen and (min-width: 800px)"),xH.indexOf("Windows Phone"),eT&&(JO=!1),!tT||nT||parseInt(xH.match(/AppleWebKit\/(\d*)/)[1],10),window.getSelection&&window,QO&&!eT&&document.documentMode;var SH,CH,zH,OH=Array.isArray,TH=function(e,t,n){var o,r;if(!e)return 0;if(n=n||e,e.length!==undefined){for(o=0,r=e.length;o<r;o++)if(!1===t.call(n,e[o],o,e))return 0}else for(o in e)if(e.hasOwnProperty(o)&&!1===t.call(n,e[o],o,e))return 0;return 1},MH=function(e,t,n){var o,r;for(o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},HH={isArray:OH,toArray:function(e){var t,n,o=e;if(!OH(e))for(o=[],t=0,n=e.length;t<n;t++)o[t]=e[t];return o},each:TH,map:function(n,o){var r=[];return TH(n,function(e,t){r.push(o(e,t,n))}),r},filter:function(n,o){var r=[];return TH(n,function(e,t){o&&!o(e,t,n)||r.push(e)}),r},indexOf:function(e,t){var n,o;if(e)for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,o){var r=0;for(arguments.length<3&&(n=e[0]);r<e.length;r++)n=t.call(o,n,e[r],r);return n},findIndex:MH,find:function(e,t,n){var o=MH(e,t,n);return-1!==o?e[o]:undefined},last:function(e){return e[e.length-1]}},AH=function(e,t){return t?!("array"!==t||!HH.isArray(e))||typeof e===t:e!==undefined},EH=(HH.isArray,AH),VH=(HH.toArray,function(e,t,n){var o;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n}),DH=(HH.each,HH.map,HH.filter,HH.indexOf,function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}),BH=function(e,t){for(var n,o,r,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var u,c=arguments;for(n=1,o=c.length;n<o;n++)for(r in t=c[n])t.hasOwnProperty(r)&&(u=t[r])!==undefined&&(e[r]=u);return e},RH=pz.trim,FH=function(t){return function(e){if(e&&1===e.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},IH=FH("true"),_H=FH("false"),LH=function(e,t,n,o,r){return{type:e,title:t,url:n,level:o,attach:r}},NH=function(e){return e.innerText||e.textContent},PH=function(e){return(t=e)&&"A"===t.nodeName&&(t.id||t.name)!==undefined&&UH(e);var t},jH=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},UH=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return IH(e)}return!1}(e)&&!_H(e)},WH=function(e){return jH(e)&&UH(e)},GH=function(e){var t,n,o=(t=e).id?t.id:oo("h");return LH("header",NH(e),"#"+o,jH(n=e)?parseInt(n.nodeName.substr(1),10):0,function(){e.id=o})},XH=function(e){var t=e.id||e.name,n=NH(e);return LH("anchor",n||"#"+t,"#"+t,0,N)},YH=function(e){var t,n;return t="h1,h2,h3,h4,h5,h6,a:not([href])",n=e,E(uu(Yt.fromDom(n),t),function(e){return e.dom()})},$H=function(e){return 0<RH(e.title).length},qH=function(e){var t,n=YH(e);return D((t=n,E(D(t,WH),GH)).concat(E(D(n,PH),XH)),$H)},KH="tinymce-url-history",JH=function(e){return y(e)&&/^https?/.test(e)},QH=function(e){return x(e)&&function(e,t){for(var n=ae(e),o=0,r=n.length;o<r;o++){var i=n[o],a=e[i];if(t(a,i,e))return P.some(a)}return P.none()}(e,function(e){return!(S(t=e)&&t.length<=5&&G(t,JH));var t}).isNone()},ZH=function(){var e,t=localStorage.getItem(KH);if(null===t)return{};try{e=JSON.parse(t)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+KH+" was not valid JSON",n),{};throw n}return QH(e)?e:(console.log("Local storage "+KH+" was not valid format",e),{})},eA=function(e){var t=ZH();return Object.prototype.hasOwnProperty.call(t,e)?t[e]:[]},tA=function(t,e){if(JH(t)){var n=ZH(),o=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],r=D(o,function(e){return e!==t});n[e]=[t].concat(r).slice(0,5),function(e){if(!QH(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));localStorage.setItem(KH,JSON.stringify(e))}(n)}},nA=Object.prototype.hasOwnProperty,oA=function(e){return!!e},rA=function(e){return se(VH(e,/[, ]/),oA)},iA=function(e,t){return nA.call(e,t)?P.some(e[t]):P.none()},aA=function(e,t,n){var o=iA(e,t).getOr(n);return y(o)?P.some(o):P.none()},uA=function(u){return function(r){return(e=u.settings,t=r,n=P.some(e.file_picker_types).filter(oA),o=P.some(e.file_browser_callback_types).filter(oA),i=n.or(o).map(rA).fold(function(){return!0},function(e){return iA(e,t).getOr(!1)}),a=P.some(e.file_picker_callback).filter(z),i?a:P.none()).map(function(o){return function(t){return kb.nu(function(n){var e=BH({filetype:r},P.from(t.meta).getOr({}));o.call(u,function(e,t){if(!y(e))throw new Error("Expected value to be string");if(t!==undefined&&!x(t))throw new Error("Expected meta to be a object");n({value:e,meta:t})},t.value,e)})}});var e,t,n,o,i,a}},cA=function(e){return{getHistory:eA,addToHistory:tA,getLinkInformation:(n=e,function(){return!1===n.settings.typeahead_urls?P.none():P.some({targets:qH(n.getBody()),anchorTop:aA(n.settings,"anchor_top","#top"),anchorBottom:aA(n.settings,"anchor_bottom","#bottom")})}),getValidationHandler:(t=e,function(){var e=t.settings.filepicker_validator_handler;return z(e)?P.some(e):P.none()}),getUrlPicker:uA(e)};var t,n},sA=function(e,t,n){var o,r,i,a,u,c,s,l,f,d={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons}},interpreter:function(e){return LO(IO,e,d)},anchors:{toolbar:function(){return{anchor:"hotspot",hotspot:bH.getToolbar(e).getOrDie("Could not find a toolbar element"),layouts:{onRtl:function(){return[gy]},onLtr:function(){return[hy]}}}},banner:function(){return{anchor:"hotspot",hotspot:bH.getToolbar(e).getOrDie("Could not find a toolbar element"),layouts:{onRtl:function(){return[wy]},onLtr:function(){return[wy]}}}},cursor:function(){return{anchor:"selection",root:Yt.fromDom(n.getBody()),getSelection:function(){var e=n.selection.getRng();return P.some(pv.range(Yt.fromDom(e.startContainer),e.startOffset,Yt.fromDom(e.endContainer),e.endOffset))}}},node:function(e){return{anchor:"selection",root:Yt.fromDom(n.getBody()),getSelection:function(){return P.some(pv.range(e,0,e,0))}}}},getSink:function(){return ie.value(t)}},urlinput:cA(n),styleselect:(o=n,r=function(e){return function(){return o.formatter.match(e)}},i=function(t){return function(){var e=o.formatter.get(t);return e!==undefined?P.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styleAttr:o.formatter.getCssText(t)}):P.none()}},a=function(e){var t=e.items;return t!==undefined&&0<t.length?W(t,a):[e.format]},u=Ae([]),c=Ae([]),s=Ae([]),l=Ae([]),f=Ae(!1),o.on("init",function(){var e=ze(o.settings,"style_formats").getOr(wH),t=YO(o,e,r,i);u.set(t),c.set(W(t,a))}),o.on("addStyleModifications",function(e){var t=YO(o,e.items,r,i);s.set(t),f.set(e.replace),l.set(W(t,a))}),{getData:function(){var e=f.get()?[]:u.get(),t=s.get();return e.concat(t)},getFlattenedKeys:function(){var e=f.get()?[]:c.get(),t=l.get();return e.concat(t)}})};return d},lA=function(e,n,o){var t=qh(Yt.fromDom(document),"mousedown",function(t){V([n,o],function(e){e.broadcastOn([dx()],{target:t.target()})})}),r=qh(Yt.fromDom(document),"touchstart",function(t){V([n,o],function(e){e.broadcastOn([dx()],{target:t.target()})})}),i=qh(Yt.fromDom(document),"mouseup",function(t){0===t.raw().button&&V([n,o],function(e){e.broadcastOn([mx()],{target:t.target()})})}),a=function(t){V([n,o],function(e){e.broadcastOn([dx()],{target:Yt.fromDom(t.target)})})};e.on("mousedown",a),e.on("touchstart",a);var u=function(t){0===t.button&&V([n,o],function(e){e.broadcastOn([mx()],{target:Yt.fromDom(t.target)})})};e.on("mouseup",u),e.on("remove",function(){e.off("mousedown",a),e.off("touchstart",a),e.off("mouseup",u),Co(n),Co(o),n.destroy(),o.destroy(),t.unbind(),r.unbind(),i.unbind()})},fA=[Ar("disabled",!1),Sr("tooltip"),Sr("icon"),Sr("text"),Er("onSetup",function(){return N})],dA=Uo([vr("type"),pr("onAction")].concat(fA)),mA=function(e){return nr("toolbarbutton",dA,e)},gA=Uo([vr("type"),Sr("tooltip"),Sr("icon"),Sr("text"),pr("fetch"),Er("onSetup",function(){return N})]),hA=Uo([vr("type"),Sr("tooltip"),Sr("icon"),Sr("text"),(SH="select",kr(SH,mr)),pr("fetch"),Er("onSetup",function(){return N}),Hr("presets","normal"),Or("columns",1),pr("onAction"),pr("onItemAction")]),vA=[Ar("active",!1)].concat(fA),pA=Uo(vA.concat([vr("type"),pr("onAction")])),bA=function(e){return nr("ToggleButton",pA,e)},wA=[Er("predicate",function(){return!1}),Or("scope","node"),Or("position","selection")],yA=fA.concat([Or("type","contextformbutton"),Or("primary",!1),pr("onAction"),Dr("original",b)]),xA=vA.concat([Or("type","contextformbutton"),Or("primary",!1),pr("onAction"),Dr("original",b)]),kA=fA.concat([Or("type","contextformbutton")]),SA=vA.concat([Or("type","contextformtogglebutton")]),CA=ur("type",{contextformbutton:yA,contextformtogglebutton:xA}),zA=Uo([Or("type","contextform"),Er("initValue",function(){return""}),Sr("label"),yr("commands",CA),kr("launch",ur("type",{contextformbutton:kA,contextformtogglebutton:SA}))].concat(wA)),OA=Uo([Or("type","contexttoolbar"),yr("items",fr)].concat(wA)),TA=function(t){return{isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},MA=function(t){return{setActive:function(e){Va.set(t,e)},isActive:function(){return Va.isOn(t)},isDisabled:function(){return eg.isDisabled(t)},setDisabled:function(e){return e?eg.disable(t):eg.enable(t)}}},HA=oo("focus-button"),AA=function(t,n,e,o,r){var i,a=e.map(function(e){return{"aria-label":e,title:e}}).getOr({});return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]),attributes:a},components:ok([t.map(function(e){return KC(e,r.icons)}),n.map(function(e){return JC(e,"tox-tbtn")})]),eventOrder:(i={},i[_e()]=["focusing","alloy.base.behaviour","common-button-display-events"],i),buttonBehaviours:xi([Om("common-button-display-events",[Xr(_e(),function(e,t){t.event().prevent(),io(e,HA)})])].concat(o.map(function(e){return uM.config({channel:e,initialData:{icon:t,text:n},renderComponents:function(e,t){return ok([e.icon.map(function(e){return KC(e,r.icons)}),e.text.map(function(e){return JC(e,"tox-tbtn")})])}})}).toArray()))}},EA=function(e,t,n){var o,r=Ae(N),i=AA(e.icon,e.text,e.tooltip,P.none(),n);return Ml.sketch({dom:i.dom,components:i.components,eventOrder:UO,buttonBehaviours:xi([Om("toolbar-button-events",[(o={onAction:e.onAction,getApi:t.getApi},oi(function(t,e){Zx(o,t)(function(e){ao(t,jO,{buttonApi:e}),o.onAction(e)})})),ek(t,r),tk(t,r)]),Qx(e.disabled)].concat(t.toolbarButtonBehaviours))})},VA=function(e,t,n){return EA(e,{toolbarButtonBehaviours:[].concat(0<n.length?[Om("toolbarButtonWith",n)]:[]),getApi:TA,onSetup:e.onSetup},t.backstage.shared.providers)},DA=function(e,t,n){return te(EA(e,{toolbarButtonBehaviours:[fh.config({}),Va.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[Om("toolbarToggleButtonWith",n)]:[]),getApi:MA,onSetup:e.onSetup},t.backstage.shared.providers))},BA=function(m,g,h){return function(d){return kb.nu(function(e){return g.fetch(e)}).map(function(e){return t=te((n=oo("menu-value"),o=e,r=function(e){g.onItemAction(m(d),e)},i=g.columns,a=g.presets,u=zx.CLOSE_ON_EXECUTE,c=g.select.getOr(function(){return!1}),s=h,l=Xk(o),f=qk(o,r,i,"color"!==a?"normal":"color",u,c,s),$k(n,l,f,i,a)),{movement:Lk(g.columns,g.presets),menuBehaviours:Dk("auto"!==g.columns?[]:[ei(function(o,e){Ek(o,4,Ux(g.presets)).each(function(e){var t=e.numRows,n=e.numColumns;ds.setGridSize(o,t,n)})})])}),vh.singleData(t.value,t);var t,n,o,r,i,a,u,c,s,l,f})}},RA=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],FA=function(n,e){var t=P.some(function(t){return function(){var e=F(RA,function(e){return n.formatter.match(e.format)}).fold(function(){return"Align"},function(e){return e.title});ao(t,WO,{text:e})}}),o={type:"basic",data:RA};return qO(n,e,o,{isSelectedFor:function(e){return function(){return n.formatter.match(e)}},getPreviewFor:function(e){return function(){return P.none()}},onAction:function(e){return function(){n.undoManager.transact(function(){n.focus(),n.formatter.match(e.format)?n.formatter.remove(e.format):n.formatter.apply(e.format)})}},nodeChangeHandler:t})},IA=function(e,t){return/[0-9.]+px$/.test(e)?(n=72*parseInt(e,10)/96,o=t||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):e;var n,o,r},_A=function(o,r){return function(e,t){var n=o(e).fold(h(ie.error,ar),ie.value).getOrDie();return r(n,t)}},LA={button:_A(mA,function(e,t){return VA(e,t,[])}),togglebutton:_A(bA,function(e,t){return DA(e,t,[])}),menubutton:_A(function(e){return nr("menubutton",gA,e)},function(e,t){return cT(e,"tox-tbtn",t.backstage.shared,"button")}),splitbutton:_A(function(e){return nr("SplitButton",hA,e)},function(e,t){return n=e,o=t.backstage.shared,r=oo("channel-update-split-dropdown-display"),i=function(n){return{isDisabled:function(){return!0},setDisabled:function(){},setIconFill:function(e,t){fu(n.element(),'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(e){Un.set(e,"fill",t)})},setIconStroke:function(e,t){fu(n.element(),'svg path[id="'+e+'"], rect[id="'+e+'"]').each(function(e){Un.set(e,"stroke",t)})},setActive:function(e){Va.set(n,e)},isActive:function(){return Va.isOn(n)}}},a=Ae(N),u={getApi:i,onSetup:n.onSetup},EM.sketch({dom:{tag:"div",classes:["tox-split-button"]},onExecute:function(e){n.onAction(i(e))},onItemExecute:function(e,t,n){},splitDropdownBehaviours:xi([Va.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Om("split-dropdown-events",[Xr(HA,Ua.focus),ek(u,a),tk(u,a)])]),toggleClass:"mce-active",lazySink:o.getSink,fetch:BA(i,n,o.providers),parts:{menu:_k(0,n.columns,n.presets)},components:[EM.parts().button(AA(n.icon,n.text,n.tooltip,P.some(r),o.providers)),EM.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:xx("icon-chevron-down",o.providers.icons,U(""))}})]});var n,o,r,i,a,u}),styleSelectButton:function(e,t){return n=e,o=t.backstage,r=o.styleselect,qO(n,o,r,aT(n));var n,o,r},fontsizeSelectButton:function(e,t){return i=e,n=t.backstage,a=function(){var n=P.none(),o=u.data,r=i.queryCommandValue("FontSize");if(r)for(var e=function(e){var t=IA(r,e);n=F(o,function(e){return e.format===r||e.format===t})},t=3;n.isNone()&&0<=t;t--)e(t);return{matchOpt:n,px:r}},o=P.some(function(r){return function(){var e=a(),t=e.matchOpt,n=e.px,o=t.fold(function(){return n},function(e){return e.title});ao(r,WO,{text:o})}}),u=oT(i,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",Wz.Space),qO(i,n,u,{isSelectedFor:function(t){return function(){return a().matchOpt.exists(function(e){return e.format===t})}},getPreviewFor:function(){return function(){return P.none()}},onAction:function(e){return function(){i.undoManager.transact(function(){i.focus(),i.execCommand("FontSize",!1,e.format)})}},nodeChangeHandler:o});var i,n,a,o,u},fontSelectButton:function(e,t){return r=e,n=t.backstage,o=function(){var n=function(e){return e?e.split(",")[0]:""},e=r.queryCommandValue("FontName"),t=a.data,o=e?e.toLowerCase():"";return F(t,function(e){var t=e.format;return t.toLowerCase()===o||n(t).toLowerCase()===n(o).toLowerCase()})},i=P.some(function(n){return function(){var e=r.queryCommandValue("FontName"),t=o().fold(function(){return e},function(e){return e.title});ao(n,WO,{text:t})}}),a=oT(r,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",Wz.SemiColon),qO(r,n,a,{isSelectedFor:function(t){return function(){return o().exists(function(e){return e.format===t})}},getPreviewFor:function(e){return function(){return P.some({tag:"div",styleAttr:-1===e.indexOf("dings")?"font-family:"+e:""})}},onAction:function(e){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,e.format)})}},nodeChangeHandler:i});var r,n,o,i,a},formatButton:function(e,t){return n=e,o=t.backstage,r=rT(n),qO(n,o,r.dataset,r);var n,o,r},alignMenuButton:function(e,t){return FA(e,t.backstage)}},NA={styleselect:LA.styleSelectButton,fontsizeselect:LA.fontsizeSelectButton,fontselect:LA.fontSelectButton,formatselect:LA.formatButton,align:LA.alignMenuButton},PA=function(t,n,o){var e=(!1===n.toolbar?"":n.toolbar===undefined||!0===n.toolbar?"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image":n.toolbar).split("|"),r=E(e,function(e){return e.trim().split(" ")});return E(r,function(e){return W(e,function(e){return 0===e.trim().length?[]:ze(n.buttons,e.toLowerCase()).fold(function(){return ze(NA,e.toLowerCase()).map(function(e){return e(t,o)}).orThunk(function(){return console.error("No representation for toolbarItem: "+e),P.none()})},function(e){return n=o,ze(LA,(t=e).type).fold(function(){return console.error("skipping button defined by",t),P.none()},function(e){return P.some(e(t,n))});var t,n}).toArray()})})},jA=function(e){return e.fire("SkinLoaded")},UA=function(e){var t=function(){e._skinLoaded=!0,jA(e)};return function(){e.initialized?t():e.on("init",t)}},WA=function(e,t,n){var o=function(e){var t=e.settings,n=t.skin,o=t.skin_url;if(!1!==n){var r=n||"oxide";o=o?e.documentBaseURI.toAbsolute(o):aw.baseURL+"/skins/"+r}return o}(t);o&&(n.skinUiCss=o+"/skin.min.css",t.contentCSS.push(o+(e?"/content.inline":"/content")+".min.css")),0==(!1===t.settings.skin)&&n.skinUiCss?ea.DOM.styleSheetLoader.load(n.skinUiCss,UA(t)):UA(t)()},GA=f(WA,!1),XA=f(WA,!0),YA={render:function(n,o,e,t,r){var i,a;GA(n,r),i=Yt.fromDom(r.targetNode),a=o.mothership,So(i,a,Sn.after),ko(go.body(),o.uiMothership),n.on("init",function(){bH.setToolbar(o.outerContainer,PA(n,e,{backstage:t})),bH.setMenubar(o.outerContainer,fT(n,e,t)),bH.setSidebar(o.outerContainer,n.sidebars||[])});var u=bH.getSocket(o.outerContainer).getOrDie("Could not find expected socket element");return n.addCommand("ToggleSidebar",function(e,t){bH.toggleSidebar(o.outerContainer,t),n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return bH.whichSidebar(o.outerContainer)}),{iframeContainer:u.element().dom(),editorContainer:o.outerContainer.element().dom()}},getBehaviours:function(e){return[]}},$A={render:function(e,t,n,o,r){XA(e,r);var i=t.outerContainer,a=ea.DOM;ko(go.body(),t.mothership),ko(go.body(),t.uiMothership);var u=function(){Ka.setAll(i.element(),{position:"absolute",top:xw.absolute(Yt.fromDom(e.getBody())).top()-Za(i.element())+"px",left:xw.absolute(Yt.fromDom(e.getBody())).left()+"px"})};return e.on("init",function(){bH.setToolbar(t.outerContainer,PA(e,n,{backstage:o})),bH.setMenubar(t.outerContainer,fT(e,n,o)),u()}),e.on("ResizeWindow",u),e.on("activate focus",function(){Ka.set(t.outerContainer.element(),"display","flex"),a.addClass(e.getBody(),"mce-edit-focus"),u(),RT.refresh(i)}),e.on("deactivate blur hide",function(){t.outerContainer&&(Ka.set(t.outerContainer.element(),"display","none"),a.removeClass(e.getBody(),"mce-edit-focus"))}),{}},getBehaviours:function(t){return[RT.config({leftAttr:"data-dock-left",topAttr:"data-dock-top",contextual:{lazyContext:function(e){return P.from(t).map(function(e){return Yt.fromDom(e.getBody())})},fadeInClass:"tox-toolbar-dock-fadein",fadeOutClass:"tox-toolbar-dock-fadeout",transitionClass:"tox-toolbar-dock-transition"}})]}},qA=function(e,t){return{anchor:"makeshift",x:e,y:t}},KA=function(e,t){var n,o,r,i=ea.DOM.getPos(e);return n=t,o=i.x,r=i.y,qA(n.x+o,n.y+r)},JA=function(e,t){return"contextmenu"===t.type?e.inline?qA((o=t).pageX,o.pageY):KA(e.getContentAreaContainer(),qA((n=t).clientX,n.clientY)):QA(e);var n,o},QA=function(e){return{anchor:"selection",root:Yt.fromDom(e.selection.getNode())}},ZA=function(e){return e.settings.contextmenu_never_use_native||!1},eE=function(e){var t,n=e.getParam("contextmenu","link image imagetools table spellchecker");return"string"==typeof(t=n)?t.split(/[ ,]/):t},tE={type:"separator"},nE=function(e){switch(e.type){case"separator":return tE;case"submenu":return{type:"menuitem",text:e.text,icon:e.icon,getSubmenuItems:function(){return E(e.getSubmenuItems(),nE)}};default:return{type:"menuitem",text:e.text,icon:e.icon,onAction:(n=e.onAction,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n()})}}var n},oE=function(c,e,s){var l=Ug(px.sketch({dom:{tag:"div"},lazySink:e}));c.on("contextmenu",function(e){if(t=c,!e.ctrlKey||ZA(t)){var t,n=JA(c,e),o=c.ui.registry.getAll(),r=eE(c),i=c.selection.getStart(!0),a=function u(r,n,e,i){var t=W(e,function(e){if(r.hasOwnProperty(e)){var t=r[e].update(i);if(0<t.length){var n=E(t,function(e){return y(e)?e:nE(e)}),o=["|"];return o.concat(n).concat(o)}return[]}return[e]}),o=R(t,function(e,t){return y(t)?n.hasOwnProperty(t)?e.concat([n[t]]):"|"===t&&0<e.length&&"separator"!==e[e.length-1].type?e.concat([tE]):e:e.concat([t])},[]);return 0<o.length&&"separator"===o[o.length-1].type&&o.pop(),o}(o.contextMenus,o.menuItems,r,i);0<a.length&&(e.preventDefault(),px.showMenuAt(l,n,{menu:{markers:Rk("normal")},data:WS(a,zx.CLOSE_ON_EXECUTE,s.providers)}))}})},rE={},iE="en",aE=function(e){var t=rE[iE]||{},n=function(e){return EH(e,"function")?Object.prototype.toString.call(e):o(e)?"":""+e},o=function(e){return""===e||null===e||EH(e,"undefined")},r=function(e){return e=n(e),DH(t,e)?n(t[e]):e};if(o(e))return"";if(EH(e,"object")&&DH(e,"raw"))return n(e.raw);if(EH(e,"array")){var i=e.slice(1);e=r(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return DH(i,t)?n(i[t]):e})}return r(e).replace(/{context:\w+}$/,"")},uE=function(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1},cE=function(i,a){return a.delimiter||(a.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"]},behaviours:xi([ds.config({mode:"flow",selector:"div[role=button]"}),Nm.config({}),fh.config({}),Om("elementPathEvents",[ei(function(r,e){i.on("nodeChange",function(e){var t,o,n=function(e){for(var t=[],n=e.length;0<n--;){var o=e[n];if(1===o.nodeType&&!uE(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||t.push({name:r.name,element:o}),r.isPropagationStopped())break}}return t}(e.parents);0<n.length&&fh.set(r,(t=E(n||[],function(t,e){return Ml.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":e,"tab-index":-1,"aria-level":e+1},innerHtml:t.name},action:function(e){i.focus(),i.selection.select(t.element),i.nodeChanged()}})}),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+a.delimiter+" "}},R(t.slice(1),function(e,t){var n=e;return n.push(o),n.push(t),n},[t[0]])))})})])]),components:[]}};(zH=CH||(CH={}))[zH.None=0]="None",zH[zH.Both=1]="Both",zH[zH.Vertical=2]="Vertical";var sE,lE,fE=function(l){var o=function(c){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],innerHtml:wx("icon-resize-handle",function(){return""})},behaviours:xi([ZT.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,t,n){var o,r,i,a,s,u;o=l,r=n,i=c,a=CH,s=Yt.fromDom(o.getContainer()),(u=function(e,t,n,o){var r,i,a=Ka.getRaw(s,e).fold(t,function(e){return parseInt(e,10)}),u=n(),c=(r=u)<(i=a+o)?i:r;Ka.set(s,e,c+"px")})("height",function(){return Za(s)},function(){var e=o.getContainer().scrollHeight,t=o.contentAreaContainer.scrollHeight;return e-t+150},r.top()),i===a.Both&&u("width",function(){return wf(s)},function(){return 0},r.left())},blockerClass:"tox-blocker"})])}};return{dom:{tag:"div",classes:["tox-statusbar"]},components:function(){var e=[];e.push(cE(l,{})),bt(l.settings.plugins,"wordcount")&&e.push({dom:{tag:"span",classes:["tox-statusbar__wordcount"]},components:[],behaviours:xi([fh.config({}),Om("wordcount-events",[ei(function(t){l.on("wordCountUpdate",function(e){fh.set(t,[Pg(e.wordCountText)])})})])])}),l.getParam("branding",!0,"boolean")&&e.push({dom:{tag:"span",classes:["tox-statusbar__branding"],styles:{"float":"right"},innerHtml:aE(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>'])},behaviours:xi([Nm.config({}),Ua.config({})])});var t,n=!1===(t=l.getParam("resize",!0))?CH.None:"both"===t?CH.Both:CH.Vertical;return n!==CH.None&&e.push(o(n)),e}(),behaviours:xi([ds.config({mode:"cyclic"}),Om("statusbar-events",[ei(function(e){l.shortcuts.add("alt+F11","focus statusbar",function(){return ds.focusIn(e)})})])])}},dE=tinymce.util.Tools.resolve("tinymce.util.Delay"),mE=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},gE=undefined&&undefined.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},hE=function(i,a){return Xr(jO,function(e,t){var n,o=i.get(e),r=(n=o,{hide:function(){return io(n,Rt())},getValue:function(){return af.getValue(n)}});a.onAction(r,t.event().buttonApi())})},vE=function(e,t,n){var o,r,i,a,u,c,s,l,f,d,m,g,h={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===t.type?(s=e,f=h,(d=(l=t).original).primary,m=gE(d,["primary"]),g=or(bA(mE({},m,{type:"togglebutton",onAction:function(){}}))),DA(g,f,[hE(s,l)])):(o=e,i=h,(a=(r=t).original).primary,u=gE(a,["primary"]),c=or(mA(mE({},u,{type:"button",onAction:function(){}}))),VA(c,i,[hE(o,r)]))},pE=function(e,t){var n,o,r,i,a=oo("context-form-field"),u=e.label.map(function(e){return{dom:{tag:"label",classes:["tox-toolbar-label"],attributes:{"for":a},innerHtml:e}}}),c=e.label.fold(function(){return{}},function(e){return{id:a}}),s=Jd(Im.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:xi([ds.config({mode:"special",onEnter:function(e){return l.findPrimary(e).map(function(e){return uo(e),!0})},onLeft:function(e,t){return t.cut(),P.none()},onRight:function(e,t){return t.cut(),P.none()}})])})),l=(n=s,o=e.commands,r=t,i=E(o,function(e){return Jd(vE(n,e,r))}),{asSpecs:function(){return E(i,function(e){return e.asSpec()})},findPrimary:function(n){return Ve(o,function(e,t){return e.primary?P.from(i[t]).bind(function(e){return e.getOpt(n)}).filter(k(eg.isDisabled)):P.none()})}});return mH({uid:oo("context-toolbar"),initGroups:[{items:u.toArray().concat([s.asSpec()])},{items:l.asSpecs()}],onEscape:P.none})},bE=oo("forward-slide"),wE=oo("backward-slide"),yE=oo("change-slide-event"),xE="tox-pop--resizing",kE=function(e,t,n){for(var o=e.dom(),r=z(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=Yt.fromDom(o),a=t(i);if(a.isSome())return a;if(r(i))break}return P.none()},SE=kE,CE=function(t,e){return Ve(e,function(e){return e.predicate(t.dom())?P.some({toolbarApi:e,elem:t}):P.none()})},zE=function(t,n){var e=function(e){return e.dom()===n.getBody()},o=Yt.fromDom(n.selection.getNode());return CE(o,t.inNodeScope).orThunk(function(){return CE(o,t.inEditorScope).orThunk(function(){return SE(o,function(e){return CE(e,t.inNodeScope)},e)})})},OE=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},TE=function(n,r){var e={},i=[],a=[],u={},c={},o=function(t,n){var o=or(nr("ContextForm",zA,n));(e[t]=o).launch.map(function(e){u["form:"+t]=OE({},n.launch,{type:"contextformtogglebutton"===e.type?"togglebutton":"button",onAction:function(){r(o)}})}),"editor"===o.scope?a.push(o):i.push(o),c[t]=o},s=function(e,t){var n,o=(n=t,nr("ContextToolbar",OA,n)).getOrDie();"editor"===t.scope?a.push(o):i.push(o),c[e]=o},t=ae(n);return V(t,function(e){var t=n[e];"contextform"===t.type?o(e,t):"contexttoolbar"===t.type&&s(e,t)}),{forms:e,inNodeScope:i,inEditorScope:a,lookupTable:c,formNavigators:u}},ME=function(u,e,i,c){var n,o,s=Ug((n={sink:i,onEscape:function(){return u.focus(),P.some(!0)}},o=Ae([]),px.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(e){o.set([]),px.getContent(e).each(function(e){Ka.remove(e.element(),"visibility")}),Pi.remove(e.element(),xE),Ka.remove(e.element(),"width")},inlineBehaviours:xi([Om("context-toolbar-events",[Zr(Ke(),function(e,t){px.getContent(e).each(function(e){}),Pi.remove(e.element(),xE),Ka.remove(e.element(),"width")}),Xr(yE,function(t,n){Ka.remove(t.element(),"width");var e=wf(t.element());px.setContent(t,n.event().contents()),Pi.add(t.element(),xE);var o=wf(t.element());Ka.set(t.element(),"width",e+"px"),px.getContent(t).each(function(e){n.event().focus().bind(function(e){return Ki(e),Zi(t.element())}).orThunk(function(){return ds.focusIn(e),Qi()})}),setTimeout(function(){Ka.set(t.element(),"width",o+"px")},0)}),Xr(bE,function(e,t){px.getContent(e).each(function(e){o.set(o.get().concat([{bar:e,focus:Qi()}]))}),ao(e,yE,{contents:t.event().forwardContents(),focus:P.none()})}),Xr(wE,function(t,e){J(o.get()).each(function(e){o.set(o.get().slice(0,o.get().length-1)),ao(t,yE,{contents:Wg(e.bar),focus:e.focus})})})]),ds.config({mode:"special",onEscape:function(t){return J(o.get()).fold(function(){return n.onEscape()},function(e){return io(t,wE),P.some(!0)})}})]),lazySink:function(){return ie.value(n.sink)}})));u.on("init",function(){var e=u.getBody().ownerDocument.defaultView;qh(Yt.fromDom(e),"scroll",function(){l.get().each(function(e){var t=f.get().getOr(u.selection.getNode()).getBoundingClientRect(),n=u.contentAreaContainer.getBoundingClientRect(),o=t.bottom<0,r=t.top>n.height;o||r?Ka.set(s.element(),"display","none"):(Ka.remove(s.element(),"display"),tx.position(i,e,s))})})});var l=Ae(P.none()),f=Ae(P.none()),r=Ae(null),d=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:xi([ds.config({mode:"acyclic"}),Om("pop-dialog-wrap-events",[ei(function(e){u.shortcuts.add("ctrl+F9","focus statusbar",function(){return ds.focusIn(e)})}),ti(function(e){u.shortcuts.remove("ctrl+F9")})])])}},a=Ze(function(){return TE(e,function(e){var t=m(e);ao(s,bE,{forwardContents:d(t)})})}),m=function(e){var t,n,o=u.ui.registry.getAll().buttons,r=a();return"contexttoolbar"===e.type?(t=ne(o,r.formNavigators),n=PA(u,{buttons:t,toolbar:e.items.join(" ")},c),mH({uid:oo("context-toolbar"),initGroups:E(n,function(e){return{items:e}}),onEscape:P.none})):pE(e,c.backstage.shared.providers)};u.on("contexttoolbar-show",function(t){var e=a();ze(e.lookupTable,t.toolbarKey).each(function(e){g(e,t.target===u?P.none():P.some(t)),px.getContent(s).each(ds.focusIn)})});var g=function(e,t){v();var n,o,r=m(e),i=u.selection.getNode(),a=(n=e.position,o=Yt.fromDom(i),te(c.backstage.shared.anchors.node(o),{bubble:iy(10,12,{valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]}),layouts:{onLtr:function(){return"line"===n?[yy]:[by,wy,vy,gy,py,hy]},onRtl:function(){return"line"===n?[xy]:[by,wy]}},overrides:{maxHeightFunction:ey()}}));l.set(P.some(a)),f.set(t),px.showAt(s,a,d(r)),Ka.remove(s.element(),"display")},h=function(){var e=a();zE(e,u).fold(function(){l.set(P.none()),px.hide(s)},function(e){g(e.toolbarApi,P.some(e.elem.dom()))})},v=function(){var e=r.get();null!==e&&(clearTimeout(e),r.set(null))};u.on("click keyup setContent ObjectResized nodeChange",function(e){var t;t=dE.setEditorTimeout(u,h,0),v(),r.set(t)})},HE=function(e){var t=e.getParam("inline",!1,"boolean"),c=t?$A:YA,s=Ug({dom:El('<div class="tox tox-silver-sink tox-tinymce-aux"></div>'),behaviours:xi([tx.config({useFixed:!1})])}),l=function(){return ie.value(s)},n=bH.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},getSink:l,providers:{icons:function(){return e.ui.registry.getAll().icons}},onEscape:function(){e.focus()}}),o=bH.parts().toolbar({dom:{tag:"div",classes:["tox-toolbar"]},onEscape:function(){e.focus()}}),r=bH.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),i=bH.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),a=e.getParam("statusbar",!0,"boolean")&&!t?P.some(fE(e)):P.none(),u={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[r,i]},f=!1!==e.getParam("toolbar",!0,"boolean"),d=!1!==e.getParam("menubar",!0,"boolean"),m=j([d?[n]:[],f?[o]:[],t?[]:[u],t?[]:a.toArray()]),g=Ug(bH.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"],styles:{visibility:"hidden"}},components:m,behaviours:xi(c.getBehaviours(e))}));e.shortcuts.add("alt+F10","focus toolbar",function(){bH.focusToolbar(g)});var h=lb(g),v=lb(s),p=sA(g,s,e);return lA(e,h,v),{mothership:h,uiMothership:v,backstage:p,renderUI:function(e,t){oE(e,l,p.shared);var n=e.ui.registry.getAll(),o=n.buttons,r=n.menuItems,i=n.contextToolbars,a={menuItems:r,buttons:o,menus:e.settings.menu?se(e.settings.menu,function(e){return ne(e,{items:e.items})}):{},menubar:e.settings.menubar,toolbar:e.settings.toolbar,sidebar:e.sidebars?e.sidebars:[]};ME(e,i,s,{backstage:p});var u={mothership:h,uiMothership:v,outerContainer:g};return c.render(e,u,a,p,t)},getUi:function(){return{channels:{broadcastAll:v.broadcast,broadcastOn:v.broadcastOn,register:function(){}}}}}},AE=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},EE=function(n){var e=[{type:"menuitem",text:"Left",icon:"align-left",onAction:AE(n,"alignleft")},{type:"menuitem",text:"Center",icon:"align-center",onAction:AE(n,"aligncenter")},{type:"menuitem",text:"Right",icon:"align-right",onAction:AE(n,"alignright")},{type:"menuitem",text:"Justify",icon:"align-justify",onAction:AE(n,"alignjustify")}];n.ui.registry.addMenuItem("align",{text:"Align",icon:"align-left",hasSubmenu:!0,getSubmenuItems:function(){return e}});var t=function(t){return function(e){n.formatter?n.formatter.formatChanged(t.name,e.setActive):n.on("init",function(){n.formatter.formatChanged(t.name,e.setActive)})}};pz.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(e){n.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return n.execCommand(e.cmd)},icon:e.icon,onSetup:t(e)})});var o={name:"alignnone",text:"No alignment",cmd:"JustifyNone",icon:"align-justify"};n.ui.registry.addButton(o.name,{tooltip:o.text,onAction:function(){return n.execCommand(o.cmd)},icon:o.icon,onSetup:t(o)})},VE=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},DE=function(i,a){return function(t){var e,n,o,r;return n=a,o=function(e){t.setActive(e)},r=function(e){o(e,n)},(e=i).formatter?e.formatter.formatChanged(n,r):e.on("init",function(){e.formatter.formatChanged(n,r)}),function(){}}},BE=function(e){var t,n,o;t=e,pz.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:DE(t,e.name),onAction:VE(t,e.name)})}),n=e,pz.each([{name:"outdent",text:"Decrease indent",action:"Outdent",icon:"outdent"},{name:"indent",text:"Increase indent",action:"Indent",icon:"indent"},{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(e){n.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return n.execCommand(e.action)}})}),o=e,pz.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(e){o.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return o.execCommand(e.action)},onSetup:DE(o,e.name)})})},RE=function(e){var t;BE(e),t=e,pz.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(e){t.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:function(){return t.execCommand(e.action)}})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:VE(t,"code")})},FE=function(e,t,n){var o=function(){return!!t.undoManager&&t.undoManager[n]()},r=function(){e.setDisabled(t.readonly||!o())};return e.setDisabled(!o()),t.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return t.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},IE=function(e){var t,n;(t=e).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(e){return FE(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(e){return FE(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}}),(n=e).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(e){return FE(e,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(e){return FE(e,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},_E=function(e){var t,n;(t=e).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return t.execCommand("mceToggleVisualAid")}}),(n=e).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(e){return function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}}(e,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})},LE=function(e){EE(e),RE(e),IE(e),_E(e)},NE=[vr("type"),vr("text"),qo("level","level",To(),Zo(function(e){return M(["info","warn","error","success"],e)?ie.value(e):ie.error('Unsupported level: "'+e+'", choose one of "info", "warn", "error", "success".')})),vr("icon"),Or("url","")],PE=[vr("type"),vr("text"),Ar("primary",!1),qo("name","name",Ho(function(){return oo("button-name")}),fr)],jE=[vr("type"),vr("name"),vr("label")],UE=["checked","unchecked","indeterminate"],WE=Zo(function(e){return M(UE,e)?ie.value(e):ie.error('Checkbox data: can only be a string of either "'+UE.join('" | "')+'" ')}),GE=[vr("type"),vr("name"),Sr("label")],XE=GE,YE=fr,$E=GE,qE=fr,KE=GE.concat([Or("flex",!1)]),JE=Wo(Qo),QE=[vr("type"),(sE="columns",hr(sE,lr)),qo("items","items",To(),Wo(Zo(function(e){return nr("Checking item of grid",pV,e).fold(function(e){return ie.error(ar(e))},function(e){return ie.value(e)})})))],ZE=GE.concat([Ar("sandboxed",!0)]),eV=fr,tV=GE,nV=fr,oV=GE.concat([wr("items",[vr("text"),vr("value")]),Mr("size",1)]),rV=fr,iV=GE.concat([Ar("constrain",!0)]),aV=Uo([vr("width"),vr("height")]),uV=GE.concat([Or("flex",!1)]),cV=fr,sV=GE.concat([Or("filetype","file")]),lV=Uo([vr("value"),Or("meta",{})]),fV=GE.concat([vr("type"),Hr("tag","textarea"),pr("init")]),dV=fr,mV=[vr("type"),vr("html")],gV=GE.concat([gr("currentState")]),hV=GE.concat([Or("columns",1)]),vV=(lE=[vr("value"),Sr("text"),Sr("icon")],Yo(lE)),pV=ur("type",{alertbanner:NE,button:PE,checkbox:jE,colorinput:XE,colorpicker:$E,dropzone:KE,grid:QE,iframe:ZE,input:tV,selectbox:oV,sizeinput:iV,textarea:uV,urlinput:sV,customeditor:fV,htmlpanel:mV,imagetools:gV,collection:hV}),bV=[vr("type"),yr("items",pV)],wV=[vr("title"),yr("items",pV)],yV=[vr("type"),wr("tabs",wV)],xV=Uo([vr("type"),qo("name","name",Ho(function(){return oo("button-name")}),fr),vr("text"),Hr("align","end"),Ar("primary",!1),Ar("disabled",!1)]),kV=Uo([vr("title"),hr("body",ur("type",{panel:bV,tabpanel:yV})),Hr("size","normal"),yr("buttons",xV),Or("initialData",{}),Er("onAction",N),Er("onChange",N),Er("onSubmit",N),Er("onClose",N),Er("onCancel",N),Or("onTabChange",N),xr("readyWhen")]),SV=function(e){return x(e)?[e].concat(W(de(e),SV)):S(e)?W(e,SV):[]},CV=function(e){return y(e.type)&&y(e.name)},zV={checkbox:WE,colorinput:YE,colorpicker:qE,dropzone:JE,input:nV,iframe:eV,sizeinput:aV,selectbox:rV,size:aV,textarea:cV,urlinput:lV,customeditor:dV,collection:vV},OV=function(e){var t=W(D(SV(e),CV),function(t){return(e=t,P.from(zV[e.type])).fold(function(){return[]},function(e){return[hr(t.name,e)]});var e});return Uo(t)},TV=function(e){return{internalDialog:or(nr("dialog",kV,e)),dataValidator:OV(e),initialData:e.initialData}},MV={open:function(e,t){var n=TV(t);return e(n.internalDialog,n.initialData,n.dataValidator)},redial:function(e){return TV(e)}},HV=oo("update-dialog"),AV=oo("update-title"),EV=oo("update-body"),VV=oo("update-footer"),DV=function(e){var n=[],o={};return ce(e,function(e,t){e.fold(function(){n.push(t)},function(e){o[t]=e})}),0<n.length?ie.error(n):ie.value(o)},BV=function(e){return K((t=e,n=function(e,t){return t<e?-1:e<t?1:0},(o=X.call(t,0)).sort(n),o));var t,n,o},RV=function(a){return{smartTabHeight:{extraEvents:[ei(function(e){fu(e.element(),'[role="tabpanel"]').each(function(n){var t;Ka.set(n,"visibility","hidden"),e.getSystem().getByDom(n).toOption().bind(function(e){var o,r,i,t=(r=n,i=e,E(o=a,function(e,t){fh.set(i,o[t].view());var n=r.dom().getBoundingClientRect();return fh.set(i,[]),n.height}));return BV(t)}).each(function(e){Ka.set(n,"height",e+"px")}),Ka.remove(n,"visibility"),t=e,K(a).each(function(e){return JM.showTab(t,e.value)})})}),Xr(uS,function(e,t){fu(e.element(),'[role="tabpanel"]').each(function(t){Ka.set(t,"visibility","hidden");var e=Ka.getRaw(t,"height").map(function(e){return parseInt(e,10)});Ka.remove(t,"height");var n=t.dom().getBoundingClientRect().height;e.forall(function(e){return e<n})?Ka.set(t,"height",n+"px"):e.each(function(e){Ka.set(t,"height",e+"px")}),Ka.remove(t,"visibility")})})],selectFirst:!1},naiveTabHeight:{extraEvents:[],selectFirst:!0}}},FV="send-data-to-section",IV="send-data-to-view",_V=function(e,d){return{dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[],behaviours:xi([LC(0),uM.config({channel:EV,updateState:function(e,t){return P.some({isTabPanel:function(){return"tabpanel"===t.body.type}})},renderComponents:function(e){switch(e.body.type){case"tabpanel":return[(r={tabs:e.body.tabs},i=d,a=Ae({}),u=function(e){var t=af.getValue(e),n=DV(t).getOr({}),o=a.get(),r=te(o,n);a.set(r)},c=function(e){var t=a.get();af.setValue(e,t)},s=Ae(null),l=E(r.tabs,function(e){return{value:e.title,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.title},view:function(){return[rg.sketch(function(t){return{dom:{tag:"div",classes:["tox-form"]},components:E(e.items,function(e){return _O(t,e,i)}),formBehaviours:xi([ds.config({mode:"acyclic",useTabstopAt:k(lz)}),Om("TabView.form.events",[ei(c),ti(u)]),ya.config({channels:Te([{key:FV,value:{onReceive:u}},{key:IV,value:{onReceive:c}}])})])}})]}}}),f=RV(l).smartTabHeight,JM.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(e,t,n){var o=af.getValue(t);ao(e,aS,{title:o,oldTitle:s.get()}),s.set(o)},tabs:l,components:[JM.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[GM.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:xi([Nm.config({})])}),JM.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:f.selectFirst,tabSectionBehaviours:xi([Om("tabpanel",f.extraEvents),ds.config({mode:"acyclic"}),Hm.config({find:function(e){return K(JM.getViewItems(e))}}),af.config({store:{mode:"manual",getValue:function(e){return e.getSystem().broadcastOn([FV],{}),a.get()},setValue:function(e,t){a.set(t),e.getSystem().broadcastOn([IV],{})}}})])}))];default:return[(n={items:e.body.items},o=d,t=Jd(rg.sketch(function(t){return{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:E(n.items,function(e){return _O(t,e,o)})}})),{dom:{tag:"div",classes:["tox-dialog__body"]},components:[t.asSpec()],behaviours:xi([ds.config({mode:"acyclic",useTabstopAt:k(lz)}),_C(t),XC(t,{postprocess:function(e){return DV(e).fold(function(e){return console.error(e),{}},function(e){return e})}})])})]}var n,o,t,r,i,a,u,c,s,l,f},initialData:e})])}},LV=function(o,n){var e=function(e,r){return Xr(e,function(n,o){t(n,function(e,t){r(e,o.event(),n)})})},t=function(t,n){uM.getState(t).get().each(function(e){n(e.internalDialog,t)})};return[Kr(Ue(),fz),e(oS,function(e){return e.onSubmit(o())}),e(Zk,function(e,t){e.onChange(o(),{name:t.name()})}),e(nS,function(e,t){e.onAction(o(),{name:t.name(),value:t.value()})}),e(aS,function(e,t){e.onTabChange(o(),t.title())}),e(eS,function(e){n.onClose(),e.onClose()}),e(tS,function(e,t,n){e.onCancel(o()),io(n,eS)}),ti(function(e){var t=o();af.setValue(e,t.getData())}),Xr(iS,function(e,t){return n.onUnblock()}),Xr(rS,function(e,t){return n.onBlock(t.event())})]},NV=function(e,t){var n=function(e,t){for(var n=[],o=[],r=0,i=e.length;r<i;r++){var a=e[r];(t(a,r,e)?n:o).push(a)}return{pass:n,fail:o}}(t.map(function(e){return e.footerButtons}).getOr([]),function(e){return"start"===e.align}),o=function(e,t){return Am.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+e]},components:E(t,function(e){return e.memento.asSpec()})})};return[o("start",n.pass),o("end",n.fail)]},PV=function(e){return{dom:El('<div class="tox-dialog__footer"></div>'),components:[],behaviours:xi([uM.config({channel:VV,initialData:e,updateState:function(e,t){var r=E(t.buttons,function(e){var t,n=Jd(nz(t=e,t.type));return{name:e.name,align:e.align,memento:n}});return P.some({lookupByName:function(e,t){return n=e,o=t,F(r,function(e){return e.name===o}).bind(function(e){return e.memento.getOpt(n)});var n,o},footerButtons:r})},renderComponents:NV})])}},jV=undefined&&undefined.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},UV=function(){return Ml.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":"Close"}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(e){io(e,tS)}})},WV=function(e,t){var n=function(e){return[Pg(e.title)]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:jV({},t.map(function(e){return{id:e}}).getOr({}))},components:n(e),behaviours:xi([uM.config({channel:AV,renderComponents:n})])}},GV=function(t,n){if(t.getRoot().getSystem().isConnected()){var o=Hm.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return rg.getField(o,n).fold(function(){var e=t.getFooter();return uM.getState(e).get().bind(function(e){return e.lookupByName(o,n)})},function(e){return P.some(e)})}return P.none()},XV=function(c,o){var e=function(e){var t=c.getRoot();t.getSystem().isConnected()&&e(t)},s={getData:function(){var e=c.getRoot(),t=e.getSystem().isConnected()?c.getFormWrapper():e;return af.getValue(t)},setData:function(u){e(function(e){var t,n,o=s.getData(),r=ne(o,u),i=(t=r,n=c.getRoot(),uM.getState(n).get().map(function(e){return or(nr("data",e.dataValidator,t))}).getOr(t)),a=c.getFormWrapper();af.setValue(a,i)})},disable:function(e){GV(c,e).each(eg.disable)},enable:function(e){GV(c,e).each(eg.enable)},focus:function(e){GV(c,e).each(Ua.focus)},block:function(t){e(function(e){ao(e,rS,{message:t})})},unblock:function(){e(function(e){io(e,iS)})},showTab:function(n){e(function(e){var t=c.getBody();uM.getState(t).get().exists(function(e){return e.isTabPanel()})&&Hm.getCurrent(t).each(function(e){JM.showTab(e,n)})})},redial:function(n){e(function(e){var t=o(n);e.getSystem().broadcastOn([HV],t),e.getSystem().broadcastOn([AV],t.internalDialog),e.getSystem().broadcastOn([EV],t.internalDialog),e.getSystem().broadcastOn([VV],t.internalDialog),s.setData(t.initialData)})},close:function(){e(function(e){io(e,eS)})}};return s},YV=function(e,t,n){var o,r,i,a,u,c,s,l,f,d=(r={title:e.internalDialog.title,draggable:!0},i=OM.parts().title(WV(r,P.none())),a=OM.parts().draghandle({dom:El('<div class="tox-dialog__draghandle"></div>')}),u=OM.parts().close(UV()),c=[i].concat(r.draggable?[a]:[]).concat([u]),Am.sketch({dom:El('<div class="tox-dialog__header"></div>'),components:c})),m=(s={body:e.internalDialog.body},l=n,OM.parts().body(_V(s,l))),g=(f={buttons:e.internalDialog.buttons},OM.parts().footer(PV(f))),h=LV(function(){return b},{onClose:function(){return t.closeWindow()},onBlock:function(n){OM.setBusy(p,function(e,t){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:El('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){OM.setIdle(p)}}),v="normal"!==e.internalDialog.size?"large"===e.internalDialog.size?"tox-dialog--width-lg":"tox-dialog--width-md":[],p=Ug(OM.sketch({lazySink:n.shared.getSink,onEscape:function(e){return io(e,tS),P.some(!0)},useTabstopAt:function(e){return!lz(e)&&("button"!==_n.name(e)||"disabled"!==Un.get(e,"disabled"))},modalBehaviours:xi([uM.config({channel:HV,updateState:function(e,t){return P.some(t)},initialData:e}),Ua.config({}),Om("execute-on-form",h.concat([Zr(Ue(),function(e,t){ds.focusIn(e)})])),qC({})]),eventOrder:(o={},o[At()]=["execute-on-form"],o[Lt()]=["reflecting","execute-on-form"],o),dom:{tag:"div",classes:["tox-dialog"].concat(v),styles:{position:"relative"}},components:[d,m,g],dragBlockClass:"tox-dialog-wrap",parts:{blocker:{dom:El('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}}})),b=XV({getRoot:function(){return p},getBody:function(){return OM.getBody(p)},getFooter:function(){return OM.getFooter(p)},getFormWrapper:function(){var e=OM.getBody(p);return Hm.getCurrent(e).getOr(e)}},t.redial);return{dialog:p,instanceApi:b}},$V=function(e,t,n){var o,r,i,a,u,c,s=oo("dialog-label"),l=Jd((i={title:e.internalDialog.title,draggable:!0},a=s,Am.sketch({dom:El('<div class="tox-dialog__header"></div>'),components:[WV(i,P.some(a)),UV()],containerBehaviours:xi([ZT.config({mode:"mouse",blockerClass:"blocker",getTarget:function(e){return du(e,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),f=Jd((u={body:e.internalDialog.body},_V(u,n))),d=Jd((c={buttons:e.internalDialog.buttons},PV(c))),m=LV(function(){return h},{onBlock:function(){},onUnblock:function(){},onClose:function(){return t.closeWindow()}}),g=Ug({dom:{tag:"div",classes:["tox-dialog"],attributes:(o={role:"dialog"},o["aria-labelledby"]=s,o)},eventOrder:(r={},r[Ht()]=[uM.name(),ya.name()],r[At()]=["execute-on-form"],r[Lt()]=["reflecting","execute-on-form"],r),behaviours:xi([ds.config({mode:"cyclic",onEscape:function(e){return io(e,eS),P.some(!0)},useTabstopAt:function(e){return!lz(e)&&("button"!==_n.name(e)||"disabled"!==Un.get(e,"disabled"))}}),uM.config({channel:HV,updateState:function(e,t){return P.some(t)},initialData:e}),Om("execute-on-form",m),qC({})]),components:[l.asSpec(),f.asSpec(),d.asSpec()]}),h=XV({getRoot:function(){return g},getFooter:function(){return d.get(g)},getBody:function(){return f.get(g)},getFormWrapper:function(){var e=f.get(g);return Hm.getCurrent(e).getOr(e)}},t.redial);return{dialog:g,instanceApi:h}},qV=function(e){return OM.parts().close(Ml.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":"Close"}},action:e,buttonBehaviours:xi([Nm.config({})])}))},KV=function(){return OM.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},JV=function(e){return OM.parts().body({dom:{tag:"div",classes:["tox-dialog__body","todo-tox-fit"]},components:[{dom:El("<p>"+e+"</p>")}]})},QV=function(e){return OM.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},ZV=function(n){return OM.sketch({lazySink:n.lazySink,onEscape:function(){return n.onCancel(),P.some(!0)},dom:{tag:"div",classes:["tox-dialog"].concat(n.extraClasses)},components:[{dom:{tag:"div",classes:["tox-dialog__header"]},components:[n.partSpecs.title,n.partSpecs.close]},n.partSpecs.body,n.partSpecs.footer],parts:{blocker:{dom:El('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}},modalBehaviours:xi([Om("basic-dialog-events",[Xr(tS,function(e,t){n.onCancel()}),Xr(oS,function(e,t){n.onSubmit()})])])})},eD=function(c){var a,u,o=(a=c.backstage.shared.getSink,{open:function(e,t){var n=function(e){OM.hide(e),t()},o=Jd(nz({name:"close-alert",text:"Ok",primary:!0},"cancel")),r=Ug(ZV({lazySink:function(){return a()},partSpecs:{title:KV(),close:qV(function(){n(r)}),body:JV(e),footer:QV([o.asSpec()])},onCancel:function(){return n(r)},onSubmit:N,extraClasses:["tox-alert-dialog"]}));OM.show(r);var i=o.get(r);Ua.focus(i)}}),r=(u=c.backstage.shared.getSink,{open:function(e,n){var t=function(e,t){OM.hide(e),n(t)},o=Jd(nz({name:"yes",text:"Yes",primary:!0},"submit")),r=nz({name:"no",text:"No",primary:!0},"cancel"),i=Ug(ZV({lazySink:function(){return u()},partSpecs:{title:KV(),close:qV(function(){t(i,!1)}),body:JV(e),footer:QV([o.asSpec(),r])},onCancel:function(){return t(i,!1)},onSubmit:function(){return t(i,!0)},extraClasses:["tox-confirm-dialog"]}));OM.show(i);var a=o.get(i);Ua.focus(a)}}),i=function(e,i){return MV.open(function(e,t,n){var o=t,r=YV({dataValidator:n,initialData:o,internalDialog:e},{redial:MV.redial,closeWindow:function(){OM.hide(r.dialog),i(r.instanceApi)}},c.backstage);return OM.show(r.dialog),r.instanceApi.setData(o),r.instanceApi},e)},s=function(e,a,u){return MV.open(function(e,t,n){var o=or(nr("data",n,t)),r=$V({dataValidator:n,initialData:o,internalDialog:e},{redial:MV.redial,closeWindow:function(){px.hide(i),u(r.instanceApi)}},c.backstage),i=Ug(px.sketch({lazySink:c.backstage.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},inlineBehaviours:xi([Om("window-manager-inline-events",[Xr(Pt(),function(e,t){io(r.dialog,tS)})])])}));return px.showAt(i,a,Wg(r.dialog)),r.instanceApi.setData(o),ds.focusIn(r.dialog),r.instanceApi},e)};return{open:function(e,t,n){return t!==undefined&&"toolbar"===t.inline?s(e,c.backstage.shared.anchors.toolbar(),n):t!==undefined&&"cursor"===t.inline?s(e,c.backstage.shared.anchors.cursor(),n):i(e,n)},openInlineDialog:s,alert:function(e,t,n){o.open(e,function(){n(),t()})},close:function(e){e.close()},confirm:function(e,t,n){r.open(e,function(e){n(),t(e)})}}};ro.add("silver",function(o){if(zt.detect().deviceType.isTouch()&&!o.getParam("inline",!1,"boolean"))return mw(o);var e=HE(o),t=e.mothership,n=e.uiMothership,r=e.backstage,i=e.renderUI,a=e.getUi;LE(o),eo(oo("silver-demo"),t),eo(oo("silver-ui-demo"),n),Qk(o,r.shared);var u=eD({backstage:r});return{renderUI:f(i,o),getWindowManagerImpl:function(){var e,t=(e=o.windowManager.windows,P.from(e[e.length-1])).fold(function(){return{getParams:N,setParams:N}},function(e){return{getParams:e.getData,setParams:e.setData}}),n={getWindows:function(){return o.windowManager.windows},windows:o.windowManager.windows};return ne(u,t,n)},getNotificationManagerImpl:function(){return Cx(o,{backstage:r},n)},ui:a()}}),function AD(){}}();